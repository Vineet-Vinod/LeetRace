{
  "id": "longest-valid-parentheses",
  "title": "Longest Valid Parentheses",
  "difficulty": "Hard",
  "tags": [
    "Stack",
    "String",
    "Dynamic Programming"
  ],
  "description": "Given a string containing just the characters '(' and ')', return the length of the longest valid (well-formed) parentheses substring.\n\u00a0\nExample 1:\n\nInput: s = \"(()\"\nOutput: 2\nExplanation: The longest valid parentheses substring is \"()\".\n\nExample 2:\n\nInput: s = \")()())\"\nOutput: 4\nExplanation: The longest valid parentheses substring is \"()()\".\n\nExample 3:\n\nInput: s = \"\"\nOutput: 0\n\n\u00a0\nConstraints:\n\n0 <= s.length <= 3 * 104\ns[i] is '(', or ')'.\n\n",
  "entry_point": "Solution().longestValidParentheses",
  "starter_code": "class Solution:\n    def longestValidParentheses(self, s: str) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"(()())\") == 6\n    assert candidate(s = \"())\") == 2\n    assert candidate(s = \"())(()\") == 2\n    assert candidate(s = \"((((((()))))))\") == 14\n    assert candidate(s = \"((())()())()\") == 12\n    assert candidate(s = \")()(()(()))\") == 10\n    assert candidate(s = \"(()(()(()(()))))\") == 16\n    assert candidate(s = \")()())\") == 4\n    assert candidate(s = \"()()()()()()()()\") == 16\n    assert candidate(s = \"()(()(()))\") == 10\n    assert candidate(s = \"()()(())\") == 8\n    assert candidate(s = \"\") == 0\n    assert candidate(s = \"(()))()\") == 4\n    assert candidate(s = \"(()))(()))\") == 4\n    assert candidate(s = \"(()))\") == 4\n    assert candidate(s = \"(()(()))\") == 8\n    assert candidate(s = \"((()))(())()()\") == 14\n    assert candidate(s = \"((())()())\") == 10\n    assert candidate(s = \"(()(())())()()\") == 14\n    assert candidate(s = \"()(()(()(()(()(()))))\") == 18\n    assert candidate(s = \"((((((((((()))))))))))\") == 22\n    assert candidate(s = \"())()(()\") == 2\n    assert candidate(s = \"()(()\") == 2\n    assert candidate(s = \"(()\") == 2\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 72\n    assert candidate(s = \"(((())))()()()\") == 14\n    assert candidate(s = \"(()((())()())())\") == 16\n    assert candidate(s = \"()()()()()()()()()\") == 18\n    assert candidate(s = \"((())((()))\") == 10\n    assert candidate(s = \"((()))\") == 6\n    assert candidate(s = \"(()))(()())\") == 6\n    assert candidate(s = \"()()\") == 4\n    assert candidate(s = \"()()()()\") == 8\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()()\") == 36\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()\") == 34\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 80\n    assert candidate(s = \"(()(()(()(()(())))))\") == 20\n    assert candidate(s = \"()(()(()))()()\") == 14\n    assert candidate(s = \"(()((())()()))\") == 14\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 60\n    assert candidate(s = \"((((()))))((((()))))((((()))))\") == 30\n    assert candidate(s = \"(()((((())))))\") == 14\n    assert candidate(s = \"(((((((((((((())))))))))()))))))))))))))))))()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 60\n    assert candidate(s = \"((())()(()))\") == 12\n    assert candidate(s = \"(((((())))))\") == 12\n    assert candidate(s = \"(()((())())())\") == 14\n    assert candidate(s = \"()((((((()))))))()\") == 18\n    assert candidate(s = \"(((()(()(()(()(()(()()))))))))\") == 30\n    assert candidate(s = \"((((()))))(((())))\") == 18\n    assert candidate(s = \"(((())))(((())))(((())))(((())))\") == 32\n    assert candidate(s = \"((((((((((())))))))))))\") == 22\n    assert candidate(s = \"()(()(((()))()))\") == 16\n    assert candidate(s = \"(((((())))))(((((())))))\") == 24\n    assert candidate(s = \"()()(()(()))(()(()))()()\") == 24\n    assert candidate(s = \"(()(()(()(()(()))))())\") == 22\n    assert candidate(s = \"(()())(()())(()())\") == 18\n    assert candidate(s = \"()()()(()(()(()(()(()()))))\") == 20\n    assert candidate(s = \"(()(()))(()(()))(()(()))(()(()))\") == 32\n    assert candidate(s = \"((((((((()))))))))\") == 18\n    assert candidate(s = \"((()()()()()()))((()()()()()()))\") == 32\n    assert candidate(s = \"()((()))()(()(()))()\") == 20\n    assert candidate(s = \"(((((()(()(()(()(()(()()))))))))))()()()\") == 40\n    assert candidate(s = \"(()(()(()(()(()(()(()(())))))))()()\") == 34\n    assert candidate(s = \"(()(()(()(()))()))\") == 18\n    assert candidate(s = \"()(()())(()(()))\") == 16\n    assert candidate(s = \"(()(()(()(()(()(()(()(())))))))))\") == 32\n    assert candidate(s = \"()(()(()(()(()(()(()(()(()))()))))))()()\") == 40\n    assert candidate(s = \"()(()(()))()()()\") == 16\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()))))))))))))))\") == 44\n    assert candidate(s = \"((()))((()))\") == 12\n    assert candidate(s = \"((()()(()())))()()\") == 18\n    assert candidate(s = \"()(()(()(()(()(()(()(()))))))))))))()(()(()(()))()()()()()()()()\") == 30\n    assert candidate(s = \"(()((())((()))(((())))))\") == 24\n    assert candidate(s = \"()()()()()()()()()()\") == 20\n    assert candidate(s = \"((((((((()))))))(()(()(()(()(()(()(()))))))))()()\") == 48\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(())))))()))))))))\") == 46\n    assert candidate(s = \"(()(()(()(()(()(()()))))))\") == 26\n    assert candidate(s = \"(()(()(()(()(()(()))))))\") == 24\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()()))))))))))()())\") == 50\n    assert candidate(s = \"()(()(()(()(()(())))))\") == 22\n    assert candidate(s = \"(((()(()))(()(()))))\") == 20\n    assert candidate(s = \"()((((()))))()(()(()))\") == 22\n    assert candidate(s = \"(()((((()))))))()()\") == 14\n    assert candidate(s = \"((((()))))(()(()))\") == 18\n    assert candidate(s = \"(()(()(()(()(()(()))))())()()\") == 28\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()(()(()))()))))))))))))))))))\") == 54\n    assert candidate(s = \"(()(()(()(()(()(()(()))))))))))))()(()(()(()))\") == 28\n    assert candidate(s = \"(()(()(()))(()(())))\") == 20\n    assert candidate(s = \"(()(()))(()(()))\") == 16\n    assert candidate(s = \"(((()()(()())()(()(())))))()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 126\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(())))))))))\") == 36\n    assert candidate(s = \"(()(()))()(()())\") == 16\n    assert candidate(s = \"()((((((((())))))))))()()\") == 20\n    assert candidate(s = \"()(()(()(()(()(()(())))))()()()\") == 28\n    assert candidate(s = \"(()(()(()(()(()(()(()()))))))))\") == 30\n    assert candidate(s = \"((())())(()(()(()())))\") == 22\n    assert candidate(s = \"((()))((()))((()))((()))\") == 24\n    assert candidate(s = \"((()))()((()))()((()))\") == 22\n    assert candidate(s = \"(()(()(()(()(()(()(()))))))))))))()\") == 28\n    assert candidate(s = \"(()(())((())))\") == 14\n    assert candidate(s = \"((((((((()))))))))))))))\") == 18\n    assert candidate(s = \"(()(()(()(()(()(()(())))))))\") == 28\n    assert candidate(s = \"(()(()(()(()(()(()(()))))))())\") == 30\n    assert candidate(s = \"()()(()(()(()(()()))))\") == 22\n    assert candidate(s = \"()(()))(()(()))\") == 8\n    assert candidate(s = \"(()(()(()(()(()(()(()(())))))())))\") == 34\n    assert candidate(s = \"(()(()(()(()(()(()(()(()(()))))))))))))()(()(()(()))()()()()()()()()(()(()(())))\") == 38\n    assert candidate(s = \"()(()(()(()(()(()(()(())))))))\") == 30\n    assert candidate(s = \"(()()(()))((())())\") == 18\n    assert candidate(s = \"(((((())))))(((()(()))(()))(()(()))(()(()))(()(()))(()(())))\") == 60\n    assert candidate(s = \"(()(()(()(()(()(()(())))))())()()()\") == 34\n    assert candidate(s = \"()(()(()(()(()(())))))()()\") == 26\n    assert candidate(s = \"((()))(()(()))\") == 14\n    assert candidate(s = \"())(()())(()(()()(())))\") == 20\n    assert candidate(s = \"((())())(()(()(()(()))))\") == 24\n    assert candidate(s = \"(((()))(()))(()())\") == 18\n    assert candidate(s = \"((())())(()(()))\") == 16\n    assert candidate(s = \"(()(()))(()(()))(()(()))\") == 24\n    assert candidate(s = \"(()(()(())))()()()(()(()))\") == 26\n    assert candidate(s = \"()()()()()()()()()()()()\") == 24\n    assert candidate(s = \"(((((()(()))(()(())))))())\") == 26\n    assert candidate(s = \"()(()(()(()(()(()(()(()))))))))\") == 30\n    assert candidate(s = \"((())((()))(()(()))(()))\") == 24\n    assert candidate(s = \"()(()()(()(()())))\") == 18\n    assert candidate(s = \"((()(()())))()((()(())))\") == 24\n    assert candidate(s = \"((((()))()()()(()))\") == 18\n    assert candidate(s = \"((((((()))))))(()(()(())))\") == 26\n    assert candidate(s = \"(((()(()(()(()())))))()())\") == 26\n    assert candidate(s = \"()(()(()(()(()(()(())))))\") == 22\n    assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()\") == 40\n    assert candidate(s = \"()()()()()()()()()()()()()()()\") == 30\n    assert candidate(s = \"((((((()))))))(()(()(()(()))))\") == 30\n    assert candidate(s = \"(()())(())(()(()(()(())))())\") == 28\n",
  "test_cases": [
    "assert candidate(s = \"(()())\") == 6",
    "assert candidate(s = \"())\") == 2",
    "assert candidate(s = \"())(()\") == 2",
    "assert candidate(s = \"((((((()))))))\") == 14",
    "assert candidate(s = \"((())()())()\") == 12",
    "assert candidate(s = \")()(()(()))\") == 10",
    "assert candidate(s = \"(()(()(()(()))))\") == 16",
    "assert candidate(s = \")()())\") == 4",
    "assert candidate(s = \"()()()()()()()()\") == 16",
    "assert candidate(s = \"()(()(()))\") == 10",
    "assert candidate(s = \"()()(())\") == 8",
    "assert candidate(s = \"\") == 0",
    "assert candidate(s = \"(()))()\") == 4",
    "assert candidate(s = \"(()))(()))\") == 4",
    "assert candidate(s = \"(()))\") == 4",
    "assert candidate(s = \"(()(()))\") == 8",
    "assert candidate(s = \"((()))(())()()\") == 14",
    "assert candidate(s = \"((())()())\") == 10",
    "assert candidate(s = \"(()(())())()()\") == 14",
    "assert candidate(s = \"()(()(()(()(()(()))))\") == 18",
    "assert candidate(s = \"((((((((((()))))))))))\") == 22",
    "assert candidate(s = \"())()(()\") == 2",
    "assert candidate(s = \"()(()\") == 2",
    "assert candidate(s = \"(()\") == 2",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 72",
    "assert candidate(s = \"(((())))()()()\") == 14",
    "assert candidate(s = \"(()((())()())())\") == 16",
    "assert candidate(s = \"()()()()()()()()()\") == 18",
    "assert candidate(s = \"((())((()))\") == 10",
    "assert candidate(s = \"((()))\") == 6",
    "assert candidate(s = \"(()))(()())\") == 6",
    "assert candidate(s = \"()()\") == 4",
    "assert candidate(s = \"()()()()\") == 8",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()()\") == 36",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()\") == 34",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 80",
    "assert candidate(s = \"(()(()(()(()(())))))\") == 20",
    "assert candidate(s = \"()(()(()))()()\") == 14",
    "assert candidate(s = \"(()((())()()))\") == 14",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 60",
    "assert candidate(s = \"((((()))))((((()))))((((()))))\") == 30",
    "assert candidate(s = \"(()((((())))))\") == 14",
    "assert candidate(s = \"(((((((((((((())))))))))()))))))))))))))))))()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 60",
    "assert candidate(s = \"((())()(()))\") == 12",
    "assert candidate(s = \"(((((())))))\") == 12",
    "assert candidate(s = \"(()((())())())\") == 14",
    "assert candidate(s = \"()((((((()))))))()\") == 18",
    "assert candidate(s = \"(((()(()(()(()(()(()()))))))))\") == 30",
    "assert candidate(s = \"((((()))))(((())))\") == 18",
    "assert candidate(s = \"(((())))(((())))(((())))(((())))\") == 32",
    "assert candidate(s = \"((((((((((())))))))))))\") == 22",
    "assert candidate(s = \"()(()(((()))()))\") == 16",
    "assert candidate(s = \"(((((())))))(((((())))))\") == 24",
    "assert candidate(s = \"()()(()(()))(()(()))()()\") == 24",
    "assert candidate(s = \"(()(()(()(()(()))))())\") == 22",
    "assert candidate(s = \"(()())(()())(()())\") == 18",
    "assert candidate(s = \"()()()(()(()(()(()(()()))))\") == 20",
    "assert candidate(s = \"(()(()))(()(()))(()(()))(()(()))\") == 32",
    "assert candidate(s = \"((((((((()))))))))\") == 18",
    "assert candidate(s = \"((()()()()()()))((()()()()()()))\") == 32",
    "assert candidate(s = \"()((()))()(()(()))()\") == 20",
    "assert candidate(s = \"(((((()(()(()(()(()(()()))))))))))()()()\") == 40",
    "assert candidate(s = \"(()(()(()(()(()(()(()(())))))))()()\") == 34",
    "assert candidate(s = \"(()(()(()(()))()))\") == 18",
    "assert candidate(s = \"()(()())(()(()))\") == 16",
    "assert candidate(s = \"(()(()(()(()(()(()(()(())))))))))\") == 32",
    "assert candidate(s = \"()(()(()(()(()(()(()(()(()))()))))))()()\") == 40",
    "assert candidate(s = \"()(()(()))()()()\") == 16",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()))))))))))))))\") == 44",
    "assert candidate(s = \"((()))((()))\") == 12",
    "assert candidate(s = \"((()()(()())))()()\") == 18",
    "assert candidate(s = \"()(()(()(()(()(()(()(()))))))))))))()(()(()(()))()()()()()()()()\") == 30",
    "assert candidate(s = \"(()((())((()))(((())))))\") == 24",
    "assert candidate(s = \"()()()()()()()()()()\") == 20",
    "assert candidate(s = \"((((((((()))))))(()(()(()(()(()(()(()))))))))()()\") == 48",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(())))))()))))))))\") == 46",
    "assert candidate(s = \"(()(()(()(()(()(()()))))))\") == 26",
    "assert candidate(s = \"(()(()(()(()(()(()))))))\") == 24",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()()))))))))))()())\") == 50",
    "assert candidate(s = \"()(()(()(()(()(())))))\") == 22",
    "assert candidate(s = \"(((()(()))(()(()))))\") == 20",
    "assert candidate(s = \"()((((()))))()(()(()))\") == 22",
    "assert candidate(s = \"(()((((()))))))()()\") == 14",
    "assert candidate(s = \"((((()))))(()(()))\") == 18",
    "assert candidate(s = \"(()(()(()(()(()(()))))())()()\") == 28",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(()(()(()(()(()))()))))))))))))))))))\") == 54",
    "assert candidate(s = \"(()(()(()(()(()(()(()))))))))))))()(()(()(()))\") == 28",
    "assert candidate(s = \"(()(()(()))(()(())))\") == 20",
    "assert candidate(s = \"(()(()))(()(()))\") == 16",
    "assert candidate(s = \"(((()()(()())()(()(())))))()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()()\") == 126",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(())))))))))\") == 36",
    "assert candidate(s = \"(()(()))()(()())\") == 16",
    "assert candidate(s = \"()((((((((())))))))))()()\") == 20",
    "assert candidate(s = \"()(()(()(()(()(()(())))))()()()\") == 28",
    "assert candidate(s = \"(()(()(()(()(()(()(()()))))))))\") == 30",
    "assert candidate(s = \"((())())(()(()(()())))\") == 22",
    "assert candidate(s = \"((()))((()))((()))((()))\") == 24",
    "assert candidate(s = \"((()))()((()))()((()))\") == 22",
    "assert candidate(s = \"(()(()(()(()(()(()(()))))))))))))()\") == 28",
    "assert candidate(s = \"(()(())((())))\") == 14",
    "assert candidate(s = \"((((((((()))))))))))))))\") == 18",
    "assert candidate(s = \"(()(()(()(()(()(()(())))))))\") == 28",
    "assert candidate(s = \"(()(()(()(()(()(()(()))))))())\") == 30",
    "assert candidate(s = \"()()(()(()(()(()()))))\") == 22",
    "assert candidate(s = \"()(()))(()(()))\") == 8",
    "assert candidate(s = \"(()(()(()(()(()(()(()(())))))())))\") == 34",
    "assert candidate(s = \"(()(()(()(()(()(()(()(()(()))))))))))))()(()(()(()))()()()()()()()()(()(()(())))\") == 38",
    "assert candidate(s = \"()(()(()(()(()(()(()(())))))))\") == 30",
    "assert candidate(s = \"(()()(()))((())())\") == 18",
    "assert candidate(s = \"(((((())))))(((()(()))(()))(()(()))(()(()))(()(()))(()(())))\") == 60",
    "assert candidate(s = \"(()(()(()(()(()(()(())))))())()()()\") == 34",
    "assert candidate(s = \"()(()(()(()(()(())))))()()\") == 26",
    "assert candidate(s = \"((()))(()(()))\") == 14",
    "assert candidate(s = \"())(()())(()(()()(())))\") == 20",
    "assert candidate(s = \"((())())(()(()(()(()))))\") == 24",
    "assert candidate(s = \"(((()))(()))(()())\") == 18",
    "assert candidate(s = \"((())())(()(()))\") == 16",
    "assert candidate(s = \"(()(()))(()(()))(()(()))\") == 24",
    "assert candidate(s = \"(()(()(())))()()()(()(()))\") == 26",
    "assert candidate(s = \"()()()()()()()()()()()()\") == 24",
    "assert candidate(s = \"(((((()(()))(()(())))))())\") == 26",
    "assert candidate(s = \"()(()(()(()(()(()(()(()))))))))\") == 30",
    "assert candidate(s = \"((())((()))(()(()))(()))\") == 24",
    "assert candidate(s = \"()(()()(()(()())))\") == 18",
    "assert candidate(s = \"((()(()())))()((()(())))\") == 24",
    "assert candidate(s = \"((((()))()()()(()))\") == 18",
    "assert candidate(s = \"((((((()))))))(()(()(())))\") == 26",
    "assert candidate(s = \"(((()(()(()(()())))))()())\") == 26",
    "assert candidate(s = \"()(()(()(()(()(()(())))))\") == 22",
    "assert candidate(s = \"()()()()()()()()()()()()()()()()()()()()\") == 40",
    "assert candidate(s = \"()()()()()()()()()()()()()()()\") == 30",
    "assert candidate(s = \"((((((()))))))(()(()(()(()))))\") == 30",
    "assert candidate(s = \"(()())(())(()(()(()(())))())\") == 28"
  ]
}