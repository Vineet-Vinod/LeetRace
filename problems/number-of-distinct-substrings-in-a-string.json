{
  "id": "number-of-distinct-substrings-in-a-string",
  "title": "Number Of Distinct Substrings In A String",
  "difficulty": "Medium",
  "tags": [
    "Trie",
    "String",
    "Suffix Array",
    "Hash Function",
    "Rolling Hash"
  ],
  "description": "Given a string s, return the number of distinct substrings of\u00a0s.\nA substring of a string is obtained by deleting any number of characters (possibly zero) from the front of the string and any number (possibly zero) from the back of the string.\n\u00a0\nExample 1:\n\nInput: s = \"aabbaba\"\nOutput: 21\nExplanation: The set of distinct strings is [\"a\",\"b\",\"aa\",\"bb\",\"ab\",\"ba\",\"aab\",\"abb\",\"bab\",\"bba\",\"aba\",\"aabb\",\"abba\",\"bbab\",\"baba\",\"aabba\",\"abbab\",\"bbaba\",\"aabbab\",\"abbaba\",\"aabbaba\"]\n\nExample 2:\n\nInput: s = \"abcdefg\"\nOutput: 28\n\n\u00a0\nConstraints:\n\n1 <= s.length <= 500\ns consists of lowercase English letters.\n\n\u00a0\nFollow up: Can you solve this problem in O(n) time complexity?",
  "entry_point": "Solution().countDistinct",
  "starter_code": "class Solution:\n    def countDistinct(self, s: str) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"aaaabbbb\") == 24\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 351\n    assert candidate(s = \"abac\") == 9\n    assert candidate(s = \"abababab\") == 15\n    assert candidate(s = \"aaaaa\") == 5\n    assert candidate(s = \"a\") == 1\n    assert candidate(s = \"pwwkew\") == 19\n    assert candidate(s = \"abcabcabc\") == 24\n    assert candidate(s = \"p\") == 1\n    assert candidate(s = \"abracadabra\") == 54\n    assert candidate(s = \"ab\") == 3\n    assert candidate(s = \"aa\") == 2\n    assert candidate(s = \"xyxyxyxyxy\") == 19\n    assert candidate(s = \"aaa\") == 3\n    assert candidate(s = \"abcde\") == 15\n    assert candidate(s = \"xyz\") == 6\n    assert candidate(s = \"xyzxyzxyz\") == 24\n    assert candidate(s = \"banana\") == 15\n    assert candidate(s = \"abc\") == 6\n    assert candidate(s = \"aabbaba\") == 21\n    assert candidate(s = \"abcd\") == 10\n    assert candidate(s = \"aaaa\") == 4\n    assert candidate(s = \"mississippi\") == 53\n    assert candidate(s = \"z\") == 1\n    assert candidate(s = \"abacaba\") == 21\n    assert candidate(s = \"abcdefg\") == 28\n    assert candidate(s = \"aaaabbbbccccdddd\") == 112\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzz\") == 1760\n    assert candidate(s = \"lkseropqwertyuiopasdfghjklzxcvbnmlkser\") == 717\n    assert candidate(s = \"longerstringwithmultiplesubstringsubstring\") == 824\n    assert candidate(s = \"elephantmanelephant\") == 150\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 200\n    assert candidate(s = \"abbaabbaabba\") == 40\n    assert candidate(s = \"longstringwithrepeatedsubstringsubstring\") == 742\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 44\n    assert candidate(s = \"abacabacabac\") == 41\n    assert candidate(s = \"nlpnlplpnlplp\") == 57\n    assert candidate(s = \"abcdefghijlkmnopqrstuvwxyzzyxwvutsrqponmlkjihgfedcba\") == 1351\n    assert candidate(s = \"aaaaabaaaabbbaabababab\") == 193\n    assert candidate(s = \"zzyzxzyzyxzyz\") == 71\n    assert candidate(s = \"hellohellogoodbyegoodbye\") == 253\n    assert candidate(s = \"xyxxxyxyxyxyxyxyxyxyxyxyxy\") == 133\n    assert candidate(s = \"abacabadabacaba\") == 85\n    assert candidate(s = \"xyzyzyzyxzyzyzy\") == 83\n    assert candidate(s = \"abcabcabcabc\") == 33\n    assert candidate(s = \"xyzyxzyzyxzyzyxzyzyx\") == 101\n    assert candidate(s = \"ababababab\") == 19\n    assert candidate(s = \"ababaabababaababa\") == 83\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzz\") == 20\n    assert candidate(s = \"thelongeststringwithdistinctsubstringstothetestthesolution\") == 1634\n    assert candidate(s = \"nndbymxkbmsnnvkze\") == 146\n    assert candidate(s = \"abcdabcd\") == 26\n    assert candidate(s = \"aaaaaaaaaa\") == 10\n    assert candidate(s = \"qwertyuiopasdfghjklzxcvbnm\") == 351\n    assert candidate(s = \"racecar\") == 25\n    assert candidate(s = \"aaaaaaaaaab\") == 21\n    assert candidate(s = \"zxyxzyzxzyxzyxzy\") == 101\n    assert candidate(s = \"abcdefghijabcdefghij\") == 155\n    assert candidate(s = \"aaaaaabbbaaaaab\") == 81\n    assert candidate(s = \"repeatedsubstringsubstring\") == 301\n    assert candidate(s = \"aaaaaa\") == 6\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 1027\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 54\n    assert candidate(s = \"noon\") == 8\n    assert candidate(s = \"noonnoonnoonnoonnoonnoonnoonnoon\") == 120\n    assert candidate(s = \"abcdabcdabcd\") == 42\n    assert candidate(s = \"aaaabbbbcccc\") == 60\n    assert candidate(s = \"pneumonoultramicroscopicsilicovolcanoconiosis\") == 996\n    assert candidate(s = \"abcabcabcabcabcabc\") == 51\n    assert candidate(s = \"hellohello\") == 39\n    assert candidate(s = \"aaaaabbbbbaaaa\") == 75\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 1077\n    assert candidate(s = \"aaaaabbbbbccccdddd\") == 139\n    assert candidate(s = \"thisisaverylongstringthatincludesmanyrepeatedsubstringstomakethetestmoreinteresting\") == 3379\n    assert candidate(s = \"abcdefghij\") == 55\n    assert candidate(s = \"madamimadam\") == 49\n    assert candidate(s = \"repeatedpatternrepeatedpattern\") == 335\n    assert candidate(s = \"aabbaabbbaaaabbbbaabbbaaabbaabbbaaaabbbbaabbbaaabbaabbbaaaabbbb\") == 1102\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 1352\n    assert candidate(s = \"thisisaverylongstringwithmanysubstrings\") == 738\n    assert candidate(s = \"abcabcabcabcabc\") == 42\n    assert candidate(s = \"abcdabcdabcdabcd\") == 58\n    assert candidate(s = \"aaaaaaa\") == 7\n    assert candidate(s = \"thisisaverylongstringwithsomerepeatedpatterns\") == 1000\n",
  "test_cases": [
    "assert candidate(s = \"aaaabbbb\") == 24",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 351",
    "assert candidate(s = \"abac\") == 9",
    "assert candidate(s = \"abababab\") == 15",
    "assert candidate(s = \"aaaaa\") == 5",
    "assert candidate(s = \"a\") == 1",
    "assert candidate(s = \"pwwkew\") == 19",
    "assert candidate(s = \"abcabcabc\") == 24",
    "assert candidate(s = \"p\") == 1",
    "assert candidate(s = \"abracadabra\") == 54",
    "assert candidate(s = \"ab\") == 3",
    "assert candidate(s = \"aa\") == 2",
    "assert candidate(s = \"xyxyxyxyxy\") == 19",
    "assert candidate(s = \"aaa\") == 3",
    "assert candidate(s = \"abcde\") == 15",
    "assert candidate(s = \"xyz\") == 6",
    "assert candidate(s = \"xyzxyzxyz\") == 24",
    "assert candidate(s = \"banana\") == 15",
    "assert candidate(s = \"abc\") == 6",
    "assert candidate(s = \"aabbaba\") == 21",
    "assert candidate(s = \"abcd\") == 10",
    "assert candidate(s = \"aaaa\") == 4",
    "assert candidate(s = \"mississippi\") == 53",
    "assert candidate(s = \"z\") == 1",
    "assert candidate(s = \"abacaba\") == 21",
    "assert candidate(s = \"abcdefg\") == 28",
    "assert candidate(s = \"aaaabbbbccccdddd\") == 112",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzz\") == 1760",
    "assert candidate(s = \"lkseropqwertyuiopasdfghjklzxcvbnmlkser\") == 717",
    "assert candidate(s = \"longerstringwithmultiplesubstringsubstring\") == 824",
    "assert candidate(s = \"elephantmanelephant\") == 150",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 200",
    "assert candidate(s = \"abbaabbaabba\") == 40",
    "assert candidate(s = \"longstringwithrepeatedsubstringsubstring\") == 742",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 44",
    "assert candidate(s = \"abacabacabac\") == 41",
    "assert candidate(s = \"nlpnlplpnlplp\") == 57",
    "assert candidate(s = \"abcdefghijlkmnopqrstuvwxyzzyxwvutsrqponmlkjihgfedcba\") == 1351",
    "assert candidate(s = \"aaaaabaaaabbbaabababab\") == 193",
    "assert candidate(s = \"zzyzxzyzyxzyz\") == 71",
    "assert candidate(s = \"hellohellogoodbyegoodbye\") == 253",
    "assert candidate(s = \"xyxxxyxyxyxyxyxyxyxyxyxyxy\") == 133",
    "assert candidate(s = \"abacabadabacaba\") == 85",
    "assert candidate(s = \"xyzyzyzyxzyzyzy\") == 83",
    "assert candidate(s = \"abcabcabcabc\") == 33",
    "assert candidate(s = \"xyzyxzyzyxzyzyxzyzyx\") == 101",
    "assert candidate(s = \"ababababab\") == 19",
    "assert candidate(s = \"ababaabababaababa\") == 83",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzz\") == 20",
    "assert candidate(s = \"thelongeststringwithdistinctsubstringstothetestthesolution\") == 1634",
    "assert candidate(s = \"nndbymxkbmsnnvkze\") == 146",
    "assert candidate(s = \"abcdabcd\") == 26",
    "assert candidate(s = \"aaaaaaaaaa\") == 10",
    "assert candidate(s = \"qwertyuiopasdfghjklzxcvbnm\") == 351",
    "assert candidate(s = \"racecar\") == 25",
    "assert candidate(s = \"aaaaaaaaaab\") == 21",
    "assert candidate(s = \"zxyxzyzxzyxzyxzy\") == 101",
    "assert candidate(s = \"abcdefghijabcdefghij\") == 155",
    "assert candidate(s = \"aaaaaabbbaaaaab\") == 81",
    "assert candidate(s = \"repeatedsubstringsubstring\") == 301",
    "assert candidate(s = \"aaaaaa\") == 6",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 1027",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 54",
    "assert candidate(s = \"noon\") == 8",
    "assert candidate(s = \"noonnoonnoonnoonnoonnoonnoonnoon\") == 120",
    "assert candidate(s = \"abcdabcdabcd\") == 42",
    "assert candidate(s = \"aaaabbbbcccc\") == 60",
    "assert candidate(s = \"pneumonoultramicroscopicsilicovolcanoconiosis\") == 996",
    "assert candidate(s = \"abcabcabcabcabcabc\") == 51",
    "assert candidate(s = \"hellohello\") == 39",
    "assert candidate(s = \"aaaaabbbbbaaaa\") == 75",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 1077",
    "assert candidate(s = \"aaaaabbbbbccccdddd\") == 139",
    "assert candidate(s = \"thisisaverylongstringthatincludesmanyrepeatedsubstringstomakethetestmoreinteresting\") == 3379",
    "assert candidate(s = \"abcdefghij\") == 55",
    "assert candidate(s = \"madamimadam\") == 49",
    "assert candidate(s = \"repeatedpatternrepeatedpattern\") == 335",
    "assert candidate(s = \"aabbaabbbaaaabbbbaabbbaaabbaabbbaaaabbbbaabbbaaabbaabbbaaaabbbb\") == 1102",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 1352",
    "assert candidate(s = \"thisisaverylongstringwithmanysubstrings\") == 738",
    "assert candidate(s = \"abcabcabcabcabc\") == 42",
    "assert candidate(s = \"abcdabcdabcdabcd\") == 58",
    "assert candidate(s = \"aaaaaaa\") == 7",
    "assert candidate(s = \"thisisaverylongstringwithsomerepeatedpatterns\") == 1000"
  ]
}