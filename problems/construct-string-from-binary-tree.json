{
  "id": "construct-string-from-binary-tree",
  "title": "Construct String From Binary Tree",
  "difficulty": "Medium",
  "tags": [
    "Tree",
    "Depth-First Search",
    "String",
    "Binary Tree"
  ],
  "description": "Given the root node of a binary tree, your task is to create a string representation of the tree following a specific set of formatting rules. The representation should be based on a preorder traversal of the binary tree and must adhere to the following guidelines:\n\n\nNode Representation: Each node in the tree should be represented by its integer value.\n\n\nParentheses for Children: If a node has at least one child (either left or right), its children should be represented inside parentheses. Specifically:\n\nIf a node has a left child, the value of the left child should be enclosed in parentheses immediately following the node's value.\nIf a node has a right child, the value of the right child should also be enclosed in parentheses. The parentheses for the right child should follow those of the left child.\n\n\n\nOmitting Empty Parentheses: Any empty parentheses pairs (i.e., ()) should be omitted from the final string representation of the tree, with one specific exception: when a node has a right child but no left child. In such cases, you must include an empty pair of parentheses to indicate the absence of the left child. This ensures that the one-to-one mapping between the string representation and the original binary tree structure is maintained.\nIn summary, empty parentheses pairs should be omitted when a node has only a left child or no children. However, when a node has a right child but no left child, an empty pair of parentheses must precede the representation of the right child to reflect the tree's structure accurately.\n\n\n\u00a0\nExample 1:\n\n\nInput: root = [1,2,3,4]\nOutput: \"1(2(4))(3)\"\nExplanation: Originally, it needs to be \"1(2(4)())(3()())\", but you need to omit all the empty parenthesis pairs. And it will be \"1(2(4))(3)\".\n\nExample 2:\n\n\nInput: root = [1,2,3,null,4]\nOutput: \"1(2()(4))(3)\"\nExplanation: Almost the same as the first example, except the () after 2 is necessary to indicate the absence of a left child for 2 and the presence of a right child.\n\n\u00a0\nConstraints:\n\nThe number of nodes in the tree is in the range [1, 104].\n-1000 <= Node.val <= 1000\n\n",
  "entry_point": "Solution().tree2str",
  "starter_code": "# Definition for a binary tree node.\n# class TreeNode:\n#     def __init__(self, val=0, left=None, right=None):\n#         self.val = val\n#         self.left = left\n#         self.right = right\nclass Solution:\n    def tree2str(self, root: Optional[TreeNode]) -> str:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7])) == \"1(2(4)(5))(3(6)(7))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5])) == \"1()(2()(3()(4()(5))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 6, 7])) == \"1(2)(3(6)(7))\"\n    assert candidate(root = tree_node([1, 2, 3, 4])) == \"1(2(4))(3)\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4])) == \"1(2()(4))(3)\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 7])) == \"1(2(4)(5))(3()(7))\"\n    assert candidate(root = tree_node([1, 2])) == \"1(2)\"\n    assert candidate(root = tree_node([1, None, 2])) == \"1()(2)\"\n    assert candidate(root = tree_node([1, 2, None, 3])) == \"1(2(3))\"\n    assert candidate(root = tree_node([1])) == \"1\"\n    assert candidate(root = tree_node([1, None, 2, None, 3])) == \"1()(2()(3))\"\n    assert candidate(root = tree_node([3, 1, 4, None, None, 2])) == \"3(1)(4(2))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10)))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, None, 7, 8, 9, None, None, 10, None, 11, 12, 13, None, 14, 15, None, None, None, None, None, 16, 17, 18, 19])) == \"1(2(4()(7(10(14(17)(18))(15(19))))))(3(5(8(11)(12))(9(13()(16))))(6))\"\n    assert candidate(root = tree_node([10, 5, 15, None, None, 6, 20])) == \"10(5)(15(6)(20))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13, None, None, None, None, None, 14, 15, None, None, 16, 17, 18, 19])) == \"1(2)(3(4)(5(6)(7(8)(9(10)(11(12)(13))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, 11, 12])) == \"1(2(4(6(8(10)(11)))))(3(5(7(9(12)))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, 6, None, None, 7, 8, 9, 10])) == \"1(2()(4))(3(5(7)(8))(6(9)(10)))\"\n    assert candidate(root = tree_node([1, None, 2, None, None, 3, None, 4, None, None, 5])) == \"1()(2)\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, None, 6, None, None, 7, None, None, 8, None, 9])) == \"1(2()(4))(3()(5(6()(7))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, 7, None, None, None, None, 8])) == \"1(2(4(7)))(3(5)(6()(8)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, 8, 9, None, None, 10, None, 11, None, None, 12])) == \"1(2(4)(5(8(11))(9()(12))))(3(6)(7(10)))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10()(11()(12()(13()(14()(15))))))))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, None, 7])) == \"1(2()(4(6)))(3(5(7)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, None, 7, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2(4(6(9()(12)))))(3()(5(7()(10(13)))(8(11))))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8])) == \"1()(2()(3()(4()(5()(6()(7()(8)))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, None, 13, None, None, 14, None, 15, None, 16])) == \"1(2(4(8(14))(9(15)))(5(10(16))(11)))(3(6()(13))(7))\"\n    assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1()(2(3(4(5(6(7(8(9))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15, None, 16])) == \"1(2()(4()(6()(8()(10()(12()(14()(16))))))))(3()(5()(7()(9()(11()(13()(15)))))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8])) == \"1(2(3(4(5(6(7(8)))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, None, None, None, 6])) == \"1(2(4))(3(5))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9])) == \"1(2)(3(4)(5(6)(7(8)(9))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, 4, None, 5, None, 6, None, 7, 8, 9])) == \"1(2(3()(5()(7)))(4()(6(8)(9))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, 7, None, None, None, 8, 9, 10, None, None, None, None, None, 11, 12, None, None, 13, 14, 15])) == \"1(2(4(6()(8))(7(9)(10()(11(12()(13(14)(15))))))))(3()(5))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, None, 15, None, None, 16])) == \"1(2(4(8(15))(9()(16)))(5(10)(11)))(3(6(12)(13))(7(14)))\"\n    assert candidate(root = tree_node([1, None, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14])) == \"1()(2(3(5(9)(10))(6(11)(12)))(4(7(13)(14))(8)))\"\n    assert candidate(root = tree_node([1, None, 2, None, None, None, 3, None, None, None, 4, None, None, None, 5])) == \"1()(2)\"\n    assert candidate(root = tree_node([5, 2, 3, None, None, 1, 6, None, None, None, 8])) == \"5(2)(3(1)(6()(8)))\"\n    assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, 6, None, 7, 8, None, 9, 10])) == \"1()(2(3(4(5()(7(9)(10)))(6(8)))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1(2(3(4(5(6(7(8(9(10(11))))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, None, 7, None, None, 8, 9])) == \"1(2(4()(7)))(3(5)(6(8)(9)))\"\n    assert candidate(root = tree_node([1, None, 2, 3, None, 4, 5, 6, None, None, 7, 8, None, 9, None, 10])) == \"1()(2(3(4(6(8(10))))(5()(7(9)))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, 6, None, None, 7, None, 8, None, 9])) == \"1(2(4()(6(7(8(9))))))(3()(5))\"\n    assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(3)(4(5(6(7(8(9(10))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, None, 7, 8, None, 9, 10, 11])) == \"1(2()(4(6()(9))))(3(5(7(10)(11))(8)))\"\n    assert candidate(root = tree_node([1, None, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10])) == \"1()(2)\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, None, None, 6, 7, None, 8, None, 9])) == \"1(2(4))(3(5()(6(7(8(9))))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7])) == \"1(2(3)(4(5(6(7)))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1(2(4(6(8))))(3(5(7(9))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4(7(9))))(3(6(8(10))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, 7, None, 8, 9, 10, None, None, 11, 12, None, 13, 14, None, None, 15, 16, 17, 18, 19, None, 20, 21, 22, 23, None, None, 24, 25])) == \"1(2()(4(6(9()(13(18(25))(19)))(10(14()(20))))(7)))(3(5()(8(11()(15(21)(22)))(12(16(23))(17()(24))))))\"\n    assert candidate(root = tree_node([1, None, 2, 3, 4, None, 5, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1()(2(3()(5(7(9(11(13(15)))))))(4(6(8(10(12(14)))))))\"\n    assert candidate(root = tree_node([20, 10, 30, 5, 15, None, None, 3, 7, None, 12, None, None, None, None, 6, 9])) == \"20(10(5(3)(7))(15()(12(6)(9))))(30)\"\n    assert candidate(root = tree_node([0, -1, 1, -2, 2, -3, 3, -4, 4])) == \"0(-1(-2(-4)(4))(2))(1(-3)(3))\"\n    assert candidate(root = tree_node([5, 3, 7, 2, 4, 6, 8, 1, None, None, None, None, None, 9, 10])) == \"5(3(2(1))(4))(7(6)(8(9)(10)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, 6, None, 7, 8, None, 9, None, 10, None, 11, None, 12, None, 13])) == \"1(2()(4(6()(9()(12)))))(3()(5(7()(10()(13)))(8()(11))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, None, 7, 8, None, 9, None, 10])) == \"1(2(4(6()(9))))(3()(5(7()(10))(8)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, 6, 7, 8, 9, None, None, 10, 11])) == \"1(2)(3(4(6)(7(10)(11)))(5(8)(9)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, 7, 8, 9, 10, 11, None, None, None, None, None, None, 12, 13, 14, 15])) == \"1(2()(4()(6(9)(10()(12(15))))))(3(5(7(11(13)(14)))(8)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5])) == \"1(2)(3(4)(5))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2)(3(4)(5(6)(7(8)(9(10)(11(12)(13))))))\"\n    assert candidate(root = tree_node([1, -2, 3, 4, None, -5, None, 6, None, 7])) == \"1(-2(4(6)))(3(-5(7)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, None, None, 14, None, 16, 17, 18, 19, None, None, 22, 23, None, 25, None, 27])) == \"1(2(4(8(16(22)(23))(17()(25)))(9(18()(27))(19)))(5))(3(6)(7(14)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15])) == \"1(2(4(8)(9))(5(10)(11)))(3(6(12)(13))(7(14)(15)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, None, None, 6, 7, None, None, None, None, None, 8, 9, None, None, None, None, None, 10, 11, 12, 13, None, None, 14, 15])) == \"1(2)(3(4)(5))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 6, 7, None, None, 10, 11, None, None, 14, 15])) == \"1(2)(3(6)(7(10)(11(14)(15))))\"\n    assert candidate(root = tree_node([1, None, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6])) == \"1()(2)\"\n    assert candidate(root = tree_node([1, None, 2, None, None, 3, 4, None, None, 5, 6, None, None, 7, 8, None, None, 9, 10])) == \"1()(2)\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, None, 5, 6])) == \"1(2()(4(5)(6)))(3)\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4()(7()(10)))(5()(8)))(3()(6()(9)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, 9, None, None, 10])) == \"1(2(4(7(10)))(5(8)(9)))(3()(6))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, None, None, None, None, None, 10, None, None, None, 11, None, None, None, 12, None, None, None, 13])) == \"1(2(4(8()(10()(11)))(9))(5))(3(6)(7))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25])) == \"1(2(4(8(16)(17))(9(18)(19)))(5(10(20)(21))(11(22)(23))))(3(6(12(24)(25))(13))(7(14)(15)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, None, 6, 7, 8, 9, None, 10, None, None, None, None, None, 11, 12, 13, None, None, None, 14, 15])) == \"1(2(4(6()(10(12()(14))(13(15))))(7))(5(8)(9()(11))))(3)\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, 10, 11, None, 12])) == \"1(2(4(8)(9))(5))(3(6(10)(11))(7()(12)))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1(2()(4()(6()(8()(10()(12()(14)))))))(3()(5()(7()(9()(11()(13()(15)))))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, None, 9])) == \"1(2(4(6(8))))(3(5(7()(9))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, 7, None, 8, 9, None, None, None, 10])) == \"1(2()(4()(6(8()(10))(9))))(3(5(7)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4()(6()(8()(10)))))(3()(5()(7()(9))))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7])) == \"1()(2()(3()(4()(5()(6()(7))))))\"\n    assert candidate(root = tree_node([1, None, 2, 3, None, None, 4, 5, 6, None, None, None, None, 7])) == \"1()(2(3()(4(5)(6))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, 6, 7, 8, None, None, 9, None, 10, None, 11])) == \"1(2(4()(6)))(3(5(7(9(11)))(8(10))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, 8, 9, 10, 11, 12, 13])) == \"1(2(4)(5(8)(9)))(3(6(10)(11))(7(12)(13)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, 10, None, None, 11, None, 12])) == \"1(2(4(8(12))(9))(5()(10)))(3(6)(7(11)))\"\n    assert candidate(root = tree_node([1, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10])) == \"1(2()(3))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, 7, None, 8, 9, None, None, 10, None, 11, 12])) == \"1(2(4(7(10))))(3(5(8(11)(12))(9))(6))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2(4(6(8(10(12)(13))(11))(9))(7))(5))(3)\"\n    assert candidate(root = tree_node([1, 2, 3, None, 5, 6, 7, None, None, 8, 9, 10, 11, None, None, None, None, 12])) == \"1(2()(5))(3(6(8)(9))(7(10(12))(11)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, None, 9])) == \"1(2(4(7))(5(8)))(3()(6(9)))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, None, None, None, None, None, None, 8])) == \"1(2(4)(5))(3(6)(7))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, 9])) == \"1(2(4(7))(5(8)(9)))(3()(6))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2()(4()(6()(8()(10)))))(3()(5()(7()(9))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12])) == \"1(2(3(4(5(6(7(8(9(10(11(12)))))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10, None, None, 11, None, None, 12])) == \"1(2()(4()(6(7()(8)))))(3(5))\"\n    assert candidate(root = tree_node([1, None, 2, 3, 4, None, 5, 6, None, 7, None, None, 8, 9, 10, None, None, None, None, 11])) == \"1()(2(3()(5(7(9)(10(11)))))(4(6()(8))))\"\n    assert candidate(root = tree_node([1, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6])) == \"1(2()(3))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11])) == \"1(2(4))(3()(5(6)(7(8)(9(10)(11)))))\"\n    assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, 8, 9, None, None, None, None, 10])) == \"1(2(4()(8))(5(9)))(3(6)(7()(10)))\"\n    assert candidate(root = tree_node([3, 1, 2, 6, None, None, 4, 5])) == \"3(1(6(5)))(2()(4))\"\n    assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1(2(3(4(5(6(7(8(9))))))))\"\n    assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10()(11))))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, 6, None, 7, 8, 9, None, None, 10, None, None, 11, 12, None, None, 13, 14])) == \"1(2)(3(4(6(9(11(13)(14))(12))))(5(7()(10))(8)))\"\n    assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(3(4(5(6(7(8(9(10)))))))))\"\n    assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7])) == \"1(2()(4()(6)))(3()(5()(7)))\"\n    assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13, None, None, 14, 15])) == \"1(2(3)(4(5(7(9(11(13(15))))))(6()(8()(10()(12()(14)))))))\"\n    assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, None, 6, None, 7])) == \"1()(2(3(4(5(6(7))))))\"\n    assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1(2(3)(4(5(6(7(8(9(10(11)))))))))\"\n",
  "test_cases": [
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7])) == \"1(2(4)(5))(3(6)(7))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5])) == \"1()(2()(3()(4()(5))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 6, 7])) == \"1(2)(3(6)(7))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4])) == \"1(2(4))(3)\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4])) == \"1(2()(4))(3)\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 7])) == \"1(2(4)(5))(3()(7))\"",
    "assert candidate(root = tree_node([1, 2])) == \"1(2)\"",
    "assert candidate(root = tree_node([1, None, 2])) == \"1()(2)\"",
    "assert candidate(root = tree_node([1, 2, None, 3])) == \"1(2(3))\"",
    "assert candidate(root = tree_node([1])) == \"1\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3])) == \"1()(2()(3))\"",
    "assert candidate(root = tree_node([3, 1, 4, None, None, 2])) == \"3(1)(4(2))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10)))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, None, 7, 8, 9, None, None, 10, None, 11, 12, 13, None, 14, 15, None, None, None, None, None, 16, 17, 18, 19])) == \"1(2(4()(7(10(14(17)(18))(15(19))))))(3(5(8(11)(12))(9(13()(16))))(6))\"",
    "assert candidate(root = tree_node([10, 5, 15, None, None, 6, 20])) == \"10(5)(15(6)(20))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13, None, None, None, None, None, 14, 15, None, None, 16, 17, 18, 19])) == \"1(2)(3(4)(5(6)(7(8)(9(10)(11(12)(13))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, 11, 12])) == \"1(2(4(6(8(10)(11)))))(3(5(7(9(12)))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, 6, None, None, 7, 8, 9, 10])) == \"1(2()(4))(3(5(7)(8))(6(9)(10)))\"",
    "assert candidate(root = tree_node([1, None, 2, None, None, 3, None, 4, None, None, 5])) == \"1()(2)\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, None, 6, None, None, 7, None, None, 8, None, 9])) == \"1(2()(4))(3()(5(6()(7))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, 7, None, None, None, None, 8])) == \"1(2(4(7)))(3(5)(6()(8)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, 8, 9, None, None, 10, None, 11, None, None, 12])) == \"1(2(4)(5(8(11))(9()(12))))(3(6)(7(10)))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10()(11()(12()(13()(14()(15))))))))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, None, 7])) == \"1(2()(4(6)))(3(5(7)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, None, 7, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2(4(6(9()(12)))))(3()(5(7()(10(13)))(8(11))))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8])) == \"1()(2()(3()(4()(5()(6()(7()(8)))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, None, 13, None, None, 14, None, 15, None, 16])) == \"1(2(4(8(14))(9(15)))(5(10(16))(11)))(3(6()(13))(7))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1()(2(3(4(5(6(7(8(9))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15, None, 16])) == \"1(2()(4()(6()(8()(10()(12()(14()(16))))))))(3()(5()(7()(9()(11()(13()(15)))))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8])) == \"1(2(3(4(5(6(7(8)))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, None, None, None, 6])) == \"1(2(4))(3(5))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9])) == \"1(2)(3(4)(5(6)(7(8)(9))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, 4, None, 5, None, 6, None, 7, 8, 9])) == \"1(2(3()(5()(7)))(4()(6(8)(9))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, 7, None, None, None, 8, 9, 10, None, None, None, None, None, 11, 12, None, None, 13, 14, 15])) == \"1(2(4(6()(8))(7(9)(10()(11(12()(13(14)(15))))))))(3()(5))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, None, 15, None, None, 16])) == \"1(2(4(8(15))(9()(16)))(5(10)(11)))(3(6(12)(13))(7(14)))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14])) == \"1()(2(3(5(9)(10))(6(11)(12)))(4(7(13)(14))(8)))\"",
    "assert candidate(root = tree_node([1, None, 2, None, None, None, 3, None, None, None, 4, None, None, None, 5])) == \"1()(2)\"",
    "assert candidate(root = tree_node([5, 2, 3, None, None, 1, 6, None, None, None, 8])) == \"5(2)(3(1)(6()(8)))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, 6, None, 7, 8, None, 9, 10])) == \"1()(2(3(4(5()(7(9)(10)))(6(8)))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1(2(3(4(5(6(7(8(9(10(11))))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, None, 7, None, None, 8, 9])) == \"1(2(4()(7)))(3(5)(6(8)(9)))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, None, 4, 5, 6, None, None, 7, 8, None, 9, None, 10])) == \"1()(2(3(4(6(8(10))))(5()(7(9)))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, 6, None, None, 7, None, 8, None, 9])) == \"1(2(4()(6(7(8(9))))))(3()(5))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(3)(4(5(6(7(8(9(10))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, None, 7, 8, None, 9, 10, 11])) == \"1(2()(4(6()(9))))(3(5(7(10)(11))(8)))\"",
    "assert candidate(root = tree_node([1, None, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10])) == \"1()(2)\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, None, None, 6, 7, None, 8, None, 9])) == \"1(2(4))(3(5()(6(7(8(9))))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7])) == \"1(2(3)(4(5(6(7)))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1(2(4(6(8))))(3(5(7(9))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4(7(9))))(3(6(8(10))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, 6, 7, None, 8, 9, 10, None, None, 11, 12, None, 13, 14, None, None, 15, 16, 17, 18, 19, None, 20, 21, 22, 23, None, None, 24, 25])) == \"1(2()(4(6(9()(13(18(25))(19)))(10(14()(20))))(7)))(3(5()(8(11()(15(21)(22)))(12(16(23))(17()(24))))))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, 4, None, 5, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1()(2(3()(5(7(9(11(13(15)))))))(4(6(8(10(12(14)))))))\"",
    "assert candidate(root = tree_node([20, 10, 30, 5, 15, None, None, 3, 7, None, 12, None, None, None, None, 6, 9])) == \"20(10(5(3)(7))(15()(12(6)(9))))(30)\"",
    "assert candidate(root = tree_node([0, -1, 1, -2, 2, -3, 3, -4, 4])) == \"0(-1(-2(-4)(4))(2))(1(-3)(3))\"",
    "assert candidate(root = tree_node([5, 3, 7, 2, 4, 6, 8, 1, None, None, None, None, None, 9, 10])) == \"5(3(2(1))(4))(7(6)(8(9)(10)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, 6, None, 7, 8, None, 9, None, 10, None, 11, None, 12, None, 13])) == \"1(2()(4(6()(9()(12)))))(3()(5(7()(10()(13)))(8()(11))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, 6, None, 7, 8, None, 9, None, 10])) == \"1(2(4(6()(9))))(3()(5(7()(10))(8)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, 6, 7, 8, 9, None, None, 10, 11])) == \"1(2)(3(4(6)(7(10)(11)))(5(8)(9)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, 7, 8, 9, 10, 11, None, None, None, None, None, None, 12, 13, 14, 15])) == \"1(2()(4()(6(9)(10()(12(15))))))(3(5(7(11(13)(14)))(8)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5])) == \"1(2)(3(4)(5))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2)(3(4)(5(6)(7(8)(9(10)(11(12)(13))))))\"",
    "assert candidate(root = tree_node([1, -2, 3, 4, None, -5, None, 6, None, 7])) == \"1(-2(4(6)))(3(-5(7)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, None, None, 14, None, 16, 17, 18, 19, None, None, 22, 23, None, 25, None, 27])) == \"1(2(4(8(16(22)(23))(17()(25)))(9(18()(27))(19)))(5))(3(6)(7(14)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15])) == \"1(2(4(8)(9))(5(10)(11)))(3(6(12)(13))(7(14)(15)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, None, None, None, None, 6, 7, None, None, None, None, None, 8, 9, None, None, None, None, None, 10, 11, 12, 13, None, None, 14, 15])) == \"1(2)(3(4)(5))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 6, 7, None, None, 10, 11, None, None, 14, 15])) == \"1(2)(3(6)(7(10)(11(14)(15))))\"",
    "assert candidate(root = tree_node([1, None, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6])) == \"1()(2)\"",
    "assert candidate(root = tree_node([1, None, 2, None, None, 3, 4, None, None, 5, 6, None, None, 7, 8, None, None, 9, 10])) == \"1()(2)\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, None, 5, 6])) == \"1(2()(4(5)(6)))(3)\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4()(7()(10)))(5()(8)))(3()(6()(9)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, 9, None, None, 10])) == \"1(2(4(7(10)))(5(8)(9)))(3()(6))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, None, None, None, None, None, 10, None, None, None, 11, None, None, None, 12, None, None, None, 13])) == \"1(2(4(8()(10()(11)))(9))(5))(3(6)(7))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25])) == \"1(2(4(8(16)(17))(9(18)(19)))(5(10(20)(21))(11(22)(23))))(3(6(12(24)(25))(13))(7(14)(15)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, None, 6, 7, 8, 9, None, 10, None, None, None, None, None, 11, 12, 13, None, None, None, 14, 15])) == \"1(2(4(6()(10(12()(14))(13(15))))(7))(5(8)(9()(11))))(3)\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, None, 10, 11, None, 12])) == \"1(2(4(8)(9))(5))(3(6(10)(11))(7()(12)))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12, None, 13, None, 14, None, 15])) == \"1(2()(4()(6()(8()(10()(12()(14)))))))(3()(5()(7()(9()(11()(13()(15)))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, 6, None, 7, None, 8, None, None, 9])) == \"1(2(4(6(8))))(3(5(7()(9))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, 7, None, 8, 9, None, None, None, 10])) == \"1(2()(4()(6(8()(10))(9))))(3(5(7)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(4()(6()(8()(10)))))(3()(5()(7()(9))))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7])) == \"1()(2()(3()(4()(5()(6()(7))))))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, None, None, 4, 5, 6, None, None, None, None, 7])) == \"1()(2(3()(4(5)(6))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, None, None, 6, 7, 8, None, None, 9, None, 10, None, 11])) == \"1(2(4()(6)))(3(5(7(9(11)))(8(10))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, 8, 9, 10, 11, 12, 13])) == \"1(2(4)(5(8)(9)))(3(6(10)(11))(7(12)(13)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, 8, 9, None, 10, None, None, 11, None, 12])) == \"1(2(4(8(12))(9))(5()(10)))(3(6)(7(11)))\"",
    "assert candidate(root = tree_node([1, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10])) == \"1(2()(3))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, 5, 6, 7, None, 8, 9, None, None, 10, None, 11, 12])) == \"1(2(4(7(10))))(3(5(8(11)(12))(9))(6))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13])) == \"1(2(4(6(8(10(12)(13))(11))(9))(7))(5))(3)\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 5, 6, 7, None, None, 8, 9, 10, 11, None, None, None, None, 12])) == \"1(2()(5))(3(6(8)(9))(7(10(12))(11)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, None, 9])) == \"1(2(4(7))(5(8)))(3()(6(9)))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, None, None, None, None, None, None, None, 8])) == \"1(2(4)(5))(3(6)(7))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, None, 6, 7, None, 8, 9])) == \"1(2(4(7))(5(8)(9)))(3()(6))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2()(4()(6()(8()(10)))))(3()(5()(7()(9))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11, None, 12])) == \"1(2(3(4(5(6(7(8(9(10(11(12)))))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, 5, None, None, 6, None, None, 7, None, None, 8, None, None, 9, None, None, 10, None, None, 11, None, None, 12])) == \"1(2()(4()(6(7()(8)))))(3(5))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, 4, None, 5, 6, None, 7, None, None, 8, 9, 10, None, None, None, None, 11])) == \"1()(2(3()(5(7(9)(10(11)))))(4(6()(8))))\"",
    "assert candidate(root = tree_node([1, 2, None, None, 3, None, None, 4, None, None, 5, None, None, 6])) == \"1(2()(3))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, None, None, 5, None, None, 6, 7, None, None, 8, 9, None, None, 10, 11])) == \"1(2(4))(3()(5(6)(7(8)(9(10)(11)))))\"",
    "assert candidate(root = tree_node([1, 2, 3, 4, 5, 6, 7, None, 8, 9, None, None, None, None, 10])) == \"1(2(4()(8))(5(9)))(3(6)(7()(10)))\"",
    "assert candidate(root = tree_node([3, 1, 2, 6, None, None, 4, 5])) == \"3(1(6(5)))(2()(4))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9])) == \"1(2(3(4(5(6(7(8(9))))))))\"",
    "assert candidate(root = tree_node([1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1()(2()(3()(4()(5()(6()(7()(8()(9()(10()(11))))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, None, 4, 5, 6, None, 7, 8, 9, None, None, 10, None, None, 11, 12, None, None, 13, 14])) == \"1(2)(3(4(6(9(11(13)(14))(12))))(5(7()(10))(8)))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10])) == \"1(2(3(4(5(6(7(8(9(10)))))))))\"",
    "assert candidate(root = tree_node([1, 2, 3, None, 4, None, 5, None, 6, None, 7])) == \"1(2()(4()(6)))(3()(5()(7)))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, 6, 7, None, None, 8, 9, None, None, 10, 11, None, None, 12, 13, None, None, 14, 15])) == \"1(2(3)(4(5(7(9(11(13(15))))))(6()(8()(10()(12()(14)))))))\"",
    "assert candidate(root = tree_node([1, None, 2, 3, None, 4, None, 5, None, 6, None, 7])) == \"1()(2(3(4(5(6(7))))))\"",
    "assert candidate(root = tree_node([1, 2, None, 3, 4, None, None, 5, None, 6, None, 7, None, 8, None, 9, None, 10, None, 11])) == \"1(2(3)(4(5(6(7(8(9(10(11)))))))))\""
  ]
}