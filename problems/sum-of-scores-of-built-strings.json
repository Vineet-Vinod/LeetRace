{
  "id": "sum-of-scores-of-built-strings",
  "title": "Sum Of Scores Of Built Strings",
  "difficulty": "Hard",
  "tags": [
    "String",
    "Binary Search",
    "String Matching",
    "Suffix Array",
    "Hash Function",
    "Rolling Hash"
  ],
  "description": "You are building a string s of length n one character at a time, prepending each new character to the front of the string. The strings are labeled from 1 to n, where the string with length i is labeled si.\n\nFor example, for s = \"abaca\", s1 == \"a\", s2 == \"ca\", s3 == \"aca\", etc.\n\nThe score of si is the length of the longest common prefix between si and sn (Note that s == sn).\nGiven the final string s, return the sum of the score of every si.\n\u00a0\nExample 1:\n\nInput: s = \"babab\"\nOutput: 9\nExplanation:\nFor s1 == \"b\", the longest common prefix is \"b\" which has a score of 1.\nFor s2 == \"ab\", there is no common prefix so the score is 0.\nFor s3 == \"bab\", the longest common prefix is \"bab\" which has a score of 3.\nFor s4 == \"abab\", there is no common prefix so the score is 0.\nFor s5 == \"babab\", the longest common prefix is \"babab\" which has a score of 5.\nThe sum of the scores is 1 + 0 + 3 + 0 + 5 = 9, so we return 9.\nExample 2:\n\nInput: s = \"azbazbzaz\"\nOutput: 14\nExplanation: \nFor s2 == \"az\", the longest common prefix is \"az\" which has a score of 2.\nFor s6 == \"azbzaz\", the longest common prefix is \"azb\" which has a score of 3.\nFor s9 == \"azbazbzaz\", the longest common prefix is \"azbazbzaz\" which has a score of 9.\nFor all other si, the score is 0.\nThe sum of the scores is 2 + 3 + 9 = 14, so we return 14.\n\n\u00a0\nConstraints:\n\n1 <= s.length <= 105\ns consists of lowercase English letters.\n\n",
  "entry_point": "Solution().sumScores",
  "starter_code": "class Solution:\n    def sumScores(self, s: str) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"xyzxyzxyz\") == 18\n    assert candidate(s = \"abcabcabc\") == 18\n    assert candidate(s = \"aabbcc\") == 7\n    assert candidate(s = \"abacabadabacaba\") == 32\n    assert candidate(s = \"zzzzz\") == 15\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 26\n    assert candidate(s = \"abacaba\") == 12\n    assert candidate(s = \"babab\") == 9\n    assert candidate(s = \"azbazbzaz\") == 14\n    assert candidate(s = \"abcde\") == 5\n    assert candidate(s = \"zazazaz\") == 16\n    assert candidate(s = \"aaaaa\") == 15\n    assert candidate(s = \"aabbaabb\") == 14\n    assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 26\n    assert candidate(s = \"a\") == 1\n    assert candidate(s = \"abcdefg\") == 7\n    assert candidate(s = \"aabbccddeeff\") == 13\n    assert candidate(s = \"aaaaaaaaaabbbbbbbbbb\") == 65\n    assert candidate(s = \"abacabadabacabadabacaba\") == 60\n    assert candidate(s = \"abcdefgfedcbabcdefgfedcbabcdefgfedcbabcdefgfedcbabcdefgfedcb\") == 180\n    assert candidate(s = \"xyxyxyxyxyxyxyxy\") == 72\n    assert candidate(s = \"zxyzyxzyxzyxzyxzyxzyxzyx\") == 31\n    assert candidate(s = \"aaaabbbbccccaaaabbbbcccc\") == 48\n    assert candidate(s = \"mississippimississippimississippimississippi\") == 110\n    assert candidate(s = \"aaaaaaaaaabaaaa\") == 70\n    assert candidate(s = \"rotorrotor\") == 17\n    assert candidate(s = \"abracadabra\") == 18\n    assert candidate(s = \"abcabcabcabc\") == 30\n    assert candidate(s = \"abcabcabcabcabcd\") == 46\n    assert candidate(s = \"zzzzzzzzzzzzzzz\") == 120\n    assert candidate(s = \"zzyyxxwwvvuuttssrrqqppoonnmmllkkiijjhhggffeeddccbbbaaa\") == 55\n    assert candidate(s = \"aaaaaaaaaabaaaaaaaaab\") == 111\n    assert candidate(s = \"abcabcabcabcabcabca\") == 70\n    assert candidate(s = \"abcabcabcabca\") == 35\n    assert candidate(s = \"abcdabcdabcd\") == 24\n    assert candidate(s = \"abacabadabacabad\") == 34\n    assert candidate(s = \"abababababababababababababababab\") == 272\n    assert candidate(s = \"aaaaabbbbccccdddd\") == 27\n    assert candidate(s = \"aaaaabbbbbccccdddd\") == 28\n    assert candidate(s = \"aaaaabbbbb\") == 20\n    assert candidate(s = \"aaaaabbbbccccddddeeeee\") == 32\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabc\") == 234\n    assert candidate(s = \"abcdefedcbafedcbafedcba\") == 26\n    assert candidate(s = \"mississippimississippi\") == 33\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabc\") == 273\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 630\n    assert candidate(s = \"aabbaabbaabbaabb\") == 44\n    assert candidate(s = \"bananaananabanana\") == 23\n    assert candidate(s = \"abcabcabcabcabcabcab\") == 77\n    assert candidate(s = \"abcabcabcabcabcabcabc\") == 84\n    assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd\") == 612\n    assert candidate(s = \"qwertyuiopqwertyuiop\") == 30\n    assert candidate(s = \"aabbccddeeaabbccddeeaabbccddeeaabbccddeeaabbccdd\") == 145\n    assert candidate(s = \"abcdefghjihgfedcba\") == 19\n    assert candidate(s = \"acabacabacabacabacabacabacabacabacabacab\") == 230\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabc\") == 165\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 360\n    assert candidate(s = \"abcabcabcab\") == 26\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 408\n    assert candidate(s = \"qwertyuiopasdfghjklzxcvbnm\") == 26\n    assert candidate(s = \"abcdefedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcba\") == 75\n    assert candidate(s = \"abcdeedcbaabcdeedcba\") == 32\n    assert candidate(s = \"ababababababab\") == 56\n    assert candidate(s = \"abcdeedcba\") == 11\n    assert candidate(s = \"abababababababab\") == 72\n    assert candidate(s = \"noon\") == 5\n    assert candidate(s = \"abababababab\") == 42\n    assert candidate(s = \"ababababababababab\") == 90\n    assert candidate(s = \"abcabcabcabcabcabc\") == 63\n    assert candidate(s = \"aabbccddeeffgghhii\") == 19\n    assert candidate(s = \"abcdabcdabcdabcd\") == 40\n    assert candidate(s = \"level\") == 6\n    assert candidate(s = \"levellevellevel\") == 33\n    assert candidate(s = \"abcdabcdabcdabcdabcd\") == 60\n    assert candidate(s = \"abcdefghijk\") == 11\n    assert candidate(s = \"aaaaaaaaaaa\") == 66\n    assert candidate(s = \"qwertyuiopqwertyuiopqwertyuiopqwertyuiop\") == 100\n    assert candidate(s = \"bananaananab\") == 13\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzz\") == 210\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 666\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 315\n    assert candidate(s = \"banana\") == 6\n    assert candidate(s = \"zzyzxzyzxzyzxzyz\") == 24\n    assert candidate(s = \"xyxyxyxyxyxyxyxyxyxyxyxyxyxyxyxy\") == 272\n    assert candidate(s = \"zxyzyxzyxzyxzyxzyx\") == 23\n    assert candidate(s = \"abracadabraabracadabra\") == 47\n    assert candidate(s = \"abcdedcbaabcdedcba\") == 29\n    assert candidate(s = \"abcdefghij\") == 10\n    assert candidate(s = \"abcdedcbafedcbafedcbafedcbafedcba\") == 38\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 53\n    assert candidate(s = \"aabbccddeeffgghhiijj\") == 21\n    assert candidate(s = \"aabbccddeeffaabbccddeeff\") == 38\n    assert candidate(s = \"aaaaaabbccddeeffgg\") == 33\n    assert candidate(s = \"aaaaabbbbbaaaaa\") == 40\n    assert candidate(s = \"racecarracecar\") == 23\n    assert candidate(s = \"abacabadabacabadabacabad\") == 63\n    assert candidate(s = \"deified\") == 8\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbb\") == 525\n    assert candidate(s = \"aaaaaabbbbbccccc\") == 31\n    assert candidate(s = \"aaaaaabbbbccccdddd\") == 33\n    assert candidate(s = \"abcbaabcbaabcba\") == 33\n    assert candidate(s = \"ababababcabababa\") == 44\n    assert candidate(s = \"abcdabcdbabc\") == 19\n    assert candidate(s = \"abababababababababababab\") == 156\n    assert candidate(s = \"ababababab\") == 30\n    assert candidate(s = \"abacabadabacabadabacab\") == 55\n    assert candidate(s = \"civic\") == 6\n    assert candidate(s = \"rotor\") == 6\n    assert candidate(s = \"racecar\") == 8\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabc\") == 135\n    assert candidate(s = \"abcdefghijabcdefghij\") == 30\n    assert candidate(s = \"zazbzcbzazbzcb\") == 25\n    assert candidate(s = \"abcabcabcabcabcabcabcabc\") == 108\n    assert candidate(s = \"pneumonoultramicroscopicsilicovolcanoconiosis\") == 46\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabc\") == 198\n    assert candidate(s = \"abcabcabcabcabcab\") == 57\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 2211\n    assert candidate(s = \"abcdefabcdeabcdeabc\") == 32\n    assert candidate(s = \"mississippi\") == 11\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzzzzzzzzzzzz\") == 71\n    assert candidate(s = \"hellohellohellohello\") == 50\n    assert candidate(s = \"abcabcabcabcabc\") == 45\n    assert candidate(s = \"xyzzzyxyzzzyxyzzzyxyzzzy\") == 60\n",
  "test_cases": [
    "assert candidate(s = \"xyzxyzxyz\") == 18",
    "assert candidate(s = \"abcabcabc\") == 18",
    "assert candidate(s = \"aabbcc\") == 7",
    "assert candidate(s = \"abacabadabacaba\") == 32",
    "assert candidate(s = \"zzzzz\") == 15",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 26",
    "assert candidate(s = \"abacaba\") == 12",
    "assert candidate(s = \"babab\") == 9",
    "assert candidate(s = \"azbazbzaz\") == 14",
    "assert candidate(s = \"abcde\") == 5",
    "assert candidate(s = \"zazazaz\") == 16",
    "assert candidate(s = \"aaaaa\") == 15",
    "assert candidate(s = \"aabbaabb\") == 14",
    "assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 26",
    "assert candidate(s = \"a\") == 1",
    "assert candidate(s = \"abcdefg\") == 7",
    "assert candidate(s = \"aabbccddeeff\") == 13",
    "assert candidate(s = \"aaaaaaaaaabbbbbbbbbb\") == 65",
    "assert candidate(s = \"abacabadabacabadabacaba\") == 60",
    "assert candidate(s = \"abcdefgfedcbabcdefgfedcbabcdefgfedcbabcdefgfedcbabcdefgfedcb\") == 180",
    "assert candidate(s = \"xyxyxyxyxyxyxyxy\") == 72",
    "assert candidate(s = \"zxyzyxzyxzyxzyxzyxzyxzyx\") == 31",
    "assert candidate(s = \"aaaabbbbccccaaaabbbbcccc\") == 48",
    "assert candidate(s = \"mississippimississippimississippimississippi\") == 110",
    "assert candidate(s = \"aaaaaaaaaabaaaa\") == 70",
    "assert candidate(s = \"rotorrotor\") == 17",
    "assert candidate(s = \"abracadabra\") == 18",
    "assert candidate(s = \"abcabcabcabc\") == 30",
    "assert candidate(s = \"abcabcabcabcabcd\") == 46",
    "assert candidate(s = \"zzzzzzzzzzzzzzz\") == 120",
    "assert candidate(s = \"zzyyxxwwvvuuttssrrqqppoonnmmllkkiijjhhggffeeddccbbbaaa\") == 55",
    "assert candidate(s = \"aaaaaaaaaabaaaaaaaaab\") == 111",
    "assert candidate(s = \"abcabcabcabcabcabca\") == 70",
    "assert candidate(s = \"abcabcabcabca\") == 35",
    "assert candidate(s = \"abcdabcdabcd\") == 24",
    "assert candidate(s = \"abacabadabacabad\") == 34",
    "assert candidate(s = \"abababababababababababababababab\") == 272",
    "assert candidate(s = \"aaaaabbbbccccdddd\") == 27",
    "assert candidate(s = \"aaaaabbbbbccccdddd\") == 28",
    "assert candidate(s = \"aaaaabbbbb\") == 20",
    "assert candidate(s = \"aaaaabbbbccccddddeeeee\") == 32",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabc\") == 234",
    "assert candidate(s = \"abcdefedcbafedcbafedcba\") == 26",
    "assert candidate(s = \"mississippimississippi\") == 33",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabc\") == 273",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 630",
    "assert candidate(s = \"aabbaabbaabbaabb\") == 44",
    "assert candidate(s = \"bananaananabanana\") == 23",
    "assert candidate(s = \"abcabcabcabcabcabcab\") == 77",
    "assert candidate(s = \"abcabcabcabcabcabcabc\") == 84",
    "assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd\") == 612",
    "assert candidate(s = \"qwertyuiopqwertyuiop\") == 30",
    "assert candidate(s = \"aabbccddeeaabbccddeeaabbccddeeaabbccddeeaabbccdd\") == 145",
    "assert candidate(s = \"abcdefghjihgfedcba\") == 19",
    "assert candidate(s = \"acabacabacabacabacabacabacabacabacabacab\") == 230",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabc\") == 165",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 360",
    "assert candidate(s = \"abcabcabcab\") == 26",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 408",
    "assert candidate(s = \"qwertyuiopasdfghjklzxcvbnm\") == 26",
    "assert candidate(s = \"abcdefedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcbafedcba\") == 75",
    "assert candidate(s = \"abcdeedcbaabcdeedcba\") == 32",
    "assert candidate(s = \"ababababababab\") == 56",
    "assert candidate(s = \"abcdeedcba\") == 11",
    "assert candidate(s = \"abababababababab\") == 72",
    "assert candidate(s = \"noon\") == 5",
    "assert candidate(s = \"abababababab\") == 42",
    "assert candidate(s = \"ababababababababab\") == 90",
    "assert candidate(s = \"abcabcabcabcabcabc\") == 63",
    "assert candidate(s = \"aabbccddeeffgghhii\") == 19",
    "assert candidate(s = \"abcdabcdabcdabcd\") == 40",
    "assert candidate(s = \"level\") == 6",
    "assert candidate(s = \"levellevellevel\") == 33",
    "assert candidate(s = \"abcdabcdabcdabcdabcd\") == 60",
    "assert candidate(s = \"abcdefghijk\") == 11",
    "assert candidate(s = \"aaaaaaaaaaa\") == 66",
    "assert candidate(s = \"qwertyuiopqwertyuiopqwertyuiopqwertyuiop\") == 100",
    "assert candidate(s = \"bananaananab\") == 13",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzz\") == 210",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 666",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 315",
    "assert candidate(s = \"banana\") == 6",
    "assert candidate(s = \"zzyzxzyzxzyzxzyz\") == 24",
    "assert candidate(s = \"xyxyxyxyxyxyxyxyxyxyxyxyxyxyxyxy\") == 272",
    "assert candidate(s = \"zxyzyxzyxzyxzyxzyx\") == 23",
    "assert candidate(s = \"abracadabraabracadabra\") == 47",
    "assert candidate(s = \"abcdedcbaabcdedcba\") == 29",
    "assert candidate(s = \"abcdefghij\") == 10",
    "assert candidate(s = \"abcdedcbafedcbafedcbafedcbafedcba\") == 38",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 53",
    "assert candidate(s = \"aabbccddeeffgghhiijj\") == 21",
    "assert candidate(s = \"aabbccddeeffaabbccddeeff\") == 38",
    "assert candidate(s = \"aaaaaabbccddeeffgg\") == 33",
    "assert candidate(s = \"aaaaabbbbbaaaaa\") == 40",
    "assert candidate(s = \"racecarracecar\") == 23",
    "assert candidate(s = \"abacabadabacabadabacabad\") == 63",
    "assert candidate(s = \"deified\") == 8",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbbbbbbbbbb\") == 525",
    "assert candidate(s = \"aaaaaabbbbbccccc\") == 31",
    "assert candidate(s = \"aaaaaabbbbccccdddd\") == 33",
    "assert candidate(s = \"abcbaabcbaabcba\") == 33",
    "assert candidate(s = \"ababababcabababa\") == 44",
    "assert candidate(s = \"abcdabcdbabc\") == 19",
    "assert candidate(s = \"abababababababababababab\") == 156",
    "assert candidate(s = \"ababababab\") == 30",
    "assert candidate(s = \"abacabadabacabadabacab\") == 55",
    "assert candidate(s = \"civic\") == 6",
    "assert candidate(s = \"rotor\") == 6",
    "assert candidate(s = \"racecar\") == 8",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabc\") == 135",
    "assert candidate(s = \"abcdefghijabcdefghij\") == 30",
    "assert candidate(s = \"zazbzcbzazbzcb\") == 25",
    "assert candidate(s = \"abcabcabcabcabcabcabcabc\") == 108",
    "assert candidate(s = \"pneumonoultramicroscopicsilicovolcanoconiosis\") == 46",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabc\") == 198",
    "assert candidate(s = \"abcabcabcabcabcab\") == 57",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 2211",
    "assert candidate(s = \"abcdefabcdeabcdeabc\") == 32",
    "assert candidate(s = \"mississippi\") == 11",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzzzzzzzzzzzz\") == 71",
    "assert candidate(s = \"hellohellohellohello\") == 50",
    "assert candidate(s = \"abcabcabcabcabc\") == 45",
    "assert candidate(s = \"xyzzzyxyzzzyxyzzzyxyzzzy\") == 60"
  ]
}