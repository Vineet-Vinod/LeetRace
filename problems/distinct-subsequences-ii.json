{
  "id": "distinct-subsequences-ii",
  "title": "Distinct Subsequences Ii",
  "difficulty": "Hard",
  "tags": [
    "String",
    "Dynamic Programming"
  ],
  "description": "Given a string s, return the number of distinct non-empty subsequences of s. Since the answer may be very large, return it modulo 109 + 7.\nA subsequence of a string is a new string that is formed from the original string by deleting some (can be none) of the characters without disturbing the relative positions of the remaining characters. (i.e., \"ace\" is a subsequence of \"abcde\" while \"aec\" is not.\n\u00a0\nExample 1:\n\nInput: s = \"abc\"\nOutput: 7\nExplanation: The 7 distinct subsequences are \"a\", \"b\", \"c\", \"ab\", \"ac\", \"bc\", and \"abc\".\n\nExample 2:\n\nInput: s = \"aba\"\nOutput: 6\nExplanation: The 6 distinct subsequences are \"a\", \"b\", \"ab\", \"aa\", \"ba\", and \"aba\".\n\nExample 3:\n\nInput: s = \"aaa\"\nOutput: 3\nExplanation: The 3 distinct subsequences are \"a\", \"aa\" and \"aaa\".\n\n\u00a0\nConstraints:\n\n1 <= s.length <= 2000\ns consists of lowercase English letters.\n\n",
  "entry_point": "Solution().distinctSubseqII",
  "starter_code": "class Solution:\n    def distinctSubseqII(self, s: str) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 67108863\n    assert candidate(s = \"abac\") == 13\n    assert candidate(s = \"abababababababababab\") == 28655\n    assert candidate(s = \"a\") == 1\n    assert candidate(s = \"abracadabra\") == 1303\n    assert candidate(s = \"zzzz\") == 4\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 402155530\n    assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcd\") == 552430184\n    assert candidate(s = \"aaa\") == 3\n    assert candidate(s = \"abcabc\") == 51\n    assert candidate(s = \"aabb\") == 8\n    assert candidate(s = \"zzzzzzzzzz\") == 10\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 398\n    assert candidate(s = \"abc\") == 7\n    assert candidate(s = \"abcdeabcdeabcdeabcde\") == 814295\n    assert candidate(s = \"abcd\") == 15\n    assert candidate(s = \"aba\") == 6\n    assert candidate(s = \"aaaaaaaabbbbbbbbcccccccc\") == 728\n    assert candidate(s = \"aabbcc\") == 26\n    assert candidate(s = \"mississippi\") == 477\n    assert candidate(s = \"abcdabc\") == 115\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 865810541\n    assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 67108863\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzz\") == 174638632\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 100\n    assert candidate(s = \"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij\") == 330026179\n    assert candidate(s = \"abcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacd\") == 411786355\n    assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcdabcdabcd\") == 854978287\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 254\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 136\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 30\n    assert candidate(s = \"abacabadabacaba\") == 9426\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 90\n    assert candidate(s = \"thisisalongstringthatwilltestthealgorithmwithvariouscharacters\") == 733715667\n    assert candidate(s = \"abacabadabacabadabacabadabacabad\") == 270841387\n    assert candidate(s = \"thisisaverylongstringwithrepeatedcharactersandlongsubsequences\") == 484250120\n    assert candidate(s = \"longstringthatweneedtogenenatetobemorecomplexandcheckouralgorithmwithaverylongstring\") == 45372177\n    assert candidate(s = \"aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd\") == 14640\n    assert candidate(s = \"racecar\") == 106\n    assert candidate(s = \"aabaaabbbaababaabaaabbbabbaabbabbaababaaabbabaaababbabbaabab\") == 330918185\n    assert candidate(s = \"aabbccaaaabbccaaaabbcc\") == 41594\n    assert candidate(s = \"xyzxyzxyz\") == 325\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 723430077\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 992025290\n    assert candidate(s = \"aaaaaaaaaabbbbbbbbccccccccddddddddddeeeeeeeeeffffffffggggggggghhhhhhhhhiiiiiiiiiijjjjjjjjjkkkkkkkkklllllllllmmmmmmmmmnnnnnnnnnooooooooooppppppppppqqqqqqqqqqrrrrrrrrrrssssssssssttttttttttuuuuuuuuuuvvvvvvvvvvwwwwwwwwwxxxxxxxxxyyyyyyyyyyzzzzzzzzzz\") == 627058992\n    assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabb\") == 580349510\n    assert candidate(s = \"abababababababababababababababababababababababababababababababababababababababababababababababababab\") == 252403354\n    assert candidate(s = \"abcdxyzabcdxyzabcdxyzabcdxyzabcdxyzabcdxyzabcdxyz\") == 843562901\n    assert candidate(s = \"ababababababababababababababababababababababababababababababab\") == 680057394\n    assert candidate(s = \"repeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeated\") == 462028482\n    assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 208\n    assert candidate(s = \"abababababababababababababab\") == 1346267\n    assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcd\") == 112454975\n",
  "test_cases": [
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 67108863",
    "assert candidate(s = \"abac\") == 13",
    "assert candidate(s = \"abababababababababab\") == 28655",
    "assert candidate(s = \"a\") == 1",
    "assert candidate(s = \"abracadabra\") == 1303",
    "assert candidate(s = \"zzzz\") == 4",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 402155530",
    "assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcd\") == 552430184",
    "assert candidate(s = \"aaa\") == 3",
    "assert candidate(s = \"abcabc\") == 51",
    "assert candidate(s = \"aabb\") == 8",
    "assert candidate(s = \"zzzzzzzzzz\") == 10",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 398",
    "assert candidate(s = \"abc\") == 7",
    "assert candidate(s = \"abcdeabcdeabcdeabcde\") == 814295",
    "assert candidate(s = \"abcd\") == 15",
    "assert candidate(s = \"aba\") == 6",
    "assert candidate(s = \"aaaaaaaabbbbbbbbcccccccc\") == 728",
    "assert candidate(s = \"aabbcc\") == 26",
    "assert candidate(s = \"mississippi\") == 477",
    "assert candidate(s = \"abcdabc\") == 115",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 865810541",
    "assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 67108863",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzzzzzzzz\") == 174638632",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 100",
    "assert candidate(s = \"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij\") == 330026179",
    "assert candidate(s = \"abcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacdabcdbacdbacd\") == 411786355",
    "assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcdabcdabcdabcd\") == 854978287",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 254",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 136",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 30",
    "assert candidate(s = \"abacabadabacaba\") == 9426",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 90",
    "assert candidate(s = \"thisisalongstringthatwilltestthealgorithmwithvariouscharacters\") == 733715667",
    "assert candidate(s = \"abacabadabacabadabacabadabacabad\") == 270841387",
    "assert candidate(s = \"thisisaverylongstringwithrepeatedcharactersandlongsubsequences\") == 484250120",
    "assert candidate(s = \"longstringthatweneedtogenenatetobemorecomplexandcheckouralgorithmwithaverylongstring\") == 45372177",
    "assert candidate(s = \"aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd\") == 14640",
    "assert candidate(s = \"racecar\") == 106",
    "assert candidate(s = \"aabaaabbbaababaabaaabbbabbaabbabbaababaaabbabaaababbabbaabab\") == 330918185",
    "assert candidate(s = \"aabbccaaaabbccaaaabbcc\") == 41594",
    "assert candidate(s = \"xyzxyzxyz\") == 325",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 723430077",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 992025290",
    "assert candidate(s = \"aaaaaaaaaabbbbbbbbccccccccddddddddddeeeeeeeeeffffffffggggggggghhhhhhhhhiiiiiiiiiijjjjjjjjjkkkkkkkkklllllllllmmmmmmmmmnnnnnnnnnooooooooooppppppppppqqqqqqqqqqrrrrrrrrrrssssssssssttttttttttuuuuuuuuuuvvvvvvvvvvwwwwwwwwwxxxxxxxxxyyyyyyyyyyzzzzzzzzzz\") == 627058992",
    "assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabb\") == 580349510",
    "assert candidate(s = \"abababababababababababababababababababababababababababababababababababababababababababababababababab\") == 252403354",
    "assert candidate(s = \"abcdxyzabcdxyzabcdxyzabcdxyzabcdxyzabcdxyzabcdxyz\") == 843562901",
    "assert candidate(s = \"ababababababababababababababababababababababababababababababab\") == 680057394",
    "assert candidate(s = \"repeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeatedrepeated\") == 462028482",
    "assert candidate(s = \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\") == 208",
    "assert candidate(s = \"abababababababababababababab\") == 1346267",
    "assert candidate(s = \"abcdabcdabcdabcdabcdabcdabcd\") == 112454975"
  ]
}