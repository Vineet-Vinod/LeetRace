{
  "id": "unique-length-3-palindromic-subsequences",
  "title": "Unique Length 3 Palindromic Subsequences",
  "difficulty": "Medium",
  "tags": [
    "Bit Manipulation",
    "Hash Table",
    "String",
    "Prefix Sum"
  ],
  "description": "Given a string s, return the number of unique palindromes of length three that are a subsequence of s.\nNote that even if there are multiple ways to obtain the same subsequence, it is still only counted once.\nA palindrome is a string that reads the same forwards and backwards.\nA subsequence of a string is a new string generated from the original string with some characters (can be none) deleted without changing the relative order of the remaining characters.\n\nFor example, \"ace\" is a subsequence of \"abcde\".\n\n\u00a0\nExample 1:\n\nInput: s = \"aabca\"\nOutput: 3\nExplanation: The 3 palindromic subsequences of length 3 are:\n- \"aba\" (subsequence of \"aabca\")\n- \"aaa\" (subsequence of \"aabca\")\n- \"aca\" (subsequence of \"aabca\")\n\nExample 2:\n\nInput: s = \"adc\"\nOutput: 0\nExplanation: There are no palindromic subsequences of length 3 in \"adc\".\n\nExample 3:\n\nInput: s = \"bbcbaba\"\nOutput: 4\nExplanation: The 4 palindromic subsequences of length 3 are:\n- \"bbb\" (subsequence of \"bbcbaba\")\n- \"bcb\" (subsequence of \"bbcbaba\")\n- \"bab\" (subsequence of \"bbcbaba\")\n- \"aba\" (subsequence of \"bbcbaba\")\n\n\u00a0\nConstraints:\n\n3 <= s.length <= 105\ns consists of only lowercase English letters.\n\n",
  "entry_point": "Solution().countPalindromicSubsequence",
  "starter_code": "class Solution:\n    def countPalindromicSubsequence(self, s: str) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"abcba\") == 3\n    assert candidate(s = \"madam\") == 3\n    assert candidate(s = \"abcdedcba\") == 10\n    assert candidate(s = \"aaaaa\") == 1\n    assert candidate(s = \"adc\") == 0\n    assert candidate(s = \"abcabcabc\") == 9\n    assert candidate(s = \"abracadabra\") == 13\n    assert candidate(s = \"aaa\") == 1\n    assert candidate(s = \"racecar\") == 6\n    assert candidate(s = \"abba\") == 1\n    assert candidate(s = \"noon\") == 1\n    assert candidate(s = \"abccba\") == 3\n    assert candidate(s = \"aaaa\") == 1\n    assert candidate(s = \"aabbcc\") == 0\n    assert candidate(s = \"mississippi\") == 5\n    assert candidate(s = \"aabca\") == 3\n    assert candidate(s = \"bbcbaba\") == 4\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 0\n    assert candidate(s = \"xyzzyx\") == 3\n    assert candidate(s = \"level\") == 3\n    assert candidate(s = \"abcdefg\") == 0\n    assert candidate(s = \"aabacbaabacba\") == 8\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 0\n    assert candidate(s = \"noonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoon\") == 9\n    assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzyyxwwvvuuttssrrqqppoonnmmllkkjjiihhggeeffddccbbaa\") == 352\n    assert candidate(s = \"zzzzzzzyyyyxxxwwvvuttsrrqqppoonnmmllkkjjiihhggffeeddccba\") == 3\n    assert candidate(s = \"zzzazzaaz\") == 4\n    assert candidate(s = \"abacabadabacaba\") == 11\n    assert candidate(s = \"ababababababababababababababababababababab\") == 4\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabc\") == 9\n    assert candidate(s = \"ababcab\") == 6\n    assert candidate(s = \"abacabadabacabadabacabadabacabad\") == 16\n    assert candidate(s = \"racecarcarcarecarracecarcarcarecarracecarcarcarecarracecar\") == 16\n    assert candidate(s = \"abacdfgdcaba\") == 16\n    assert candidate(s = \"aabbbaaabbbaaa\") == 4\n    assert candidate(s = \"aaabaaaabaaaaabaaaabaaaaaabaaaa\") == 4\n    assert candidate(s = \"aaaabaaaabaaaab\") == 4\n    assert candidate(s = \"abcbabcbabcbabcbabcbabcbabcba\") == 9\n    assert candidate(s = \"bababababababababababababababababababababa\") == 4\n    assert candidate(s = \"abcbacbacbacbacbacbacbacbacbacbacbacbacbacbacbacbacbac\") == 9\n    assert candidate(s = \"aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd\") == 4\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 1\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzzyxwvutsrqponmlkjihgfedcba\") == 325\n    assert candidate(s = \"xyzyxyzyxyzyx\") == 9\n    assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 650\n    assert candidate(s = \"zyxwvutsrqponmlkjihgfedcbaedcba\") == 20\n    assert candidate(s = \"abbaabbbaabbaabbbaabbaabbbaabbaabbbaabbaabbba\") == 4\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9\n    assert candidate(s = \"abcdefghihgfedcbaabcdefghihgfedcba\") == 80\n    assert candidate(s = \"aaaabbbbccccddddeeeeffffgggghhhhiiiijjjjkkkkllllmmmmnnnnooooppppqqqqrrrrssssttttuuuuvvvvwwwwxxxxyyyyzzzz\") == 26\n    assert candidate(s = \"aaabaaaabaaaabaaaabaaaabaaaabaaaabaaaabaaaab\") == 4\n    assert candidate(s = \"abcbacbacbacbacbacbacbacbacbacbacbacbacb\") == 9\n    assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzz\") == 1\n    assert candidate(s = \"babababababababababababababababababababababababababababababa\") == 4\n    assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabba\") == 4\n    assert candidate(s = \"aaaabbbbccccddddeeeeffffgggghhhhiiiijjjjkkkkllllmmmmnnnnooooppppqqqqrrrrssssttttuuuuvvvvwwwwxxxxyyyyzzzzzz\") == 26\n    assert candidate(s = \"mamamadadadmmadammaddada\") == 9\n    assert candidate(s = \"aabbccddeeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 1\n    assert candidate(s = \"ababababababababababababababababababababababababababab\") == 4\n    assert candidate(s = \"aaaaaaaaaaaabbbbbbbbbbbbccccccccccdddddddddd\") == 4\n    assert candidate(s = \"racecarcarcarecarracecarcarcarecarracecar\") == 16\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9\n    assert candidate(s = \"abacbacbacbacba\") == 9\n    assert candidate(s = \"ababababababababababababababababababababababababababababababab\") == 4\n    assert candidate(s = \"mississippississippiississippiississippiississippiississippi\") == 9\n    assert candidate(s = \"abcabcabcabcabc\") == 9\n    assert candidate(s = \"noonmoonnoonmoon\") == 8\n    assert candidate(s = \"noonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonnoonmoon\") == 9\n    assert candidate(s = \"aaaaabbbbbccccc\") == 3\n    assert candidate(s = \"mississippississippiississippiississippiississippi\") == 9\n    assert candidate(s = \"abacabadabacabadabacabadabacabadabacabadabacabad\") == 16\n    assert candidate(s = \"zzzzzyyyxxwwvvuttsrrqqppoonnmmllkkjjiihhggffeeddccba\") == 2\n    assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 0\n    assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9\n    assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabba\") == 4\n",
  "test_cases": [
    "assert candidate(s = \"abcba\") == 3",
    "assert candidate(s = \"madam\") == 3",
    "assert candidate(s = \"abcdedcba\") == 10",
    "assert candidate(s = \"aaaaa\") == 1",
    "assert candidate(s = \"adc\") == 0",
    "assert candidate(s = \"abcabcabc\") == 9",
    "assert candidate(s = \"abracadabra\") == 13",
    "assert candidate(s = \"aaa\") == 1",
    "assert candidate(s = \"racecar\") == 6",
    "assert candidate(s = \"abba\") == 1",
    "assert candidate(s = \"noon\") == 1",
    "assert candidate(s = \"abccba\") == 3",
    "assert candidate(s = \"aaaa\") == 1",
    "assert candidate(s = \"aabbcc\") == 0",
    "assert candidate(s = \"mississippi\") == 5",
    "assert candidate(s = \"aabca\") == 3",
    "assert candidate(s = \"bbcbaba\") == 4",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 0",
    "assert candidate(s = \"xyzzyx\") == 3",
    "assert candidate(s = \"level\") == 3",
    "assert candidate(s = \"abcdefg\") == 0",
    "assert candidate(s = \"aabacbaabacba\") == 8",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyz\") == 0",
    "assert candidate(s = \"noonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoon\") == 9",
    "assert candidate(s = \"aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzzzyyxwwvvuuttssrrqqppoonnmmllkkjjiihhggeeffddccbbaa\") == 352",
    "assert candidate(s = \"zzzzzzzyyyyxxxwwvvuttsrrqqppoonnmmllkkjjiihhggffeeddccba\") == 3",
    "assert candidate(s = \"zzzazzaaz\") == 4",
    "assert candidate(s = \"abacabadabacaba\") == 11",
    "assert candidate(s = \"ababababababababababababababababababababab\") == 4",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabc\") == 9",
    "assert candidate(s = \"ababcab\") == 6",
    "assert candidate(s = \"abacabadabacabadabacabadabacabad\") == 16",
    "assert candidate(s = \"racecarcarcarecarracecarcarcarecarracecarcarcarecarracecar\") == 16",
    "assert candidate(s = \"abacdfgdcaba\") == 16",
    "assert candidate(s = \"aabbbaaabbbaaa\") == 4",
    "assert candidate(s = \"aaabaaaabaaaaabaaaabaaaaaabaaaa\") == 4",
    "assert candidate(s = \"aaaabaaaabaaaab\") == 4",
    "assert candidate(s = \"abcbabcbabcbabcbabcbabcbabcba\") == 9",
    "assert candidate(s = \"bababababababababababababababababababababa\") == 4",
    "assert candidate(s = \"abcbacbacbacbacbacbacbacbacbacbacbacbacbacbacbacbacbac\") == 9",
    "assert candidate(s = \"aaaaaaaaaabbbbbbbbbbccccccccccdddddddddd\") == 4",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz\") == 1",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzzyxwvutsrqponmlkjihgfedcba\") == 325",
    "assert candidate(s = \"xyzyxyzyxyzyx\") == 9",
    "assert candidate(s = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\") == 650",
    "assert candidate(s = \"zyxwvutsrqponmlkjihgfedcbaedcba\") == 20",
    "assert candidate(s = \"abbaabbbaabbaabbbaabbaabbbaabbaabbbaabbaabbba\") == 4",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9",
    "assert candidate(s = \"abcdefghihgfedcbaabcdefghihgfedcba\") == 80",
    "assert candidate(s = \"aaaabbbbccccddddeeeeffffgggghhhhiiiijjjjkkkkllllmmmmnnnnooooppppqqqqrrrrssssttttuuuuvvvvwwwwxxxxyyyyzzzz\") == 26",
    "assert candidate(s = \"aaabaaaabaaaabaaaabaaaabaaaabaaaabaaaabaaaab\") == 4",
    "assert candidate(s = \"abcbacbacbacbacbacbacbacbacbacbacbacbacb\") == 9",
    "assert candidate(s = \"zzzzzzzzzzzzzzzzzzzzzzzzzz\") == 1",
    "assert candidate(s = \"babababababababababababababababababababababababababababababa\") == 4",
    "assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabba\") == 4",
    "assert candidate(s = \"aaaabbbbccccddddeeeeffffgggghhhhiiiijjjjkkkkllllmmmmnnnnooooppppqqqqrrrrssssttttuuuuvvvvwwwwxxxxyyyyzzzzzz\") == 26",
    "assert candidate(s = \"mamamadadadmmadammaddada\") == 9",
    "assert candidate(s = \"aabbccddeeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz\") == 1",
    "assert candidate(s = \"ababababababababababababababababababababababababababab\") == 4",
    "assert candidate(s = \"aaaaaaaaaaaabbbbbbbbbbbbccccccccccdddddddddd\") == 4",
    "assert candidate(s = \"racecarcarcarecarracecarcarcarecarracecar\") == 16",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9",
    "assert candidate(s = \"abacbacbacbacba\") == 9",
    "assert candidate(s = \"ababababababababababababababababababababababababababababababab\") == 4",
    "assert candidate(s = \"mississippississippiississippiississippiississippiississippi\") == 9",
    "assert candidate(s = \"abcabcabcabcabc\") == 9",
    "assert candidate(s = \"noonmoonnoonmoon\") == 8",
    "assert candidate(s = \"noonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonmoonnoonnoonmoon\") == 9",
    "assert candidate(s = \"aaaaabbbbbccccc\") == 3",
    "assert candidate(s = \"mississippississippiississippiississippiississippi\") == 9",
    "assert candidate(s = \"abacabadabacabadabacabadabacabadabacabadabacabad\") == 16",
    "assert candidate(s = \"zzzzzyyyxxwwvvuttsrrqqppoonnmmllkkjjiihhggffeeddccba\") == 2",
    "assert candidate(s = \"zyxwvutsrqponmlkjihgfedcba\") == 0",
    "assert candidate(s = \"abcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabcabc\") == 9",
    "assert candidate(s = \"aabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabbaabba\") == 4"
  ]
}