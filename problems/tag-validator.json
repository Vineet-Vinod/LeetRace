{
  "id": "tag-validator",
  "title": "Tag Validator",
  "difficulty": "Hard",
  "tags": [
    "Stack",
    "String"
  ],
  "description": "Given a string representing a code snippet, implement a tag validator to parse the code and return whether it is valid.\nA code snippet is valid if all the following rules hold:\n\nThe code must be wrapped in a valid closed tag. Otherwise, the code is invalid.\nA closed tag (not necessarily valid) has exactly the following format : TAG_CONTENT. Among them,  is the start tag, and  is the end tag. The TAG_NAME in start and end tags should be the same. A closed tag is valid if and only if the TAG_NAME and TAG_CONTENT are valid.\nA valid TAG_NAME only contain upper-case letters, and has length in range [1,9]. Otherwise, the TAG_NAME is invalid.\nA valid TAG_CONTENT may contain other valid closed tags, cdata and any characters (see note1) EXCEPT unmatched <, unmatched start and end tag, and unmatched or closed tags with invalid TAG_NAME. Otherwise, the TAG_CONTENT is invalid.\nA start tag is unmatched if no end tag exists with the same TAG_NAME, and vice versa. However, you also need to consider the issue of unbalanced when tags are nested.\nA < is unmatched if you cannot find a subsequent >. And when you find a < or , all the subsequent characters until the next > should be parsed as TAG_NAME (not necessarily valid).\nThe cdata has the following format : CDATA_CONTENT. The range of CDATA_CONTENT is defined as the characters between </code> and the <b>first subsequent</b> <code>.\nCDATA_CONTENT may contain any characters. The function of cdata is to forbid the validator to parse CDATA_CONTENT, so even it has some characters that can be parsed as tag (no matter valid or invalid), you should treat it as regular characters.\n\n\u00a0\nExample 1:\n\nInput: code = \"This is the first line <div>\"\nOutput: true\nExplanation: \nThe code is wrapped in a closed tag :  and . \nThe TAG_NAME is valid, the TAG_CONTENT consists of some characters and cdata. \nAlthough CDATA_CONTENT has an unmatched start tag with invalid TAG_NAME, it should be considered as plain text, not parsed as a tag.\nSo TAG_CONTENT is valid, and then the code is valid. Thus return true.\n\nExample 2:\n\nInput: code = \">>  ![cdata[]] <div>]>]]>>]\"\nOutput: true\nExplanation:\nWe first separate the code into : start_tag|tag_content|end_tag.\nstart_tag -> \"\"\nend_tag -> \"\"\ntag_content could also be separated into : text1|cdata|text2.\ntext1 -> \">>  ![cdata[]] \"\ncdata -> \"<div>]>\", where the CDATA_CONTENT is \"]>\"\ntext2 -> \"]]>>]\"\nThe reason why start_tag is NOT \">>\" is because of the rule 6.\nThe reason why cdata is NOT \"<div>]>]]>\" is because of the rule 7.\n\nExample 3:\n\nInput: code = \"      \"\nOutput: false\nExplanation: Unbalanced. If \"\" is closed, then \"\" must be unmatched, and vice versa.\n\n\u00a0\nConstraints:\n\n1 <= code.length <= 500\ncode consists of English letters, digits, '<', '>', '/', '!', '[', ']', '.', and ' '.\n\n",
  "entry_point": "Solution().isValid",
  "starter_code": "class Solution:\n    def isValid(self, code: str) -> bool:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(code = \"<A>abc</A>\") == True\n    assert candidate(code = \"<A><![CDATA[wahaha]]]></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A>\") == True\n    assert candidate(code = \"<A><B></C></B></A>\") == False\n    assert candidate(code = \"This is the first line <DIV></DIV>\") == False\n    assert candidate(code = \"<![CDATA[CDATA_CONTENT]]>\") == True\n    assert candidate(code = \"<A><B></A></B>\") == False\n    assert candidate(code = \"<A> <B> <C></C> </B> </A>\") == True\n    assert candidate(code = \"This is the first line <DIV> [CDATA[CDATA_CONTENT]] </DIV>\") == False\n    assert candidate(code = \">>  ![cdata[]] <div>]>]]>>]\") == False\n    assert candidate(code = \"<A><![CDATA[CDATA]]></A>\") == True\n    assert candidate(code = \"This is the first line <DIV><SPAN></SPAN></DIV>\") == False\n    assert candidate(code = \"<A></A><B></B>\") == False\n    assert candidate(code = \"<A><A><A></A></A></A>\") == True\n    assert candidate(code = \"<A><TAG></TAG></A>\") == True\n    assert candidate(code = \"<A><A>456</A>  <A> 123  <B> <C>  123 </C> <B></B> </A></A>\") == False\n    assert candidate(code = \"<![CDATA[CDATA_CONTENT]]></DIV>\") == False\n    assert candidate(code = \"      \") == False\n    assert candidate(code = \"<A>text <![CDATA[CDATA_CONTENT]]></A>\") == True\n    assert candidate(code = \"<A><![CDATA[unmatched < > ]]></A>\") == True\n    assert candidate(code = \"<A>abc<![CDATA[CDATA]]>def</A>\") == True\n    assert candidate(code = \"<A><TAG>sometext</TAG></A>\") == True\n    assert candidate(code = \"<A></B>\") == False\n    assert candidate(code = \"<![CDATA[<![CDATA[]]]]><TAG>sometext</TAG>\") == False\n    assert candidate(code = \"<A><![CDATA[CDATA_CONTENT]]></A>\") == True\n    assert candidate(code = \"<A><B><C></C></B></A>\") == True\n    assert candidate(code = \"<A></A><A></A>\") == False\n    assert candidate(code = \"<A><A>abc</A></A>\") == True\n    assert candidate(code = \"<![CDATA[unmatched < > ]]><TAG></TAG>\") == False\n    assert candidate(code = \"<![CDATA[wahaha]]]><TAG>sometext</TAG>\") == False\n    assert candidate(code = \"<A><B></B></A><A></A>\") == False\n    assert candidate(code = \"<A></A>\") == True\n    assert candidate(code = \"<A><B></B></A>\") == True\n    assert candidate(code = \"<![CDATA[CDATA_CONTENT]]></CDATA>\") == False\n    assert candidate(code = \"<VALID><![CDATA[<INVALID></INVALID>]]></VALID>\") == True\n    assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A><C>content</C><![CDATA[content]]></C>\") == False\n    assert candidate(code = \"<A><B><C><D><E><![CDATA[ignore <F> here]]></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D></D></C></B></A>\") == True\n    assert candidate(code = \"<S><E><![CDATA[<INVALID></INVALID>]]></E></S>\") == True\n    assert candidate(code = \"<NESTEDCDATA><CDATA><![CDATA[Nested CDATA]]></CDATA>]]></NESTEDCDATA>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[unmatched <]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED></UNBALANCED></C></B></A>\") == False\n    assert candidate(code = \"<P><![CDATA[<P><P><P><P><P><P><P>many</P></P></P></P></P></P></P>]]></P>\") == True\n    assert candidate(code = \"<A><B><![CDATA[abc]]></B><![CDATA[def]]></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><H><I><J><K></K></J></I></H></G></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><H><I><![CDATA[</I></H></G></F></E></D></C></B></A>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C></B><D><![CDATA[TEXT]]></D></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<B>]]></A></B>\") == False\n    assert candidate(code = \"<A><B><![CDATA[TEXT]]></B><![CDATA[TEXT]]></B></A>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[<]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]><B></B></A>\") == True\n    assert candidate(code = \"<![CDATA[<A>content</A>]]><A>content</A>\") == False\n    assert candidate(code = \"<A><![CDATA[</]]></A>\") == True\n    assert candidate(code = \"<NINECHARS><INNER><INNERMOST></INNERMOST></INNER></NINECHARS>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></D>\") == False\n    assert candidate(code = \"<A><B><![CDATA[</A><B>]]></B></A>\") == True\n    assert candidate(code = \"<TAG><![CDATA[<TAG>data</TAG>]]></TAG>\") == True\n    assert candidate(code = \"<![CDATA[<A>content</A>]]><B>content<![CDATA[<C>content</C>]]></B>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<A></A>]]></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<A><B></B></A>]]></B></A>\") == True\n    assert candidate(code = \"<AA><BB><CC><DD><![CDATA[DDDD]]></DD></CC></BB></AA>\") == True\n    assert candidate(code = \"<![CDATA[<A>content</A>]]><B><![CDATA[<C>content</C>]]></B>\") == False\n    assert candidate(code = \"<A><B><![CDATA[TEXT]]></B><B><![CDATA[TEXT]]></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D><E>deep</E></D>]]></C></B></A>\") == True\n    assert candidate(code = \"<TAG><INNER><CDATA><TAG>invalid</TAG></CDATA></INNER></TAG>\") == True\n    assert candidate(code = \"<![CDATA[This is a <tag> inside CDATA]]></CDATA><TAG></TAG>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<A><B></B>]]></B></A>\") == True\n    assert candidate(code = \"<TAG>Some text <![CDATA[<TAG>more text</TAG>]]> even more text</TAG>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></C>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></B></D>\") == False\n    assert candidate(code = \"<![CDATA[ignore <A><B><C> here]]></A></B></C>]]>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><H><I><![CDATA[CDATA]]></I></H></G></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[wahaha]]></B></C></A>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[ignore <D></D> here]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[CDATA]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<A>]]></B></A>\") == True\n    assert candidate(code = \"<CODE><CODE><![CDATA[CODE]]></CODE></CODE>\") == True\n    assert candidate(code = \"<T><![CDATA[This is a ]]><![CDATA[CDATA section]]></T>\") == True\n    assert candidate(code = \"<A>content<![CDATA[<>]]>content</A>\") == True\n    assert candidate(code = \"<LONGTAG><SHORT><LONGER></LONGER></SHORT></LONGTAG>\") == True\n    assert candidate(code = \"<X><Y><Z><![CDATA[X]]></Z></Y></X>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D></D>]]></C></B></A>\") == True\n    assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]>content</A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B></B>]]></A>\") == True\n    assert candidate(code = \"<WRONG><TAG></WRONG></TAG>\") == False\n    assert candidate(code = \"<TAG><![CDATA[<TAG>content</TAG>]]></TAG>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D><E>INNER</E></D>]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>]]></A>\") == False\n    assert candidate(code = \"<A><B><C><D><![CDATA[<E>]]></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><![CDATA[FGHIJKL]]></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<MULTIPLECDATA><![CDATA[First CDATA]]></MULTIPLECDATA><![CDATA[Second CDATA]]></MULTIPLECDATA>\") == False\n    assert candidate(code = \"<A><B><![CDATA[wahaha]]></B></A><C></C>\") == False\n    assert candidate(code = \"<NEST><INNER1><INNER2></INNER2></INNER1></NEST>\") == False\n    assert candidate(code = \"<XYZ><XYZ><![CDATA[XYZ]]></XYZ></XYZ>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B]]></A>\") == False\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><H><I></I></H></G></F></E></D></C></B>]]></A>\") == True\n    assert candidate(code = \"<OUTER><INNER><![CDATA[<OUTER><INNER>]]></INNER></OUTER>\") == True\n    assert candidate(code = \"<A><B><![CDATA[wahaha>]]></B></A>\") == True\n    assert candidate(code = \"<![CDATA[<NOTATAG><INSIDECDATA>]]></NOTATAG>]<A></A>\") == False\n    assert candidate(code = \"<A><![CDATA[>]]></A>\") == True\n    assert candidate(code = \"<A><B></B></A><![CDATA[abc<def>ghi]]>\") == False\n    assert candidate(code = \"<X><![CDATA[<Y><Z></Z></Y>]]></X>\") == True\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F><G><![CDATA[CDATA]]></G><H><![CDATA[CDATA]]></H><I><![CDATA[CDATA]]></I>\") == False\n    assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C>\") == False\n    assert candidate(code = \"<X1><X2><X3></X3><X4><X5><X6></X6></X5></X4></X2></X1>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D>></C></B></A>\") == True\n    assert candidate(code = \"<INVALID><INNER></INNER></OUTER>\") == False\n    assert candidate(code = \"<A><![CDATA[abc<def>ghi]]></A>\") == True\n    assert candidate(code = \"<SINGLE><CDATA></CDATA></SINGLE><![CDATA[<![CDATA[<SINGLE>]]></SINGLE>]]>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></A>\") == False\n    assert candidate(code = \"<A><B><![CDATA[abc]]></B><![CDATA[def]></A>\") == False\n    assert candidate(code = \"<A><B></B><C></C><D></D><E></E></A>\") == True\n    assert candidate(code = \"<NESTED><INSIDE><MOREINSIDE>content</MOREINSIDE></INSIDE></NESTED>\") == False\n    assert candidate(code = \"<Z><Z></Z></Z><Z><Z></Z></Z>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED>data</C></B></A>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[wahaha>]]></C></B></A>\") == True\n    assert candidate(code = \"<X><Y><Z></Z></Y></X> <![CDATA[DATA]]></X>\") == False\n    assert candidate(code = \"<A><![CDATA[<B>![CDATA[wahaha]]]>]]></A>\") == True\n    assert candidate(code = \"<TAG1><TAG2><![CDATA[valid CDATA]]></TAG2><TAG3>content</TAG3></TAG1>\") == False\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F>\") == False\n    assert candidate(code = \"<A><![CDATA[<B><![CDATA[wahaha]]]]></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F>></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E>CDATA</E></D></C></B>]]></A>\") == True\n    assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]></A><B></B>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED></C></B></A>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[ignore <D> here]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<A><B><C></C></B></A>]]></A>\") == True\n    assert candidate(code = \"<TAG>some <TAG> nested <TAG></TAG> tags</TAG></TAG>\") == True\n    assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><B>content</B><![CDATA[content]]></A>\") == False\n    assert candidate(code = \"<MAIN><SUB1><SUB2>data</SUB2></SUB1></MAIN>\") == False\n    assert candidate(code = \"<A><![CDATA[<B><![CDATA[<C>content</C>]]></B>]]></A>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C>></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>></A>\") == False\n    assert candidate(code = \"<VALID><INNER> <![CDATA[<INNER>CDATA_CONTENT</INNER>]]> </INNER></VALID>\") == True\n    assert candidate(code = \"<NESTED><INNER>CONTENT</INNER></NESTED>\") == True\n    assert candidate(code = \"<PARENT><CHILD><GRANDCHILD></GRANDCHILD></CHILD></PARENT><![CDATA[<PARENT><CHILD></CHILD></PARENT>]]></PARENT>\") == False\n    assert candidate(code = \"<ROOT><CHILD><![CDATA[<DIV>unparsed</DIV>]]></CHILD></ROOT>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D></E>]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<A></B>]]></A>\") == False\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A>></A>\") == False\n    assert candidate(code = \"<X><Y><![CDATA[<Z>]]></X></Y></Z>\") == False\n    assert candidate(code = \"<A><B><C></C></B></A><![CDATA[<D>]]></D>]><A>\") == False\n    assert candidate(code = \"<A><B><C></C></B><![CDATA[TEXT]]></A>\") == True\n    assert candidate(code = \"<VALID><INNER>TEXT<![CDATA[CDATA_CONTENT]]></INNER></VALID>\") == True\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><D><![CDATA[CDATA]]></D></C><E><F><![CDATA[CDATA]]></F></E><G><H><![CDATA[CDATA]]></H></G><I><J><![CDATA[CDATA]]></J></I>\") == False\n    assert candidate(code = \"<A><B><C></D></C></B></A>\") == False\n    assert candidate(code = \"<A><![CDATA[<]]></A>\") == True\n    assert candidate(code = \"<MAIN><SUB1><SUB2></SUB2></SUB1></MAIN>\") == False\n    assert candidate(code = \"<A><![CDATA[content]]></A><B>content</B>\") == False\n    assert candidate(code = \"<A><![CDATA[TEXT]]></A><![CDATA[TEXT]]></A>\") == False\n    assert candidate(code = \"<ROOT><CHILD1><GRANDCHILD></GRANDCHILD></CHILD1><CHILD2></CHILD2></ROOT>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<C></D>]]></B></A>\") == True\n    assert candidate(code = \"<ROOT><![CDATA[<A></A>]]></ROOT>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<C><D></C>]]></D></B></A>\") == False\n    assert candidate(code = \"<A><![CDATA[content]]></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[ignore <TAG> and </TAG> here]]></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></B>\") == False\n    assert candidate(code = \"<P><A><![CDATA[<BR>]]></A><SPAN>text</SPAN></P>\") == True\n    assert candidate(code = \"<A><B><C><D><E></E></D></C></B></A>\") == True\n    assert candidate(code = \"<OUTER><MID><![CDATA[<INNER></INNER>]]></MID></OUTER>\") == True\n    assert candidate(code = \"<TAG1><TAG2><TAG3>CONTENT</TAG3></TAG2></TAG1>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[<D><E>CDATA</E></D>]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[unmatched </]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha>]]></G></F></E></D></C></B>]]></A>\") == False\n    assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E>\") == False\n    assert candidate(code = \"<T><T><![CDATA[<T><T>INNER</T></T>]]></T></T>\") == True\n    assert candidate(code = \"<![CDATA[ignore <A><B><C></C></B></A> here]]>\") == True\n    assert candidate(code = \"<TAG><![CDATA[<TAG><![CDATA[CDATA_CONTENT]]></TAG>]]></TAG>\") == False\n    assert candidate(code = \"<HELLO><WORLD><![CDATA[<HELLO>world</WORLD>]]></HELLO>\") == False\n    assert candidate(code = \"<A><B><![CDATA[not <CLOSING]]></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E>></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C><D><![CDATA[TEXT]]></D></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[</]]></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D><E><![CDATA[CONTENT]]></E></D>]]></C></B></A>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G></G></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[CDATA]]></A><B><![CDATA[CDATA]]></B><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F><G><![CDATA[CDATA]]></G>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><H><I></I></H></G></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<A>]]><C></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><![CDATA[<E><F></F>]]></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C></C></B><D><![CDATA[TEXT]]></D></A>\") == True\n    assert candidate(code = \"<NEST><INNER><![CDATA[<NEST><INNER><![CDATA[CDATA_CONTENT]]></INNER></NEST>]]></INNER></NEST>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[>]]></C></B></A>\") == True\n    assert candidate(code = \"<CORRECT><INSIDE></INSIDE></CORRECT>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><H><I><J><K><L><M><N><O><P><Q><R><S><T><U><V><W><X><Y><Z></Z></Y></X></W></V></U></T></S></R></Q></P></O></N></M></L></K></J></I></H></G></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<D><E><![CDATA[CDATA_CONTENT]]></E></D>]]></C></B></A>\") == False\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></F></E></D></C></B></A>\") == False\n    assert candidate(code = \"<A><B>content<![CDATA[<C>content</C>]]></B></A>\") == True\n    assert candidate(code = \"<![CDATA[<NOTATAG>data</NOTATAG>]]><VALID></VALID>\") == False\n    assert candidate(code = \"<LAYER1><LAYER2><LAYER3></LAYER3></LAYER2></LAYER1>\") == False\n    assert candidate(code = \"<TAG><INNER><![CDATA[<INNER>CDATA_CONTENT</INNER>]]> <![CDATA[TEXT]]></INNER></TAG>\") == True\n    assert candidate(code = \"<A><B><C></C><![CDATA[TEXT]]></B></A>\") == True\n    assert candidate(code = \"<![CDATA[<Z><Z></Z></Z><Z><Z></Z></Z>]]></Z>\") == False\n    assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C><D>content</D>\") == False\n    assert candidate(code = \"<OUTER><MID><INNER>TEXT</INNER> <![CDATA[TEXT]]></MID></OUTER>\") == True\n    assert candidate(code = \"<A><B><C><D><E><![CDATA[ABCDE]]></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[&]][CDATA[]]><B></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C>\") == False\n    assert candidate(code = \"<A><![CDATA[content]]></A><![CDATA[morecontent]]>\") == False\n    assert candidate(code = \"<NEST><LVL1><LVL2><LVL3><![CDATA[<NEST><LVL1>deep</LVL1></NEST>]]></LVL3></LVL2></LVL1></NEST>\") == False\n    assert candidate(code = \"<A><B>content</B><![CDATA[content]]></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><![CDATA[ignore <F></F> here]]></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A><B><C><![CDATA[<A><B><C>]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<!CDATA[CDATA_CONTENT]]]]><B></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[This is a <C></C> test]]></B></A>\") == True\n    assert candidate(code = \"<A><B><![CDATA[<C></C>]]></B></A>\") == True\n    assert candidate(code = \"<OUTER><INNER><![CDATA[<INNER>CDATA</INNER>]]></INNER></OUTER>\") == True\n    assert candidate(code = \"<![CDATA[ignore <TAG> tags <INSIDE> </INSIDE> </TAG> ]]>\") == True\n    assert candidate(code = \"<A><B><C></C><D><![CDATA[TEXT]]></D></B></A>\") == True\n    assert candidate(code = \"<A><B><C></C><D></D></B></A>\") == True\n    assert candidate(code = \"<![CDATA[ignore <A><B><C></C></B></A> here]]><A></A>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<C><D></D></C>]]></B><C><D><![CDATA[<E><F></F></E>]]></D></C></A>\") == True\n    assert candidate(code = \"<ALMOST><INNER><![CDATA[</INNER>]]></ALMOST>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[unmatched ]]></C></B></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><![CDATA[wahaha>]]></A>\") == True\n    assert candidate(code = \"<X><Y><![CDATA[Not a tag>]]></Y></X>\") == True\n    assert candidate(code = \"<A><![CDATA[This is some text <B></B> with CDATA]]></A>\") == True\n    assert candidate(code = \"<A><B><C></C></B></A><D></D>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<A></A>]]></B></A><C><D><![CDATA[<E></E>]]></D></C>\") == False\n    assert candidate(code = \"<A><B>content<![CDATA[<C>content</C>]]></B><![CDATA[content]]></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B>]]></A>\") == True\n    assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A>></B>\") == False\n    assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></D></B></A>\") == False\n    assert candidate(code = \"<A><B><![CDATA[<B></C>]]></B></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G>></F></E></D></C></B></A>\") == True\n    assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A>\") == True\n    assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha>]]></F></E></D></C></B></A>\") == False\n",
  "test_cases": [
    "assert candidate(code = \"<A>abc</A>\") == True",
    "assert candidate(code = \"<A><![CDATA[wahaha]]]></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A>\") == True",
    "assert candidate(code = \"<A><B></C></B></A>\") == False",
    "assert candidate(code = \"This is the first line <DIV></DIV>\") == False",
    "assert candidate(code = \"<![CDATA[CDATA_CONTENT]]>\") == True",
    "assert candidate(code = \"<A><B></A></B>\") == False",
    "assert candidate(code = \"<A> <B> <C></C> </B> </A>\") == True",
    "assert candidate(code = \"This is the first line <DIV> [CDATA[CDATA_CONTENT]] </DIV>\") == False",
    "assert candidate(code = \">>  ![cdata[]] <div>]>]]>>]\") == False",
    "assert candidate(code = \"<A><![CDATA[CDATA]]></A>\") == True",
    "assert candidate(code = \"This is the first line <DIV><SPAN></SPAN></DIV>\") == False",
    "assert candidate(code = \"<A></A><B></B>\") == False",
    "assert candidate(code = \"<A><A><A></A></A></A>\") == True",
    "assert candidate(code = \"<A><TAG></TAG></A>\") == True",
    "assert candidate(code = \"<A><A>456</A>  <A> 123  <B> <C>  123 </C> <B></B> </A></A>\") == False",
    "assert candidate(code = \"<![CDATA[CDATA_CONTENT]]></DIV>\") == False",
    "assert candidate(code = \"      \") == False",
    "assert candidate(code = \"<A>text <![CDATA[CDATA_CONTENT]]></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[unmatched < > ]]></A>\") == True",
    "assert candidate(code = \"<A>abc<![CDATA[CDATA]]>def</A>\") == True",
    "assert candidate(code = \"<A><TAG>sometext</TAG></A>\") == True",
    "assert candidate(code = \"<A></B>\") == False",
    "assert candidate(code = \"<![CDATA[<![CDATA[]]]]><TAG>sometext</TAG>\") == False",
    "assert candidate(code = \"<A><![CDATA[CDATA_CONTENT]]></A>\") == True",
    "assert candidate(code = \"<A><B><C></C></B></A>\") == True",
    "assert candidate(code = \"<A></A><A></A>\") == False",
    "assert candidate(code = \"<A><A>abc</A></A>\") == True",
    "assert candidate(code = \"<![CDATA[unmatched < > ]]><TAG></TAG>\") == False",
    "assert candidate(code = \"<![CDATA[wahaha]]]><TAG>sometext</TAG>\") == False",
    "assert candidate(code = \"<A><B></B></A><A></A>\") == False",
    "assert candidate(code = \"<A></A>\") == True",
    "assert candidate(code = \"<A><B></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[CDATA_CONTENT]]></CDATA>\") == False",
    "assert candidate(code = \"<VALID><![CDATA[<INVALID></INVALID>]]></VALID>\") == True",
    "assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A><C>content</C><![CDATA[content]]></C>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><![CDATA[ignore <F> here]]></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D></D></C></B></A>\") == True",
    "assert candidate(code = \"<S><E><![CDATA[<INVALID></INVALID>]]></E></S>\") == True",
    "assert candidate(code = \"<NESTEDCDATA><CDATA><![CDATA[Nested CDATA]]></CDATA>]]></NESTEDCDATA>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[unmatched <]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED></UNBALANCED></C></B></A>\") == False",
    "assert candidate(code = \"<P><![CDATA[<P><P><P><P><P><P><P>many</P></P></P></P></P></P></P>]]></P>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[abc]]></B><![CDATA[def]]></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><H><I><J><K></K></J></I></H></G></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><H><I><![CDATA[</I></H></G></F></E></D></C></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C></B><D><![CDATA[TEXT]]></D></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<B>]]></A></B>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[TEXT]]></B><![CDATA[TEXT]]></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[<]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]><B></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[<A>content</A>]]><A>content</A>\") == False",
    "assert candidate(code = \"<A><![CDATA[</]]></A>\") == True",
    "assert candidate(code = \"<NINECHARS><INNER><INNERMOST></INNERMOST></INNER></NINECHARS>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></D>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[</A><B>]]></B></A>\") == True",
    "assert candidate(code = \"<TAG><![CDATA[<TAG>data</TAG>]]></TAG>\") == True",
    "assert candidate(code = \"<![CDATA[<A>content</A>]]><B>content<![CDATA[<C>content</C>]]></B>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<A></A>]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<A><B></B></A>]]></B></A>\") == True",
    "assert candidate(code = \"<AA><BB><CC><DD><![CDATA[DDDD]]></DD></CC></BB></AA>\") == True",
    "assert candidate(code = \"<![CDATA[<A>content</A>]]><B><![CDATA[<C>content</C>]]></B>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[TEXT]]></B><B><![CDATA[TEXT]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D><E>deep</E></D>]]></C></B></A>\") == True",
    "assert candidate(code = \"<TAG><INNER><CDATA><TAG>invalid</TAG></CDATA></INNER></TAG>\") == True",
    "assert candidate(code = \"<![CDATA[This is a <tag> inside CDATA]]></CDATA><TAG></TAG>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<A><B></B>]]></B></A>\") == True",
    "assert candidate(code = \"<TAG>Some text <![CDATA[<TAG>more text</TAG>]]> even more text</TAG>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></C>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></B></D>\") == False",
    "assert candidate(code = \"<![CDATA[ignore <A><B><C> here]]></A></B></C>]]>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><H><I><![CDATA[CDATA]]></I></H></G></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[wahaha]]></B></C></A>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[ignore <D></D> here]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[CDATA]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<A>]]></B></A>\") == True",
    "assert candidate(code = \"<CODE><CODE><![CDATA[CODE]]></CODE></CODE>\") == True",
    "assert candidate(code = \"<T><![CDATA[This is a ]]><![CDATA[CDATA section]]></T>\") == True",
    "assert candidate(code = \"<A>content<![CDATA[<>]]>content</A>\") == True",
    "assert candidate(code = \"<LONGTAG><SHORT><LONGER></LONGER></SHORT></LONGTAG>\") == True",
    "assert candidate(code = \"<X><Y><Z><![CDATA[X]]></Z></Y></X>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D></D>]]></C></B></A>\") == True",
    "assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]>content</A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B></B>]]></A>\") == True",
    "assert candidate(code = \"<WRONG><TAG></WRONG></TAG>\") == False",
    "assert candidate(code = \"<TAG><![CDATA[<TAG>content</TAG>]]></TAG>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D><E>INNER</E></D>]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>]]></A>\") == False",
    "assert candidate(code = \"<A><B><C><D><![CDATA[<E>]]></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><![CDATA[FGHIJKL]]></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<MULTIPLECDATA><![CDATA[First CDATA]]></MULTIPLECDATA><![CDATA[Second CDATA]]></MULTIPLECDATA>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[wahaha]]></B></A><C></C>\") == False",
    "assert candidate(code = \"<NEST><INNER1><INNER2></INNER2></INNER1></NEST>\") == False",
    "assert candidate(code = \"<XYZ><XYZ><![CDATA[XYZ]]></XYZ></XYZ>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B]]></A>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><H><I></I></H></G></F></E></D></C></B>]]></A>\") == True",
    "assert candidate(code = \"<OUTER><INNER><![CDATA[<OUTER><INNER>]]></INNER></OUTER>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[wahaha>]]></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[<NOTATAG><INSIDECDATA>]]></NOTATAG>]<A></A>\") == False",
    "assert candidate(code = \"<A><![CDATA[>]]></A>\") == True",
    "assert candidate(code = \"<A><B></B></A><![CDATA[abc<def>ghi]]>\") == False",
    "assert candidate(code = \"<X><![CDATA[<Y><Z></Z></Y>]]></X>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F><G><![CDATA[CDATA]]></G><H><![CDATA[CDATA]]></H><I><![CDATA[CDATA]]></I>\") == False",
    "assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C>\") == False",
    "assert candidate(code = \"<X1><X2><X3></X3><X4><X5><X6></X6></X5></X4></X2></X1>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D>></C></B></A>\") == True",
    "assert candidate(code = \"<INVALID><INNER></INNER></OUTER>\") == False",
    "assert candidate(code = \"<A><![CDATA[abc<def>ghi]]></A>\") == True",
    "assert candidate(code = \"<SINGLE><CDATA></CDATA></SINGLE><![CDATA[<![CDATA[<SINGLE>]]></SINGLE>]]>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></A>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[abc]]></B><![CDATA[def]></A>\") == False",
    "assert candidate(code = \"<A><B></B><C></C><D></D><E></E></A>\") == True",
    "assert candidate(code = \"<NESTED><INSIDE><MOREINSIDE>content</MOREINSIDE></INSIDE></NESTED>\") == False",
    "assert candidate(code = \"<Z><Z></Z></Z><Z><Z></Z></Z>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED>data</C></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[wahaha>]]></C></B></A>\") == True",
    "assert candidate(code = \"<X><Y><Z></Z></Y></X> <![CDATA[DATA]]></X>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B>![CDATA[wahaha]]]>]]></A>\") == True",
    "assert candidate(code = \"<TAG1><TAG2><![CDATA[valid CDATA]]></TAG2><TAG3>content</TAG3></TAG1>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B><![CDATA[wahaha]]]]></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F>></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E>CDATA</E></D></C></B>]]></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]></A><B></B>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[<UNBALANCED></C></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[ignore <D> here]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[ignore <B><C></C></B> here]]></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<A><B><C></C></B></A>]]></A>\") == True",
    "assert candidate(code = \"<TAG>some <TAG> nested <TAG></TAG> tags</TAG></TAG>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><B>content</B><![CDATA[content]]></A>\") == False",
    "assert candidate(code = \"<MAIN><SUB1><SUB2>data</SUB2></SUB1></MAIN>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B><![CDATA[<C>content</C>]]></B>]]></A>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C>></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B>></A>\") == False",
    "assert candidate(code = \"<VALID><INNER> <![CDATA[<INNER>CDATA_CONTENT</INNER>]]> </INNER></VALID>\") == True",
    "assert candidate(code = \"<NESTED><INNER>CONTENT</INNER></NESTED>\") == True",
    "assert candidate(code = \"<PARENT><CHILD><GRANDCHILD></GRANDCHILD></CHILD></PARENT><![CDATA[<PARENT><CHILD></CHILD></PARENT>]]></PARENT>\") == False",
    "assert candidate(code = \"<ROOT><CHILD><![CDATA[<DIV>unparsed</DIV>]]></CHILD></ROOT>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D></E>]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<A></B>]]></A>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A>></A>\") == False",
    "assert candidate(code = \"<X><Y><![CDATA[<Z>]]></X></Y></Z>\") == False",
    "assert candidate(code = \"<A><B><C></C></B></A><![CDATA[<D>]]></D>]><A>\") == False",
    "assert candidate(code = \"<A><B><C></C></B><![CDATA[TEXT]]></A>\") == True",
    "assert candidate(code = \"<VALID><INNER>TEXT<![CDATA[CDATA_CONTENT]]></INNER></VALID>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><D><![CDATA[CDATA]]></D></C><E><F><![CDATA[CDATA]]></F></E><G><H><![CDATA[CDATA]]></H></G><I><J><![CDATA[CDATA]]></J></I>\") == False",
    "assert candidate(code = \"<A><B><C></D></C></B></A>\") == False",
    "assert candidate(code = \"<A><![CDATA[<]]></A>\") == True",
    "assert candidate(code = \"<MAIN><SUB1><SUB2></SUB2></SUB1></MAIN>\") == False",
    "assert candidate(code = \"<A><![CDATA[content]]></A><B>content</B>\") == False",
    "assert candidate(code = \"<A><![CDATA[TEXT]]></A><![CDATA[TEXT]]></A>\") == False",
    "assert candidate(code = \"<ROOT><CHILD1><GRANDCHILD></GRANDCHILD></CHILD1><CHILD2></CHILD2></ROOT>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<C></D>]]></B></A>\") == True",
    "assert candidate(code = \"<ROOT><![CDATA[<A></A>]]></ROOT>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<C><D></C>]]></D></B></A>\") == False",
    "assert candidate(code = \"<A><![CDATA[content]]></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[ignore <TAG> and </TAG> here]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A></B>\") == False",
    "assert candidate(code = \"<P><A><![CDATA[<BR>]]></A><SPAN>text</SPAN></P>\") == True",
    "assert candidate(code = \"<A><B><C><D><E></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<OUTER><MID><![CDATA[<INNER></INNER>]]></MID></OUTER>\") == True",
    "assert candidate(code = \"<TAG1><TAG2><TAG3>CONTENT</TAG3></TAG2></TAG1>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[<D><E>CDATA</E></D>]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[unmatched </]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha>]]></G></F></E></D></C></B>]]></A>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[CDATA]]></B></A><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E>\") == False",
    "assert candidate(code = \"<T><T><![CDATA[<T><T>INNER</T></T>]]></T></T>\") == True",
    "assert candidate(code = \"<![CDATA[ignore <A><B><C></C></B></A> here]]>\") == True",
    "assert candidate(code = \"<TAG><![CDATA[<TAG><![CDATA[CDATA_CONTENT]]></TAG>]]></TAG>\") == False",
    "assert candidate(code = \"<HELLO><WORLD><![CDATA[<HELLO>world</WORLD>]]></HELLO>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[not <CLOSING]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E>></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[TEXT]]></C><D><![CDATA[TEXT]]></D></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[</]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D><E><![CDATA[CONTENT]]></E></D>]]></C></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G></G></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[CDATA]]></A><B><![CDATA[CDATA]]></B><C><![CDATA[CDATA]]></C><D><![CDATA[CDATA]]></D><E><![CDATA[CDATA]]></E><F><![CDATA[CDATA]]></F><G><![CDATA[CDATA]]></G>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><H><I></I></H></G></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<A>]]><C></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><![CDATA[<E><F></F>]]></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C></C></B><D><![CDATA[TEXT]]></D></A>\") == True",
    "assert candidate(code = \"<NEST><INNER><![CDATA[<NEST><INNER><![CDATA[CDATA_CONTENT]]></INNER></NEST>]]></INNER></NEST>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[>]]></C></B></A>\") == True",
    "assert candidate(code = \"<CORRECT><INSIDE></INSIDE></CORRECT>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><H><I><J><K><L><M><N><O><P><Q><R><S><T><U><V><W><X><Y><Z></Z></Y></X></W></V></U></T></S></R></Q></P></O></N></M></L></K></J></I></H></G></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<D><E><![CDATA[CDATA_CONTENT]]></E></D>]]></C></B></A>\") == False",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></F></E></D></C></B></A>\") == False",
    "assert candidate(code = \"<A><B>content<![CDATA[<C>content</C>]]></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[<NOTATAG>data</NOTATAG>]]><VALID></VALID>\") == False",
    "assert candidate(code = \"<LAYER1><LAYER2><LAYER3></LAYER3></LAYER2></LAYER1>\") == False",
    "assert candidate(code = \"<TAG><INNER><![CDATA[<INNER>CDATA_CONTENT</INNER>]]> <![CDATA[TEXT]]></INNER></TAG>\") == True",
    "assert candidate(code = \"<A><B><C></C><![CDATA[TEXT]]></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[<Z><Z></Z></Z><Z><Z></Z></Z>]]></Z>\") == False",
    "assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C><D>content</D>\") == False",
    "assert candidate(code = \"<OUTER><MID><INNER>TEXT</INNER> <![CDATA[TEXT]]></MID></OUTER>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><![CDATA[ABCDE]]></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[&]][CDATA[]]><B></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B>content</B>]]></A><C><![CDATA[content]]></C>\") == False",
    "assert candidate(code = \"<A><![CDATA[content]]></A><![CDATA[morecontent]]>\") == False",
    "assert candidate(code = \"<NEST><LVL1><LVL2><LVL3><![CDATA[<NEST><LVL1>deep</LVL1></NEST>]]></LVL3></LVL2></LVL1></NEST>\") == False",
    "assert candidate(code = \"<A><B>content</B><![CDATA[content]]></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><![CDATA[ignore <F></F> here]]></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><![CDATA[<A><B><C>]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<!CDATA[CDATA_CONTENT]]]]><B></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[This is a <C></C> test]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><![CDATA[<C></C>]]></B></A>\") == True",
    "assert candidate(code = \"<OUTER><INNER><![CDATA[<INNER>CDATA</INNER>]]></INNER></OUTER>\") == True",
    "assert candidate(code = \"<![CDATA[ignore <TAG> tags <INSIDE> </INSIDE> </TAG> ]]>\") == True",
    "assert candidate(code = \"<A><B><C></C><D><![CDATA[TEXT]]></D></B></A>\") == True",
    "assert candidate(code = \"<A><B><C></C><D></D></B></A>\") == True",
    "assert candidate(code = \"<![CDATA[ignore <A><B><C></C></B></A> here]]><A></A>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<C><D></D></C>]]></B><C><D><![CDATA[<E><F></F></E>]]></D></C></A>\") == True",
    "assert candidate(code = \"<ALMOST><INNER><![CDATA[</INNER>]]></ALMOST>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[unmatched ]]></C></B></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><![CDATA[wahaha>]]></A>\") == True",
    "assert candidate(code = \"<X><Y><![CDATA[Not a tag>]]></Y></X>\") == True",
    "assert candidate(code = \"<A><![CDATA[This is some text <B></B> with CDATA]]></A>\") == True",
    "assert candidate(code = \"<A><B><C></C></B></A><D></D>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<A></A>]]></B></A><C><D><![CDATA[<E></E>]]></D></C>\") == False",
    "assert candidate(code = \"<A><B>content<![CDATA[<C>content</C>]]></B><![CDATA[content]]></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B>]]></A>\") == True",
    "assert candidate(code = \"<A><![CDATA[<B><C><D><E><F><G><![CDATA[wahaha]]></G></F></E></D></C></B></A>></B>\") == False",
    "assert candidate(code = \"<A><B><C><![CDATA[wahaha]]></C></D></B></A>\") == False",
    "assert candidate(code = \"<A><B><![CDATA[<B></C>]]></B></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha]]></G>></F></E></D></C></B></A>\") == True",
    "assert candidate(code = \"<A>content<![CDATA[<B>content</B>]]></A>\") == True",
    "assert candidate(code = \"<A><B><C><D><E><F><G><![CDATA[wahaha>]]></F></E></D></C></B></A>\") == False"
  ]
}