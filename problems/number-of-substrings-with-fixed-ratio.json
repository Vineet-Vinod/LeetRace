{
  "id": "number-of-substrings-with-fixed-ratio",
  "title": "Number Of Substrings With Fixed Ratio",
  "difficulty": "Medium",
  "tags": [
    "Hash Table",
    "Math",
    "String",
    "Prefix Sum"
  ],
  "description": "You are given a binary string s, and two integers num1 and num2. num1 and num2 are coprime numbers.\nA ratio substring is a substring of s where the ratio between the number of 0's and the number of 1's in the substring is exactly num1 : num2.\n\nFor example, if num1 = 2 and num2 = 3, then \"01011\" and \"1110000111\" are ratio substrings, while \"11000\" is not.\n\nReturn the number of non-empty ratio substrings of s.\nNote that:\n\nA substring is a contiguous sequence of characters within a string.\nTwo values x and y are coprime if gcd(x, y) == 1 where gcd(x, y) is the greatest common divisor of x and y.\n\n\u00a0\nExample 1:\n\nInput: s = \"0110011\", num1 = 1, num2 = 2\nOutput: 4\nExplanation: There exist 4 non-empty ratio substrings.\n- The substring s[0..2]: \"0110011\". It contains one 0 and two 1's. The ratio is 1 : 2.\n- The substring s[1..4]: \"0110011\". It contains one 0 and two 1's. The ratio is 1 : 2.\n- The substring s[4..6]: \"0110011\". It contains one 0 and two 1's. The ratio is 1 : 2.\n- The substring s[1..6]: \"0110011\". It contains two 0's and four 1's. The ratio is 2 : 4 == 1 : 2.\nIt can be shown that there are no more ratio substrings.\n\nExample 2:\n\nInput: s = \"10101\", num1 = 3, num2 = 1\nOutput: 0\nExplanation: There is no ratio substrings of s. We return 0.\n\n\u00a0\nConstraints:\n\n1 <= s.length <= 105\n1 <= num1, num2 <= s.length\nnum1 and num2 are coprime integers.\n\n",
  "entry_point": "Solution().fixedRatio",
  "starter_code": "class Solution:\n    def fixedRatio(self, s: str, num1: int, num2: int) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(s = \"0110011\",num1 = 1,num2 = 2) == 4\n    assert candidate(s = \"01010101\",num1 = 2,num2 = 2) == 16\n    assert candidate(s = \"111000\",num1 = 1,num2 = 1) == 3\n    assert candidate(s = \"1100110011\",num1 = 2,num2 = 2) == 16\n    assert candidate(s = \"00110011\",num1 = 2,num2 = 2) == 10\n    assert candidate(s = \"10101010\",num1 = 2,num2 = 2) == 16\n    assert candidate(s = \"10101\",num1 = 3,num2 = 1) == 0\n    assert candidate(s = \"0101010101\",num1 = 1,num2 = 1) == 25\n    assert candidate(s = \"00001111\",num1 = 2,num2 = 2) == 4\n    assert candidate(s = \"000111\",num1 = 1,num2 = 1) == 3\n    assert candidate(s = \"01001100110011001100110011001100\",num1 = 2,num2 = 7) == 0\n    assert candidate(s = \"1100110011001100110011001100\",num1 = 3,num2 = 4) == 15\n    assert candidate(s = \"000111000111000111000111\",num1 = 2,num2 = 3) == 17\n    assert candidate(s = \"01010101010101010101010101010101\",num1 = 2,num2 = 5) == 0\n    assert candidate(s = \"11001100110011001100\",num1 = 2,num2 = 3) == 11\n    assert candidate(s = \"1010101010101010101010101010\",num1 = 1,num2 = 1) == 196\n    assert candidate(s = \"00000000000000000000\",num1 = 1,num2 = 2) == 0\n    assert candidate(s = \"0101010101010101010101010101\",num1 = 3,num2 = 7) == 0\n    assert candidate(s = \"11111111111111111111\",num1 = 2,num2 = 1) == 0\n    assert candidate(s = \"10010010010010010010\",num1 = 1,num2 = 4) == 0\n    assert candidate(s = \"010101010101010101010101010101010101010101\",num1 = 3,num2 = 4) == 18\n    assert candidate(s = \"1111000011110000111100001111\",num1 = 1,num2 = 2) == 17\n    assert candidate(s = \"0011001100110011001100110011001100110011001100110011001100110011001100110011001100\",num1 = 1,num2 = 1) == 1240\n    assert candidate(s = \"01010101010101010101\",num1 = 3,num2 = 2) == 8\n    assert candidate(s = \"01010101010101010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 1) == 961\n    assert candidate(s = \"111100001111000011110000\",num1 = 3,num2 = 5) == 0\n    assert candidate(s = \"000000111111000000111111\",num1 = 1,num2 = 1) == 34\n    assert candidate(s = \"0101010101010101010101\",num1 = 1,num2 = 3) == 0\n    assert candidate(s = \"000000000000000000000000000000000000111111111111111111111111111111111111\",num1 = 3,num2 = 1) == 12\n    assert candidate(s = \"000011110000111100001111\",num1 = 2,num2 = 3) == 12\n    assert candidate(s = \"10101010101010101010\",num1 = 3,num2 = 5) == 0\n    assert candidate(s = \"000111000111000111000111000111000111\",num1 = 2,num2 = 3) == 29\n    assert candidate(s = \"111000111000111000\",num1 = 1,num2 = 3) == 5\n    assert candidate(s = \"0000000000111111111100000000001111111111\",num1 = 5,num2 = 7) == 10\n    assert candidate(s = \"00000000000000000000111111111111111111111111\",num1 = 1,num2 = 2) == 12\n    assert candidate(s = \"111111111111111111111111111111\",num1 = 1,num2 = 2) == 0\n    assert candidate(s = \"1100110011001100110011001100110011001100110011001100110011001100\",num1 = 5,num2 = 7) == 0\n    assert candidate(s = \"11111111111111111111111111111111111111111111\",num1 = 9,num2 = 10) == 0\n    assert candidate(s = \"000000000000000000000000000000\",num1 = 1,num2 = 2) == 0\n    assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 3) == 0\n    assert candidate(s = \"01001001001001001001001001001001001001\",num1 = 3,num2 = 7) == 0\n    assert candidate(s = \"1111111100000000111111110000000011111111\",num1 = 6,num2 = 7) == 6\n    assert candidate(s = \"0101010101010101010101010101010101010101\",num1 = 4,num2 = 9) == 0\n    assert candidate(s = \"000111000111000111000111000111000111000111000111000111\",num1 = 2,num2 = 3) == 47\n    assert candidate(s = \"000111000111000111000111000111000111000111000\",num1 = 3,num2 = 4) == 32\n    assert candidate(s = \"00000000001111111111000000000011111111110000000000111111111100000000001111111111\",num1 = 2,num2 = 2) == 268\n    assert candidate(s = \"10101010101010101010101010101010\",num1 = 5,num2 = 8) == 0\n    assert candidate(s = \"010101010101010101010101010101\",num1 = 1,num2 = 1) == 225\n    assert candidate(s = \"111000111000111000111\",num1 = 3,num2 = 2) == 14\n    assert candidate(s = \"1111000011110000111100001111000011110000\",num1 = 2,num2 = 3) == 24\n    assert candidate(s = \"1001001001001001001001001001001001001001001001001001001001001001001001001\",num1 = 1,num2 = 4) == 0\n    assert candidate(s = \"00000000001111111111000000001111111111\",num1 = 5,num2 = 5) == 49\n    assert candidate(s = \"11011011011011011011011011011011011011011011\",num1 = 2,num2 = 5) == 37\n    assert candidate(s = \"000111000111000111000111000111\",num1 = 4,num2 = 9) == 0\n    assert candidate(s = \"11011011011011011011011011011011011011011011011011011011011011011011011011\",num1 = 5,num2 = 4) == 0\n    assert candidate(s = \"000111000111000111000111000111\",num1 = 2,num2 = 3) == 23\n    assert candidate(s = \"110011001100110011001100110011\",num1 = 1,num2 = 2) == 21\n    assert candidate(s = \"10001000100010001000100010001000\",num1 = 5,num2 = 3) == 0\n    assert candidate(s = \"00000000000000000000000011111111111111111111111111111111\",num1 = 1,num2 = 3) == 10\n    assert candidate(s = \"1111000011110000111100001111\",num1 = 1,num2 = 3) == 6\n    assert candidate(s = \"1010101010101010101010101010\",num1 = 3,num2 = 2) == 12\n    assert candidate(s = \"00100100100100100100100100100100100100100100100100100100100100100100100100\",num1 = 4,num2 = 5) == 0\n    assert candidate(s = \"01100110011001100110011001100110011001100110\",num1 = 2,num2 = 3) == 29\n    assert candidate(s = \"000111000111000111000111\",num1 = 3,num2 = 4) == 14\n    assert candidate(s = \"0000111100001111000011110000111100001111000011110000111100001111000011110000111100001111\",num1 = 3,num2 = 2) == 60\n    assert candidate(s = \"1010101010101010101010101010101010101010101010101010101010101010\",num1 = 3,num2 = 4) == 29\n    assert candidate(s = \"0101010101010101010101010101010101010101010101010101010101010101\",num1 = 11,num2 = 13) == 0\n    assert candidate(s = \"01010101010101010101010101010101\",num1 = 3,num2 = 5) == 0\n    assert candidate(s = \"00000000000000000000\",num1 = 1,num2 = 1) == 0\n    assert candidate(s = \"00110011001100110011001100110011\",num1 = 5,num2 = 8) == 0\n    assert candidate(s = \"0000000000111111111100000000001111111111000000000011111111111\",num1 = 1,num2 = 2) == 36\n    assert candidate(s = \"10101010101010101010\",num1 = 2,num2 = 3) == 8\n    assert candidate(s = \"11001100110011001100110011001100110011\",num1 = 7,num2 = 11) == 0\n    assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 1) == 70\n    assert candidate(s = \"00000000000011111111111111000000000011111111111111\",num1 = 8,num2 = 13) == 4\n    assert candidate(s = \"11111111111111111111\",num1 = 1,num2 = 1) == 0\n    assert candidate(s = \"11111111110000000000\",num1 = 4,num2 = 5) == 2\n    assert candidate(s = \"111111111100000000000000000000000011111111110000000000000000000001111111111000000000000000\",num1 = 2,num2 = 3) == 15\n    assert candidate(s = \"11001100110011001100110011001100110011001100110011001100110011\",num1 = 1,num2 = 2) == 45\n    assert candidate(s = \"1111100000111110000011111000001111100000\",num1 = 5,num2 = 4) == 30\n    assert candidate(s = \"010011010011010011\",num1 = 2,num2 = 3) == 8\n    assert candidate(s = \"111110000011111000001111100000\",num1 = 3,num2 = 2) == 9\n    assert candidate(s = \"111000111000111000111\",num1 = 1,num2 = 2) == 9\n    assert candidate(s = \"11001100110011\",num1 = 2,num2 = 3) == 8\n    assert candidate(s = \"00000111110000011111000001111100000\",num1 = 4,num2 = 5) == 26\n    assert candidate(s = \"111000111000111000111000111000111000\",num1 = 3,num2 = 2) == 29\n    assert candidate(s = \"0101010101010101010101010101\",num1 = 2,num2 = 5) == 0\n    assert candidate(s = \"10101010101010101010101010101010101010\",num1 = 1,num2 = 2) == 18\n    assert candidate(s = \"000001111100000111110000011111\",num1 = 2,num2 = 3) == 9\n    assert candidate(s = \"11111111111111111111000000000000000000000000\",num1 = 1,num2 = 1) == 20\n    assert candidate(s = \"10101010101010101010101010101010101010101010\",num1 = 1,num2 = 1) == 484\n    assert candidate(s = \"0000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111\",num1 = 7,num2 = 8) == 6\n    assert candidate(s = \"01010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 1) == 625\n    assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 2) == 13\n    assert candidate(s = \"1010101010101010101010101010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 3) == 0\n    assert candidate(s = \"001100110011001100110011001100110011\",num1 = 1,num2 = 2) == 25\n    assert candidate(s = \"01010101010101010101010101010101010101010101010101010101010101010\",num1 = 4,num2 = 3) == 30\n",
  "test_cases": [
    "assert candidate(s = \"0110011\",num1 = 1,num2 = 2) == 4",
    "assert candidate(s = \"01010101\",num1 = 2,num2 = 2) == 16",
    "assert candidate(s = \"111000\",num1 = 1,num2 = 1) == 3",
    "assert candidate(s = \"1100110011\",num1 = 2,num2 = 2) == 16",
    "assert candidate(s = \"00110011\",num1 = 2,num2 = 2) == 10",
    "assert candidate(s = \"10101010\",num1 = 2,num2 = 2) == 16",
    "assert candidate(s = \"10101\",num1 = 3,num2 = 1) == 0",
    "assert candidate(s = \"0101010101\",num1 = 1,num2 = 1) == 25",
    "assert candidate(s = \"00001111\",num1 = 2,num2 = 2) == 4",
    "assert candidate(s = \"000111\",num1 = 1,num2 = 1) == 3",
    "assert candidate(s = \"01001100110011001100110011001100\",num1 = 2,num2 = 7) == 0",
    "assert candidate(s = \"1100110011001100110011001100\",num1 = 3,num2 = 4) == 15",
    "assert candidate(s = \"000111000111000111000111\",num1 = 2,num2 = 3) == 17",
    "assert candidate(s = \"01010101010101010101010101010101\",num1 = 2,num2 = 5) == 0",
    "assert candidate(s = \"11001100110011001100\",num1 = 2,num2 = 3) == 11",
    "assert candidate(s = \"1010101010101010101010101010\",num1 = 1,num2 = 1) == 196",
    "assert candidate(s = \"00000000000000000000\",num1 = 1,num2 = 2) == 0",
    "assert candidate(s = \"0101010101010101010101010101\",num1 = 3,num2 = 7) == 0",
    "assert candidate(s = \"11111111111111111111\",num1 = 2,num2 = 1) == 0",
    "assert candidate(s = \"10010010010010010010\",num1 = 1,num2 = 4) == 0",
    "assert candidate(s = \"010101010101010101010101010101010101010101\",num1 = 3,num2 = 4) == 18",
    "assert candidate(s = \"1111000011110000111100001111\",num1 = 1,num2 = 2) == 17",
    "assert candidate(s = \"0011001100110011001100110011001100110011001100110011001100110011001100110011001100\",num1 = 1,num2 = 1) == 1240",
    "assert candidate(s = \"01010101010101010101\",num1 = 3,num2 = 2) == 8",
    "assert candidate(s = \"01010101010101010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 1) == 961",
    "assert candidate(s = \"111100001111000011110000\",num1 = 3,num2 = 5) == 0",
    "assert candidate(s = \"000000111111000000111111\",num1 = 1,num2 = 1) == 34",
    "assert candidate(s = \"0101010101010101010101\",num1 = 1,num2 = 3) == 0",
    "assert candidate(s = \"000000000000000000000000000000000000111111111111111111111111111111111111\",num1 = 3,num2 = 1) == 12",
    "assert candidate(s = \"000011110000111100001111\",num1 = 2,num2 = 3) == 12",
    "assert candidate(s = \"10101010101010101010\",num1 = 3,num2 = 5) == 0",
    "assert candidate(s = \"000111000111000111000111000111000111\",num1 = 2,num2 = 3) == 29",
    "assert candidate(s = \"111000111000111000\",num1 = 1,num2 = 3) == 5",
    "assert candidate(s = \"0000000000111111111100000000001111111111\",num1 = 5,num2 = 7) == 10",
    "assert candidate(s = \"00000000000000000000111111111111111111111111\",num1 = 1,num2 = 2) == 12",
    "assert candidate(s = \"111111111111111111111111111111\",num1 = 1,num2 = 2) == 0",
    "assert candidate(s = \"1100110011001100110011001100110011001100110011001100110011001100\",num1 = 5,num2 = 7) == 0",
    "assert candidate(s = \"11111111111111111111111111111111111111111111\",num1 = 9,num2 = 10) == 0",
    "assert candidate(s = \"000000000000000000000000000000\",num1 = 1,num2 = 2) == 0",
    "assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 3) == 0",
    "assert candidate(s = \"01001001001001001001001001001001001001\",num1 = 3,num2 = 7) == 0",
    "assert candidate(s = \"1111111100000000111111110000000011111111\",num1 = 6,num2 = 7) == 6",
    "assert candidate(s = \"0101010101010101010101010101010101010101\",num1 = 4,num2 = 9) == 0",
    "assert candidate(s = \"000111000111000111000111000111000111000111000111000111\",num1 = 2,num2 = 3) == 47",
    "assert candidate(s = \"000111000111000111000111000111000111000111000\",num1 = 3,num2 = 4) == 32",
    "assert candidate(s = \"00000000001111111111000000000011111111110000000000111111111100000000001111111111\",num1 = 2,num2 = 2) == 268",
    "assert candidate(s = \"10101010101010101010101010101010\",num1 = 5,num2 = 8) == 0",
    "assert candidate(s = \"010101010101010101010101010101\",num1 = 1,num2 = 1) == 225",
    "assert candidate(s = \"111000111000111000111\",num1 = 3,num2 = 2) == 14",
    "assert candidate(s = \"1111000011110000111100001111000011110000\",num1 = 2,num2 = 3) == 24",
    "assert candidate(s = \"1001001001001001001001001001001001001001001001001001001001001001001001001\",num1 = 1,num2 = 4) == 0",
    "assert candidate(s = \"00000000001111111111000000001111111111\",num1 = 5,num2 = 5) == 49",
    "assert candidate(s = \"11011011011011011011011011011011011011011011\",num1 = 2,num2 = 5) == 37",
    "assert candidate(s = \"000111000111000111000111000111\",num1 = 4,num2 = 9) == 0",
    "assert candidate(s = \"11011011011011011011011011011011011011011011011011011011011011011011011011\",num1 = 5,num2 = 4) == 0",
    "assert candidate(s = \"000111000111000111000111000111\",num1 = 2,num2 = 3) == 23",
    "assert candidate(s = \"110011001100110011001100110011\",num1 = 1,num2 = 2) == 21",
    "assert candidate(s = \"10001000100010001000100010001000\",num1 = 5,num2 = 3) == 0",
    "assert candidate(s = \"00000000000000000000000011111111111111111111111111111111\",num1 = 1,num2 = 3) == 10",
    "assert candidate(s = \"1111000011110000111100001111\",num1 = 1,num2 = 3) == 6",
    "assert candidate(s = \"1010101010101010101010101010\",num1 = 3,num2 = 2) == 12",
    "assert candidate(s = \"00100100100100100100100100100100100100100100100100100100100100100100100100\",num1 = 4,num2 = 5) == 0",
    "assert candidate(s = \"01100110011001100110011001100110011001100110\",num1 = 2,num2 = 3) == 29",
    "assert candidate(s = \"000111000111000111000111\",num1 = 3,num2 = 4) == 14",
    "assert candidate(s = \"0000111100001111000011110000111100001111000011110000111100001111000011110000111100001111\",num1 = 3,num2 = 2) == 60",
    "assert candidate(s = \"1010101010101010101010101010101010101010101010101010101010101010\",num1 = 3,num2 = 4) == 29",
    "assert candidate(s = \"0101010101010101010101010101010101010101010101010101010101010101\",num1 = 11,num2 = 13) == 0",
    "assert candidate(s = \"01010101010101010101010101010101\",num1 = 3,num2 = 5) == 0",
    "assert candidate(s = \"00000000000000000000\",num1 = 1,num2 = 1) == 0",
    "assert candidate(s = \"00110011001100110011001100110011\",num1 = 5,num2 = 8) == 0",
    "assert candidate(s = \"0000000000111111111100000000001111111111000000000011111111111\",num1 = 1,num2 = 2) == 36",
    "assert candidate(s = \"10101010101010101010\",num1 = 2,num2 = 3) == 8",
    "assert candidate(s = \"11001100110011001100110011001100110011\",num1 = 7,num2 = 11) == 0",
    "assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 1) == 70",
    "assert candidate(s = \"00000000000011111111111111000000000011111111111111\",num1 = 8,num2 = 13) == 4",
    "assert candidate(s = \"11111111111111111111\",num1 = 1,num2 = 1) == 0",
    "assert candidate(s = \"11111111110000000000\",num1 = 4,num2 = 5) == 2",
    "assert candidate(s = \"111111111100000000000000000000000011111111110000000000000000000001111111111000000000000000\",num1 = 2,num2 = 3) == 15",
    "assert candidate(s = \"11001100110011001100110011001100110011001100110011001100110011\",num1 = 1,num2 = 2) == 45",
    "assert candidate(s = \"1111100000111110000011111000001111100000\",num1 = 5,num2 = 4) == 30",
    "assert candidate(s = \"010011010011010011\",num1 = 2,num2 = 3) == 8",
    "assert candidate(s = \"111110000011111000001111100000\",num1 = 3,num2 = 2) == 9",
    "assert candidate(s = \"111000111000111000111\",num1 = 1,num2 = 2) == 9",
    "assert candidate(s = \"11001100110011\",num1 = 2,num2 = 3) == 8",
    "assert candidate(s = \"00000111110000011111000001111100000\",num1 = 4,num2 = 5) == 26",
    "assert candidate(s = \"111000111000111000111000111000111000\",num1 = 3,num2 = 2) == 29",
    "assert candidate(s = \"0101010101010101010101010101\",num1 = 2,num2 = 5) == 0",
    "assert candidate(s = \"10101010101010101010101010101010101010\",num1 = 1,num2 = 2) == 18",
    "assert candidate(s = \"000001111100000111110000011111\",num1 = 2,num2 = 3) == 9",
    "assert candidate(s = \"11111111111111111111000000000000000000000000\",num1 = 1,num2 = 1) == 20",
    "assert candidate(s = \"10101010101010101010101010101010101010101010\",num1 = 1,num2 = 1) == 484",
    "assert candidate(s = \"0000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111111111111\",num1 = 7,num2 = 8) == 6",
    "assert candidate(s = \"01010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 1) == 625",
    "assert candidate(s = \"00110011001100110011\",num1 = 1,num2 = 2) == 13",
    "assert candidate(s = \"1010101010101010101010101010101010101010101010101010101010101010101010101\",num1 = 1,num2 = 3) == 0",
    "assert candidate(s = \"001100110011001100110011001100110011\",num1 = 1,num2 = 2) == 25",
    "assert candidate(s = \"01010101010101010101010101010101010101010101010101010101010101010\",num1 = 4,num2 = 3) == 30"
  ]
}