{
  "id": "maximize-grid-happiness",
  "title": "Maximize Grid Happiness",
  "difficulty": "Hard",
  "tags": [
    "Bit Manipulation",
    "Memoization",
    "Dynamic Programming",
    "Bitmask"
  ],
  "description": "You are given four integers, m, n, introvertsCount, and extrovertsCount. You have an m x n grid, and there are two types of people: introverts and extroverts. There are introvertsCount introverts and extrovertsCount extroverts.\nYou should decide how many people you want to live in the grid and assign each of them one grid cell. Note that you do not have to have all the people living in the grid.\nThe happiness of each person is calculated as follows:\n\nIntroverts start with 120 happiness and lose 30 happiness for each neighbor (introvert or extrovert).\nExtroverts start with 40 happiness and gain 20 happiness for each neighbor (introvert or extrovert).\n\nNeighbors live in the directly adjacent cells north, east, south, and west of a person's cell.\nThe grid happiness is the sum of each person's happiness. Return the maximum possible grid happiness.\n\u00a0\nExample 1:\n\n\nInput: m = 2, n = 3, introvertsCount = 1, extrovertsCount = 2\nOutput: 240\nExplanation: Assume the grid is 1-indexed with coordinates (row, column).\nWe can put the introvert in cell (1,1) and put the extroverts in cells (1,3) and (2,3).\n- Introvert at (1,1) happiness: 120 (starting happiness) - (0 * 30) (0 neighbors) = 120\n- Extrovert at (1,3) happiness: 40 (starting happiness) + (1 * 20) (1 neighbor) = 60\n- Extrovert at (2,3) happiness: 40 (starting happiness) + (1 * 20) (1 neighbor) = 60\nThe grid happiness is 120 + 60 + 60 = 240.\nThe above figure shows the grid in this example with each person's happiness. The introvert stays in the light green cell while the extroverts live on the light purple cells.\n\nExample 2:\n\nInput: m = 3, n = 1, introvertsCount = 2, extrovertsCount = 1\nOutput: 260\nExplanation: Place the two introverts in (1,1) and (3,1) and the extrovert at (2,1).\n- Introvert at (1,1) happiness: 120 (starting happiness) - (1 * 30) (1 neighbor) = 90\n- Extrovert at (2,1) happiness: 40 (starting happiness) + (2 * 20) (2 neighbors) = 80\n- Introvert at (3,1) happiness: 120 (starting happiness) - (1 * 30) (1 neighbor) = 90\nThe grid happiness is 90 + 80 + 90 = 260.\n\nExample 3:\n\nInput: m = 2, n = 2, introvertsCount = 4, extrovertsCount = 0\nOutput: 240\n\n\u00a0\nConstraints:\n\n1 <= m, n <= 5\n0 <= introvertsCount, extrovertsCount <= min(m * n, 6)\n\n",
  "entry_point": "Solution().getMaxGridHappiness",
  "starter_code": "class Solution:\n    def getMaxGridHappiness(self, m: int, n: int, introvertsCount: int, extrovertsCount: int) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(m = 5,n = 5,introvertsCount = 6,extrovertsCount = 6) == 1240\n    assert candidate(m = 1,n = 1,introvertsCount = 0,extrovertsCount = 1) == 40\n    assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 2,n = 3,introvertsCount = 1,extrovertsCount = 2) == 240\n    assert candidate(m = 1,n = 1,introvertsCount = 1,extrovertsCount = 0) == 120\n    assert candidate(m = 4,n = 4,introvertsCount = 6,extrovertsCount = 0) == 720\n    assert candidate(m = 2,n = 2,introvertsCount = 4,extrovertsCount = 0) == 240\n    assert candidate(m = 3,n = 1,introvertsCount = 2,extrovertsCount = 1) == 260\n    assert candidate(m = 1,n = 1,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 5) == 360\n    assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 3) == 560\n    assert candidate(m = 5,n = 5,introvertsCount = 3,extrovertsCount = 3) == 560\n    assert candidate(m = 1,n = 5,introvertsCount = 5,extrovertsCount = 0) == 360\n    assert candidate(m = 4,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480\n    assert candidate(m = 2,n = 5,introvertsCount = 5,extrovertsCount = 5) == 770\n    assert candidate(m = 3,n = 5,introvertsCount = 0,extrovertsCount = 6) == 520\n    assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 4) == 560\n    assert candidate(m = 2,n = 2,introvertsCount = 6,extrovertsCount = 0) == 240\n    assert candidate(m = 5,n = 2,introvertsCount = 4,extrovertsCount = 2) == 590\n    assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 1) == 520\n    assert candidate(m = 4,n = 3,introvertsCount = 4,extrovertsCount = 3) == 680\n    assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 1) == 620\n    assert candidate(m = 5,n = 2,introvertsCount = 3,extrovertsCount = 2) == 480\n    assert candidate(m = 5,n = 5,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 4) == 680\n    assert candidate(m = 4,n = 4,introvertsCount = 1,extrovertsCount = 6) == 640\n    assert candidate(m = 4,n = 4,introvertsCount = 6,extrovertsCount = 6) == 1140\n    assert candidate(m = 3,n = 2,introvertsCount = 0,extrovertsCount = 6) == 520\n    assert candidate(m = 5,n = 5,introvertsCount = 6,extrovertsCount = 5) == 1120\n    assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 2) == 360\n    assert candidate(m = 1,n = 5,introvertsCount = 1,extrovertsCount = 4) == 390\n    assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 4) == 800\n    assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 5,n = 2,introvertsCount = 4,extrovertsCount = 1) == 520\n    assert candidate(m = 3,n = 5,introvertsCount = 3,extrovertsCount = 3) == 560\n    assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 2) == 360\n    assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 3) == 640\n    assert candidate(m = 3,n = 4,introvertsCount = 2,extrovertsCount = 4) == 560\n    assert candidate(m = 5,n = 3,introvertsCount = 1,extrovertsCount = 4) == 440\n    assert candidate(m = 4,n = 3,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 3,n = 2,introvertsCount = 0,extrovertsCount = 3) == 200\n    assert candidate(m = 5,n = 4,introvertsCount = 3,extrovertsCount = 2) == 480\n    assert candidate(m = 3,n = 3,introvertsCount = 0,extrovertsCount = 6) == 520\n    assert candidate(m = 3,n = 3,introvertsCount = 5,extrovertsCount = 1) == 610\n    assert candidate(m = 5,n = 1,introvertsCount = 5,extrovertsCount = 1) == 380\n    assert candidate(m = 5,n = 5,introvertsCount = 5,extrovertsCount = 1) == 640\n    assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 4) == 560\n    assert candidate(m = 4,n = 3,introvertsCount = 5,extrovertsCount = 1) == 640\n    assert candidate(m = 4,n = 2,introvertsCount = 4,extrovertsCount = 2) == 520\n    assert candidate(m = 5,n = 3,introvertsCount = 2,extrovertsCount = 4) == 560\n    assert candidate(m = 4,n = 3,introvertsCount = 3,extrovertsCount = 3) == 560\n    assert candidate(m = 3,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480\n    assert candidate(m = 3,n = 3,introvertsCount = 3,extrovertsCount = 3) == 550\n    assert candidate(m = 4,n = 2,introvertsCount = 3,extrovertsCount = 2) == 470\n    assert candidate(m = 5,n = 3,introvertsCount = 4,extrovertsCount = 2) == 600\n    assert candidate(m = 4,n = 2,introvertsCount = 2,extrovertsCount = 4) == 550\n    assert candidate(m = 5,n = 3,introvertsCount = 6,extrovertsCount = 0) == 720\n    assert candidate(m = 5,n = 2,introvertsCount = 0,extrovertsCount = 6) == 520\n    assert candidate(m = 4,n = 2,introvertsCount = 1,extrovertsCount = 5) == 520\n    assert candidate(m = 4,n = 5,introvertsCount = 1,extrovertsCount = 4) == 440\n    assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 3) == 680\n    assert candidate(m = 4,n = 1,introvertsCount = 2,extrovertsCount = 2) == 340\n    assert candidate(m = 4,n = 3,introvertsCount = 5,extrovertsCount = 2) == 710\n    assert candidate(m = 5,n = 3,introvertsCount = 3,extrovertsCount = 3) == 560\n    assert candidate(m = 2,n = 5,introvertsCount = 1,extrovertsCount = 5) == 520\n    assert candidate(m = 5,n = 3,introvertsCount = 3,extrovertsCount = 4) == 680\n    assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 2) == 600\n    assert candidate(m = 4,n = 5,introvertsCount = 6,extrovertsCount = 2) == 840\n    assert candidate(m = 3,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 3,n = 4,introvertsCount = 0,extrovertsCount = 6) == 520\n    assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 4) == 700\n    assert candidate(m = 2,n = 2,introvertsCount = 2,extrovertsCount = 2) == 280\n    assert candidate(m = 5,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 3,n = 3,introvertsCount = 6,extrovertsCount = 0) == 600\n    assert candidate(m = 4,n = 3,introvertsCount = 2,extrovertsCount = 4) == 560\n    assert candidate(m = 5,n = 1,introvertsCount = 5,extrovertsCount = 0) == 360\n    assert candidate(m = 2,n = 4,introvertsCount = 3,extrovertsCount = 2) == 470\n    assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 3,n = 3,introvertsCount = 1,extrovertsCount = 1) == 160\n    assert candidate(m = 1,n = 5,introvertsCount = 3,extrovertsCount = 3) == 420\n    assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 2) == 360\n    assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 4) == 550\n    assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 1) == 40\n    assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 2) == 120\n    assert candidate(m = 3,n = 3,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 5) == 770\n    assert candidate(m = 5,n = 1,introvertsCount = 3,extrovertsCount = 3) == 420\n    assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 0) == 600\n    assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440\n    assert candidate(m = 5,n = 1,introvertsCount = 1,extrovertsCount = 0) == 120\n    assert candidate(m = 2,n = 2,introvertsCount = 1,extrovertsCount = 1) == 160\n    assert candidate(m = 1,n = 5,introvertsCount = 0,extrovertsCount = 5) == 360\n    assert candidate(m = 4,n = 4,introvertsCount = 0,extrovertsCount = 0) == 0\n    assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 2) == 480\n    assert candidate(m = 4,n = 5,introvertsCount = 5,extrovertsCount = 4) == 920\n    assert candidate(m = 1,n = 1,introvertsCount = 1,extrovertsCount = 1) == 120\n    assert candidate(m = 5,n = 5,introvertsCount = 1,extrovertsCount = 1) == 160\n    assert candidate(m = 1,n = 5,introvertsCount = 1,extrovertsCount = 0) == 120\n    assert candidate(m = 1,n = 5,introvertsCount = 0,extrovertsCount = 1) == 40\n    assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 1) == 40\n    assert candidate(m = 2,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480\n",
  "test_cases": [
    "assert candidate(m = 5,n = 5,introvertsCount = 6,extrovertsCount = 6) == 1240",
    "assert candidate(m = 1,n = 1,introvertsCount = 0,extrovertsCount = 1) == 40",
    "assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 2,n = 3,introvertsCount = 1,extrovertsCount = 2) == 240",
    "assert candidate(m = 1,n = 1,introvertsCount = 1,extrovertsCount = 0) == 120",
    "assert candidate(m = 4,n = 4,introvertsCount = 6,extrovertsCount = 0) == 720",
    "assert candidate(m = 2,n = 2,introvertsCount = 4,extrovertsCount = 0) == 240",
    "assert candidate(m = 3,n = 1,introvertsCount = 2,extrovertsCount = 1) == 260",
    "assert candidate(m = 1,n = 1,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 5) == 360",
    "assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 3) == 560",
    "assert candidate(m = 5,n = 5,introvertsCount = 3,extrovertsCount = 3) == 560",
    "assert candidate(m = 1,n = 5,introvertsCount = 5,extrovertsCount = 0) == 360",
    "assert candidate(m = 4,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480",
    "assert candidate(m = 2,n = 5,introvertsCount = 5,extrovertsCount = 5) == 770",
    "assert candidate(m = 3,n = 5,introvertsCount = 0,extrovertsCount = 6) == 520",
    "assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 4) == 560",
    "assert candidate(m = 2,n = 2,introvertsCount = 6,extrovertsCount = 0) == 240",
    "assert candidate(m = 5,n = 2,introvertsCount = 4,extrovertsCount = 2) == 590",
    "assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 1) == 520",
    "assert candidate(m = 4,n = 3,introvertsCount = 4,extrovertsCount = 3) == 680",
    "assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 1) == 620",
    "assert candidate(m = 5,n = 2,introvertsCount = 3,extrovertsCount = 2) == 480",
    "assert candidate(m = 5,n = 5,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 4) == 680",
    "assert candidate(m = 4,n = 4,introvertsCount = 1,extrovertsCount = 6) == 640",
    "assert candidate(m = 4,n = 4,introvertsCount = 6,extrovertsCount = 6) == 1140",
    "assert candidate(m = 3,n = 2,introvertsCount = 0,extrovertsCount = 6) == 520",
    "assert candidate(m = 5,n = 5,introvertsCount = 6,extrovertsCount = 5) == 1120",
    "assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 2) == 360",
    "assert candidate(m = 1,n = 5,introvertsCount = 1,extrovertsCount = 4) == 390",
    "assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 4) == 800",
    "assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 5,n = 2,introvertsCount = 4,extrovertsCount = 1) == 520",
    "assert candidate(m = 3,n = 5,introvertsCount = 3,extrovertsCount = 3) == 560",
    "assert candidate(m = 2,n = 5,introvertsCount = 2,extrovertsCount = 2) == 360",
    "assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 3) == 640",
    "assert candidate(m = 3,n = 4,introvertsCount = 2,extrovertsCount = 4) == 560",
    "assert candidate(m = 5,n = 3,introvertsCount = 1,extrovertsCount = 4) == 440",
    "assert candidate(m = 4,n = 3,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 3,n = 2,introvertsCount = 0,extrovertsCount = 3) == 200",
    "assert candidate(m = 5,n = 4,introvertsCount = 3,extrovertsCount = 2) == 480",
    "assert candidate(m = 3,n = 3,introvertsCount = 0,extrovertsCount = 6) == 520",
    "assert candidate(m = 3,n = 3,introvertsCount = 5,extrovertsCount = 1) == 610",
    "assert candidate(m = 5,n = 1,introvertsCount = 5,extrovertsCount = 1) == 380",
    "assert candidate(m = 5,n = 5,introvertsCount = 5,extrovertsCount = 1) == 640",
    "assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 4) == 560",
    "assert candidate(m = 4,n = 3,introvertsCount = 5,extrovertsCount = 1) == 640",
    "assert candidate(m = 4,n = 2,introvertsCount = 4,extrovertsCount = 2) == 520",
    "assert candidate(m = 5,n = 3,introvertsCount = 2,extrovertsCount = 4) == 560",
    "assert candidate(m = 4,n = 3,introvertsCount = 3,extrovertsCount = 3) == 560",
    "assert candidate(m = 3,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480",
    "assert candidate(m = 3,n = 3,introvertsCount = 3,extrovertsCount = 3) == 550",
    "assert candidate(m = 4,n = 2,introvertsCount = 3,extrovertsCount = 2) == 470",
    "assert candidate(m = 5,n = 3,introvertsCount = 4,extrovertsCount = 2) == 600",
    "assert candidate(m = 4,n = 2,introvertsCount = 2,extrovertsCount = 4) == 550",
    "assert candidate(m = 5,n = 3,introvertsCount = 6,extrovertsCount = 0) == 720",
    "assert candidate(m = 5,n = 2,introvertsCount = 0,extrovertsCount = 6) == 520",
    "assert candidate(m = 4,n = 2,introvertsCount = 1,extrovertsCount = 5) == 520",
    "assert candidate(m = 4,n = 5,introvertsCount = 1,extrovertsCount = 4) == 440",
    "assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 3) == 680",
    "assert candidate(m = 4,n = 1,introvertsCount = 2,extrovertsCount = 2) == 340",
    "assert candidate(m = 4,n = 3,introvertsCount = 5,extrovertsCount = 2) == 710",
    "assert candidate(m = 5,n = 3,introvertsCount = 3,extrovertsCount = 3) == 560",
    "assert candidate(m = 2,n = 5,introvertsCount = 1,extrovertsCount = 5) == 520",
    "assert candidate(m = 5,n = 3,introvertsCount = 3,extrovertsCount = 4) == 680",
    "assert candidate(m = 4,n = 4,introvertsCount = 4,extrovertsCount = 2) == 600",
    "assert candidate(m = 4,n = 5,introvertsCount = 6,extrovertsCount = 2) == 840",
    "assert candidate(m = 3,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 3,n = 4,introvertsCount = 0,extrovertsCount = 6) == 520",
    "assert candidate(m = 3,n = 3,introvertsCount = 4,extrovertsCount = 4) == 700",
    "assert candidate(m = 2,n = 2,introvertsCount = 2,extrovertsCount = 2) == 280",
    "assert candidate(m = 5,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 3,n = 3,introvertsCount = 6,extrovertsCount = 0) == 600",
    "assert candidate(m = 4,n = 3,introvertsCount = 2,extrovertsCount = 4) == 560",
    "assert candidate(m = 5,n = 1,introvertsCount = 5,extrovertsCount = 0) == 360",
    "assert candidate(m = 2,n = 4,introvertsCount = 3,extrovertsCount = 2) == 470",
    "assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 3,n = 3,introvertsCount = 1,extrovertsCount = 1) == 160",
    "assert candidate(m = 1,n = 5,introvertsCount = 3,extrovertsCount = 3) == 420",
    "assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 2) == 360",
    "assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 4) == 550",
    "assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 1) == 40",
    "assert candidate(m = 2,n = 2,introvertsCount = 0,extrovertsCount = 2) == 120",
    "assert candidate(m = 3,n = 3,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 3,n = 3,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 5) == 770",
    "assert candidate(m = 5,n = 1,introvertsCount = 3,extrovertsCount = 3) == 420",
    "assert candidate(m = 5,n = 2,introvertsCount = 5,extrovertsCount = 0) == 600",
    "assert candidate(m = 4,n = 4,introvertsCount = 2,extrovertsCount = 3) == 440",
    "assert candidate(m = 5,n = 1,introvertsCount = 1,extrovertsCount = 0) == 120",
    "assert candidate(m = 2,n = 2,introvertsCount = 1,extrovertsCount = 1) == 160",
    "assert candidate(m = 1,n = 5,introvertsCount = 0,extrovertsCount = 5) == 360",
    "assert candidate(m = 4,n = 4,introvertsCount = 0,extrovertsCount = 0) == 0",
    "assert candidate(m = 4,n = 4,introvertsCount = 3,extrovertsCount = 2) == 480",
    "assert candidate(m = 4,n = 5,introvertsCount = 5,extrovertsCount = 4) == 920",
    "assert candidate(m = 1,n = 1,introvertsCount = 1,extrovertsCount = 1) == 120",
    "assert candidate(m = 5,n = 5,introvertsCount = 1,extrovertsCount = 1) == 160",
    "assert candidate(m = 1,n = 5,introvertsCount = 1,extrovertsCount = 0) == 120",
    "assert candidate(m = 1,n = 5,introvertsCount = 0,extrovertsCount = 1) == 40",
    "assert candidate(m = 5,n = 1,introvertsCount = 0,extrovertsCount = 1) == 40",
    "assert candidate(m = 2,n = 5,introvertsCount = 3,extrovertsCount = 2) == 480"
  ]
}