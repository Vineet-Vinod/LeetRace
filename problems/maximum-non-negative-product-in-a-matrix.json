{
  "id": "maximum-non-negative-product-in-a-matrix",
  "title": "Maximum Non Negative Product In A Matrix",
  "difficulty": "Medium",
  "tags": [
    "Array",
    "Dynamic Programming",
    "Matrix"
  ],
  "description": "You are given a m x n matrix grid. Initially, you are located at the top-left corner (0, 0), and in each step, you can only move right or down in the matrix.\nAmong all possible paths starting from the top-left corner (0, 0) and ending in the bottom-right corner (m - 1, n - 1), find the path with the maximum non-negative product. The product of a path is the product of all integers in the grid cells visited along the path.\nReturn the maximum non-negative product modulo 109 + 7. If the maximum product is negative, return -1.\nNotice that the modulo is performed after getting the maximum product.\n\u00a0\nExample 1:\n\n\nInput: grid = [[-1,-2,-3],[-2,-3,-3],[-3,-3,-2]]\nOutput: -1\nExplanation: It is not possible to get non-negative product in the path from (0, 0) to (2, 2), so return -1.\n\nExample 2:\n\n\nInput: grid = [[1,-2,1],[1,-2,1],[3,-4,1]]\nOutput: 8\nExplanation: Maximum non-negative product is shown (1 * 1 * -2 * -4 * 1 = 8).\n\nExample 3:\n\n\nInput: grid = [[1,3],[0,-4]]\nOutput: 0\nExplanation: Maximum non-negative product is shown (1 * 0 * -4 = 0).\n\n\u00a0\nConstraints:\n\nm == grid.length\nn == grid[i].length\n1 <= m, n <= 15\n-4 <= grid[i][j] <= 4\n\n",
  "entry_point": "Solution().maxProductPath",
  "starter_code": "class Solution:\n    def maxProductPath(self, grid: List[List[int]]) -> int:\n        ",
  "preamble": "from typing import *\nfrom collections import *\nfrom functools import *\nfrom itertools import *\nfrom heapq import *\nfrom bisect import *\nfrom math import *\nimport math, collections, functools, itertools, bisect, heapq, string, re\n",
  "check_function": "def check(candidate):\n    assert candidate(grid = [[-1, -2, -3], [-2, -3, -3], [-3, -3, -2]]) == -1\n    assert candidate(grid = [[-1, 0], [-8, -2]]) == 0\n    assert candidate(grid = [[-1, 0], [-2, -1]]) == 0\n    assert candidate(grid = [[-4, 3], [-3, -4]]) == 48\n    assert candidate(grid = [[0, 0], [0, 0]]) == 0\n    assert candidate(grid = [[1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1]]) == 1\n    assert candidate(grid = [[2, 3, 4], [0, 1, 5]]) == 120\n    assert candidate(grid = [[-1, 2, -3], [-4, 5, -6], [-7, -8, 9]]) == 2016\n    assert candidate(grid = [[-1, -1, -1], [-1, -1, -1], [-1, -1, -1]]) == -1\n    assert candidate(grid = [[-1, 2], [-3, 4]]) == 12\n    assert candidate(grid = [[2, -3, 4], [-1, -2, 3], [1, 2, -5]]) == 360\n    assert candidate(grid = [[1, -2, 1], [1, -2, 1], [3, -4, 1]]) == 8\n    assert candidate(grid = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]) == 0\n    assert candidate(grid = [[1, 1], [1, 1]]) == 1\n    assert candidate(grid = [[-1, 0], [-2, -3]]) == 0\n    assert candidate(grid = [[1, 2], [3, 4]]) == 12\n    assert candidate(grid = [[1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1]]) == 1\n    assert candidate(grid = [[1, 3], [0, -4]]) == 0\n    assert candidate(grid = [[-4, -4], [-4, -4]]) == -1\n    assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]) == 2016\n    assert candidate(grid = [[-1, -4, -7], [-2, -5, -8], [-3, -6, -9]]) == -1\n    assert candidate(grid = [[-1, 2, -3], [4, -5, 6], [-7, 8, -9]]) == -1\n    assert candidate(grid = [[2, 3, -1, 4], [1, -2, 3, -3], [-4, 5, -6, 7], [-8, -9, 10, 11]]) == 59400\n    assert candidate(grid = [[-2, -3, 0, -4], [-1, -2, -3, 1], [0, -1, -2, -3], [2, 3, 4, -5]]) == 1440\n    assert candidate(grid = [[-1, 0, 1], [0, 0, 0], [1, 0, -1]]) == 0\n    assert candidate(grid = [[-1, 0, 0, 0], [-1, 0, 0, 0], [-1, 0, 0, 0], [-1, 0, 0, 0]]) == 0\n    assert candidate(grid = [[-1, 2, -3, 4, -5], [6, -7, 8, -9, 10], [11, -12, 13, -14, 15], [16, -17, 18, -19, 20], [21, -22, 23, -24, 25]]) == 450227165\n    assert candidate(grid = [[-1, -1, -1, -1], [1, 1, 1, 1], [-1, -1, -1, -1], [1, 1, 1, 1]]) == 1\n    assert candidate(grid = [[-4, 3, -2, 1], [2, -1, 3, -4], [3, -4, 2, 1], [4, 1, -3, 2]]) == 576\n    assert candidate(grid = [[-3, 3, -4, 1], [2, -1, 2, -3], [-2, 3, -2, 1], [4, -4, 3, -3]]) == 1728\n    assert candidate(grid = [[-1, 2, -3, 4, -5], [5, -6, 7, -8, 9], [-10, 11, -12, 13, -14], [15, -16, 17, -18, 19], [-20, 21, -22, 23, -24]]) == -1\n    assert candidate(grid = [[-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1]]) == -1\n    assert candidate(grid = [[-1, 0, 1, 0, -1], [-1, 1, 0, 1, -1], [0, -1, 1, -1, 0], [1, -1, 0, 1, -1], [-1, 0, 1, 0, -1]]) == 1\n    assert candidate(grid = [[2, -2, 3, -3], [-3, 3, -2, 2], [2, -2, 3, -3], [-3, 3, -2, 2]]) == -1\n    assert candidate(grid = [[-1, 3, -4, 2], [-2, 1, -1, 0], [3, -3, 2, -3], [4, 0, -1, 2]]) == 216\n    assert candidate(grid = [[0, 1, 2, 3, 4, 5], [0, 0, 0, 0, 0, 0], [0, 1, 0, 1, 0, 1], [0, 0, 0, 0, 0, 0], [0, 1, 0, 1, 0, 1]]) == 0\n    assert candidate(grid = [[-1, 0, 0, 0], [-2, 0, 0, 0], [-3, 0, 0, 0], [-4, 0, 0, 0]]) == 0\n    assert candidate(grid = [[1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5]]) == 75000\n    assert candidate(grid = [[1, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 1]]) == 0\n    assert candidate(grid = [[-3, -2, 1], [-2, -1, 3], [-1, 3, -2]]) == 36\n    assert candidate(grid = [[4, 3, 2, 1], [3, 2, 1, 0], [2, 1, 0, -1], [1, 0, -1, -2]]) == 0\n    assert candidate(grid = [[-2, 0, 2, 0], [-1, -2, -3, -1], [0, 1, 0, 1], [2, -2, 1, -3]]) == 36\n    assert candidate(grid = [[1, -1, 1, -1, 1], [-1, 1, -1, 1, -1], [1, -1, 1, -1, 1], [-1, 1, -1, 1, -1], [1, -1, 1, -1, 1]]) == 1\n    assert candidate(grid = [[-1, 2, -3, 4], [-2, 3, -4, 5], [3, -4, 5, -6], [4, 5, -6, 7]]) == 5040\n    assert candidate(grid = [[1, -1, 2, -3], [2, -2, 3, 4], [-3, 3, -4, 5], [0, -1, 2, -2]]) == 480\n    assert candidate(grid = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]) == 1965600\n    assert candidate(grid = [[-4, 3, 2, -1, 0], [0, 2, -3, 1, 4], [-1, 2, -1, 3, -2], [3, -2, 1, -1, 2], [1, -3, 2, -2, -4]]) == 4608\n    assert candidate(grid = [[4, 3, 2, 1], [3, 2, 1, 0], [2, 1, 0, -1], [1, 0, -1, -2]]) == 0\n    assert candidate(grid = [[-1, 2, 3, 4], [5, 6, -7, 8], [-9, 10, 11, -12], [13, -14, 15, 16]]) == 1188000\n    assert candidate(grid = [[-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1]]) == -1\n    assert candidate(grid = [[1, -2, 3, -4], [4, -1, 2, -3], [3, 2, -1, 4]]) == 144\n    assert candidate(grid = [[4, -1, 2], [1, 2, -1], [2, -1, 4], [-1, 4, -1]]) == 32\n    assert candidate(grid = [[1, -1, 0], [1, 0, 1], [0, 1, 1]]) == 0\n    assert candidate(grid = [[0, 1, 2, 3, 4], [4, 3, 2, 1, 0], [-1, -2, -3, -4, -5], [-5, -4, -3, -2, -1]]) == 0\n    assert candidate(grid = [[0, -1, 0, 0], [0, 0, -1, 0], [0, 0, 0, -1], [0, 0, 0, 0]]) == 0\n    assert candidate(grid = [[1, 2, 3, 4, 5, 6], [6, 5, 4, 3, 2, 1], [2, 3, 4, 5, 6, 7], [7, 6, 5, 4, 3, 2], [3, 4, 5, 6, 7, 8], [8, 7, 6, 5, 4, 3]]) == 13608000\n    assert candidate(grid = [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14, 15], [16, 17, 18, 19, 20], [21, 22, 23, 24, 25]]) == 732633558\n    assert candidate(grid = [[-1, 0, -1], [0, -1, 0], [-1, 0, -1]]) == 0\n    assert candidate(grid = [[0, 0, 1], [0, -1, 0], [-1, 0, 0]]) == 0\n    assert candidate(grid = [[-1, 0, 0, -1], [0, -1, 0, -1], [0, 0, -1, 0], [-1, 0, 0, -1]]) == 0\n    assert candidate(grid = [[-1, -2, -3, -4], [-2, -3, -4, -5], [-3, -4, -5, -6], [-4, -5, -6, -7]]) == -1\n    assert candidate(grid = [[-1, 2, -1, 3], [2, -3, 4, -2], [3, -1, -2, 2], [1, -3, 2, -1]]) == 96\n    assert candidate(grid = [[4, -3, -2], [-2, 1, 0], [3, -5, 6]]) == 720\n    assert candidate(grid = [[0, 3, 0, 4], [0, 0, 0, 0], [0, 4, 0, 0], [0, 0, 0, 0]]) == 0\n    assert candidate(grid = [[-1, 2, -3, 4, -5], [2, -3, 4, -5, 6], [-3, 4, -5, 6, -7], [4, -5, 6, -7, 8], [-5, 6, -7, 8, -9]]) == -1\n    assert candidate(grid = [[-1, 2, -3, 4], [-5, 6, -7, 8], [-9, 10, -11, 12], [-13, 14, -15, 16]]) == 1512000\n    assert candidate(grid = [[1, -1, 0, 2], [-1, 2, 3, -1], [0, 1, -1, 1], [2, -2, 1, -3]]) == 0\n    assert candidate(grid = [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]]) == 674358851\n    assert candidate(grid = [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]) == 1\n    assert candidate(grid = [[-4, -3, -2, -1], [-3, -2, -1, 0], [-2, -1, 0, 1], [-1, 0, 1, 2]]) == 0\n    assert candidate(grid = [[-2, -3, -4], [-1, -5, -6], [-7, -8, -9]]) == -1\n    assert candidate(grid = [[1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8], [5, 6, 7, 8, 9]]) == 362880\n    assert candidate(grid = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6], [4, 5, 6, 7]]) == 5040\n    assert candidate(grid = [[-1, -2, -3, -4, -5], [-2, -3, -4, -5, -6], [-3, -4, -5, -6, -7], [-4, -5, -6, -7, -8], [-5, -6, -7, -8, -9]]) == -1\n    assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) == 36960\n    assert candidate(grid = [[1, -1, 2, -2, 3, -3], [4, -4, 5, -5, 6, -6], [7, -7, 8, -8, 9, -9], [10, -10, 11, -11, 12, -12], [13, -13, 14, -14, 15, -15]]) == 605239993\n    assert candidate(grid = [[-1, -2, -3, -4], [-2, -3, -3, -4], [-3, -4, -5, -6], [-4, -5, -6, -7]]) == -1\n    assert candidate(grid = [[1, -2, 3, -4], [5, 6, -7, 8], [-9, 10, -11, 12], [13, -14, 15, -16]]) == 1008000\n    assert candidate(grid = [[0, 1, 2, 3, 4], [1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8]]) == 0\n    assert candidate(grid = [[-2, -3, 1, -4], [-3, -2, 1, 3], [-1, 2, -3, 1]]) == 72\n    assert candidate(grid = [[4, -1, -2, 3], [-1, 2, 1, -1], [-2, -1, 3, 4], [1, -3, 2, 1]]) == 96\n    assert candidate(grid = [[2, 3, 4, 5, 6], [7, 8, 9, 10, 11], [12, 13, 14, 15, 16], [17, 18, 19, 20, 21], [22, 23, 24, 25, 26]]) == 544121446\n    assert candidate(grid = [[0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14], [15, 16, 17, 18, 19], [20, 21, 22, 23, 24]]) == 0\n    assert candidate(grid = [[4, -4, 3, -3], [-3, 3, -2, 2], [2, -2, 3, -3], [-3, 3, -2, 2]]) == -1\n    assert candidate(grid = [[-1, -2, -3, -4], [-4, -5, -6, -7], [-8, -9, -10, -11], [-12, -13, -14, -15]]) == -1\n    assert candidate(grid = [[1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8], [5, 6, 7, 8, 9]]) == 362880\n    assert candidate(grid = [[-4, -3, -2, -1], [1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6]]) == 8640\n    assert candidate(grid = [[0, -1, 1], [1, -1, 0], [-1, 0, 1]]) == 0\n    assert candidate(grid = [[-1, 2, -3, 4], [-4, 1, -2, 3], [2, -1, 4, -3], [3, 4, -1, 2]]) == 288\n    assert candidate(grid = [[1, 0, 1, 0], [0, 1, 0, 1], [1, 0, 1, 0], [0, 1, 0, 1]]) == 0\n    assert candidate(grid = [[-2, -3, 0, -1], [-1, -2, -3, -4], [0, -1, -2, -3], [-3, -4, -5, -6]]) == 0\n    assert candidate(grid = [[2, -1, 3, -4], [1, 0, 5, -1], [3, -2, 4, 1]]) == 30\n    assert candidate(grid = [[1, 0, 1, 0, 1], [0, 1, 0, 1, 0], [1, 0, 1, 0, 1], [0, 1, 0, 1, 0], [1, 0, 1, 0, 1]]) == 0\n    assert candidate(grid = [[4, -1, 2], [2, -3, 4], [-1, 2, -3]]) == 288\n    assert candidate(grid = [[1, 2, 3], [-1, -2, -3], [1, 2, 3]]) == 36\n    assert candidate(grid = [[-1, -2, -3], [-3, -4, -5], [-5, -6, -7]]) == -1\n    assert candidate(grid = [[-1, 0, 1], [0, 1, 0], [1, 0, -1]]) == 0\n    assert candidate(grid = [[-4, -3, -2], [-2, -1, 0], [3, -5, 6]]) == 360\n    assert candidate(grid = [[-4, -4, -4, -4], [-4, -4, -4, -4], [-4, -4, -4, -4], [-4, -4, -4, -4]]) == -1\n    assert candidate(grid = [[-2, 3, -1, 4], [-1, 2, -3, 5], [3, -4, 5, -6], [4, -5, 6, -7]]) == 10080\n    assert candidate(grid = [[1, -1, 2, -4], [-2, 3, -1, 2], [4, -2, 3, -1], [-2, 1, -3, 4]]) == -1\n    assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]) == 2016\n    assert candidate(grid = [[2, -2, 3, 4, -1], [-1, 3, 2, 1, -2], [1, 2, -3, 2, -1], [3, 1, -2, -1, 2], [1, -2, 2, 1, -3]]) == 864\n    assert candidate(grid = [[2, -3, 4, 5], [-1, 3, 2, -2], [2, -1, -2, -1], [1, 2, 3, -1]]) == 240\n    assert candidate(grid = [[2, 3, 4], [1, 0, 1], [4, 3, 2], [3, 2, 1]]) == 48\n    assert candidate(grid = [[-1, 3, -1, -4, 1], [-2, 1, 2, 3, -1], [3, -2, -1, 1, 2], [1, 2, -3, 4, -2]]) == 288\n    assert candidate(grid = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6], [4, 5, 6, 7]]) == 5040\n    assert candidate(grid = [[1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15]]) == 674358851\n    assert candidate(grid = [[-1, 2, -1, 3], [1, -2, 1, -1], [2, 1, -1, -3], [1, -1, -2, 1]]) == 18\n    assert candidate(grid = [[1, 2, 3, 4, 5], [5, 4, 3, 2, 1], [2, 3, 4, 5, 6], [6, 5, 4, 3, 2], [1, 2, 3, 4, 5]]) == 72000\n    assert candidate(grid = [[0, -1, -2, -3], [-1, 0, -1, -2], [-2, -1, 0, -1], [-3, -2, -1, 0]]) == 0\n",
  "test_cases": [
    "assert candidate(grid = [[-1, -2, -3], [-2, -3, -3], [-3, -3, -2]]) == -1",
    "assert candidate(grid = [[-1, 0], [-8, -2]]) == 0",
    "assert candidate(grid = [[-1, 0], [-2, -1]]) == 0",
    "assert candidate(grid = [[-4, 3], [-3, -4]]) == 48",
    "assert candidate(grid = [[0, 0], [0, 0]]) == 0",
    "assert candidate(grid = [[1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1]]) == 1",
    "assert candidate(grid = [[2, 3, 4], [0, 1, 5]]) == 120",
    "assert candidate(grid = [[-1, 2, -3], [-4, 5, -6], [-7, -8, 9]]) == 2016",
    "assert candidate(grid = [[-1, -1, -1], [-1, -1, -1], [-1, -1, -1]]) == -1",
    "assert candidate(grid = [[-1, 2], [-3, 4]]) == 12",
    "assert candidate(grid = [[2, -3, 4], [-1, -2, 3], [1, 2, -5]]) == 360",
    "assert candidate(grid = [[1, -2, 1], [1, -2, 1], [3, -4, 1]]) == 8",
    "assert candidate(grid = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]) == 0",
    "assert candidate(grid = [[1, 1], [1, 1]]) == 1",
    "assert candidate(grid = [[-1, 0], [-2, -3]]) == 0",
    "assert candidate(grid = [[1, 2], [3, 4]]) == 12",
    "assert candidate(grid = [[1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1]]) == 1",
    "assert candidate(grid = [[1, 3], [0, -4]]) == 0",
    "assert candidate(grid = [[-4, -4], [-4, -4]]) == -1",
    "assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]) == 2016",
    "assert candidate(grid = [[-1, -4, -7], [-2, -5, -8], [-3, -6, -9]]) == -1",
    "assert candidate(grid = [[-1, 2, -3], [4, -5, 6], [-7, 8, -9]]) == -1",
    "assert candidate(grid = [[2, 3, -1, 4], [1, -2, 3, -3], [-4, 5, -6, 7], [-8, -9, 10, 11]]) == 59400",
    "assert candidate(grid = [[-2, -3, 0, -4], [-1, -2, -3, 1], [0, -1, -2, -3], [2, 3, 4, -5]]) == 1440",
    "assert candidate(grid = [[-1, 0, 1], [0, 0, 0], [1, 0, -1]]) == 0",
    "assert candidate(grid = [[-1, 0, 0, 0], [-1, 0, 0, 0], [-1, 0, 0, 0], [-1, 0, 0, 0]]) == 0",
    "assert candidate(grid = [[-1, 2, -3, 4, -5], [6, -7, 8, -9, 10], [11, -12, 13, -14, 15], [16, -17, 18, -19, 20], [21, -22, 23, -24, 25]]) == 450227165",
    "assert candidate(grid = [[-1, -1, -1, -1], [1, 1, 1, 1], [-1, -1, -1, -1], [1, 1, 1, 1]]) == 1",
    "assert candidate(grid = [[-4, 3, -2, 1], [2, -1, 3, -4], [3, -4, 2, 1], [4, 1, -3, 2]]) == 576",
    "assert candidate(grid = [[-3, 3, -4, 1], [2, -1, 2, -3], [-2, 3, -2, 1], [4, -4, 3, -3]]) == 1728",
    "assert candidate(grid = [[-1, 2, -3, 4, -5], [5, -6, 7, -8, 9], [-10, 11, -12, 13, -14], [15, -16, 17, -18, 19], [-20, 21, -22, 23, -24]]) == -1",
    "assert candidate(grid = [[-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1]]) == -1",
    "assert candidate(grid = [[-1, 0, 1, 0, -1], [-1, 1, 0, 1, -1], [0, -1, 1, -1, 0], [1, -1, 0, 1, -1], [-1, 0, 1, 0, -1]]) == 1",
    "assert candidate(grid = [[2, -2, 3, -3], [-3, 3, -2, 2], [2, -2, 3, -3], [-3, 3, -2, 2]]) == -1",
    "assert candidate(grid = [[-1, 3, -4, 2], [-2, 1, -1, 0], [3, -3, 2, -3], [4, 0, -1, 2]]) == 216",
    "assert candidate(grid = [[0, 1, 2, 3, 4, 5], [0, 0, 0, 0, 0, 0], [0, 1, 0, 1, 0, 1], [0, 0, 0, 0, 0, 0], [0, 1, 0, 1, 0, 1]]) == 0",
    "assert candidate(grid = [[-1, 0, 0, 0], [-2, 0, 0, 0], [-3, 0, 0, 0], [-4, 0, 0, 0]]) == 0",
    "assert candidate(grid = [[1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5], [1, 2, 3, 4, 5]]) == 75000",
    "assert candidate(grid = [[1, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 1]]) == 0",
    "assert candidate(grid = [[-3, -2, 1], [-2, -1, 3], [-1, 3, -2]]) == 36",
    "assert candidate(grid = [[4, 3, 2, 1], [3, 2, 1, 0], [2, 1, 0, -1], [1, 0, -1, -2]]) == 0",
    "assert candidate(grid = [[-2, 0, 2, 0], [-1, -2, -3, -1], [0, 1, 0, 1], [2, -2, 1, -3]]) == 36",
    "assert candidate(grid = [[1, -1, 1, -1, 1], [-1, 1, -1, 1, -1], [1, -1, 1, -1, 1], [-1, 1, -1, 1, -1], [1, -1, 1, -1, 1]]) == 1",
    "assert candidate(grid = [[-1, 2, -3, 4], [-2, 3, -4, 5], [3, -4, 5, -6], [4, 5, -6, 7]]) == 5040",
    "assert candidate(grid = [[1, -1, 2, -3], [2, -2, 3, 4], [-3, 3, -4, 5], [0, -1, 2, -2]]) == 480",
    "assert candidate(grid = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]) == 1965600",
    "assert candidate(grid = [[-4, 3, 2, -1, 0], [0, 2, -3, 1, 4], [-1, 2, -1, 3, -2], [3, -2, 1, -1, 2], [1, -3, 2, -2, -4]]) == 4608",
    "assert candidate(grid = [[4, 3, 2, 1], [3, 2, 1, 0], [2, 1, 0, -1], [1, 0, -1, -2]]) == 0",
    "assert candidate(grid = [[-1, 2, 3, 4], [5, 6, -7, 8], [-9, 10, 11, -12], [13, -14, 15, 16]]) == 1188000",
    "assert candidate(grid = [[-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1], [-1, -1, -1, -1, -1]]) == -1",
    "assert candidate(grid = [[1, -2, 3, -4], [4, -1, 2, -3], [3, 2, -1, 4]]) == 144",
    "assert candidate(grid = [[4, -1, 2], [1, 2, -1], [2, -1, 4], [-1, 4, -1]]) == 32",
    "assert candidate(grid = [[1, -1, 0], [1, 0, 1], [0, 1, 1]]) == 0",
    "assert candidate(grid = [[0, 1, 2, 3, 4], [4, 3, 2, 1, 0], [-1, -2, -3, -4, -5], [-5, -4, -3, -2, -1]]) == 0",
    "assert candidate(grid = [[0, -1, 0, 0], [0, 0, -1, 0], [0, 0, 0, -1], [0, 0, 0, 0]]) == 0",
    "assert candidate(grid = [[1, 2, 3, 4, 5, 6], [6, 5, 4, 3, 2, 1], [2, 3, 4, 5, 6, 7], [7, 6, 5, 4, 3, 2], [3, 4, 5, 6, 7, 8], [8, 7, 6, 5, 4, 3]]) == 13608000",
    "assert candidate(grid = [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14, 15], [16, 17, 18, 19, 20], [21, 22, 23, 24, 25]]) == 732633558",
    "assert candidate(grid = [[-1, 0, -1], [0, -1, 0], [-1, 0, -1]]) == 0",
    "assert candidate(grid = [[0, 0, 1], [0, -1, 0], [-1, 0, 0]]) == 0",
    "assert candidate(grid = [[-1, 0, 0, -1], [0, -1, 0, -1], [0, 0, -1, 0], [-1, 0, 0, -1]]) == 0",
    "assert candidate(grid = [[-1, -2, -3, -4], [-2, -3, -4, -5], [-3, -4, -5, -6], [-4, -5, -6, -7]]) == -1",
    "assert candidate(grid = [[-1, 2, -1, 3], [2, -3, 4, -2], [3, -1, -2, 2], [1, -3, 2, -1]]) == 96",
    "assert candidate(grid = [[4, -3, -2], [-2, 1, 0], [3, -5, 6]]) == 720",
    "assert candidate(grid = [[0, 3, 0, 4], [0, 0, 0, 0], [0, 4, 0, 0], [0, 0, 0, 0]]) == 0",
    "assert candidate(grid = [[-1, 2, -3, 4, -5], [2, -3, 4, -5, 6], [-3, 4, -5, 6, -7], [4, -5, 6, -7, 8], [-5, 6, -7, 8, -9]]) == -1",
    "assert candidate(grid = [[-1, 2, -3, 4], [-5, 6, -7, 8], [-9, 10, -11, 12], [-13, 14, -15, 16]]) == 1512000",
    "assert candidate(grid = [[1, -1, 0, 2], [-1, 2, 3, -1], [0, 1, -1, 1], [2, -2, 1, -3]]) == 0",
    "assert candidate(grid = [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]]) == 674358851",
    "assert candidate(grid = [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]) == 1",
    "assert candidate(grid = [[-4, -3, -2, -1], [-3, -2, -1, 0], [-2, -1, 0, 1], [-1, 0, 1, 2]]) == 0",
    "assert candidate(grid = [[-2, -3, -4], [-1, -5, -6], [-7, -8, -9]]) == -1",
    "assert candidate(grid = [[1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8], [5, 6, 7, 8, 9]]) == 362880",
    "assert candidate(grid = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6], [4, 5, 6, 7]]) == 5040",
    "assert candidate(grid = [[-1, -2, -3, -4, -5], [-2, -3, -4, -5, -6], [-3, -4, -5, -6, -7], [-4, -5, -6, -7, -8], [-5, -6, -7, -8, -9]]) == -1",
    "assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) == 36960",
    "assert candidate(grid = [[1, -1, 2, -2, 3, -3], [4, -4, 5, -5, 6, -6], [7, -7, 8, -8, 9, -9], [10, -10, 11, -11, 12, -12], [13, -13, 14, -14, 15, -15]]) == 605239993",
    "assert candidate(grid = [[-1, -2, -3, -4], [-2, -3, -3, -4], [-3, -4, -5, -6], [-4, -5, -6, -7]]) == -1",
    "assert candidate(grid = [[1, -2, 3, -4], [5, 6, -7, 8], [-9, 10, -11, 12], [13, -14, 15, -16]]) == 1008000",
    "assert candidate(grid = [[0, 1, 2, 3, 4], [1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8]]) == 0",
    "assert candidate(grid = [[-2, -3, 1, -4], [-3, -2, 1, 3], [-1, 2, -3, 1]]) == 72",
    "assert candidate(grid = [[4, -1, -2, 3], [-1, 2, 1, -1], [-2, -1, 3, 4], [1, -3, 2, 1]]) == 96",
    "assert candidate(grid = [[2, 3, 4, 5, 6], [7, 8, 9, 10, 11], [12, 13, 14, 15, 16], [17, 18, 19, 20, 21], [22, 23, 24, 25, 26]]) == 544121446",
    "assert candidate(grid = [[0, 1, 2, 3, 4], [5, 6, 7, 8, 9], [10, 11, 12, 13, 14], [15, 16, 17, 18, 19], [20, 21, 22, 23, 24]]) == 0",
    "assert candidate(grid = [[4, -4, 3, -3], [-3, 3, -2, 2], [2, -2, 3, -3], [-3, 3, -2, 2]]) == -1",
    "assert candidate(grid = [[-1, -2, -3, -4], [-4, -5, -6, -7], [-8, -9, -10, -11], [-12, -13, -14, -15]]) == -1",
    "assert candidate(grid = [[1, 2, 3, 4, 5], [2, 3, 4, 5, 6], [3, 4, 5, 6, 7], [4, 5, 6, 7, 8], [5, 6, 7, 8, 9]]) == 362880",
    "assert candidate(grid = [[-4, -3, -2, -1], [1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6]]) == 8640",
    "assert candidate(grid = [[0, -1, 1], [1, -1, 0], [-1, 0, 1]]) == 0",
    "assert candidate(grid = [[-1, 2, -3, 4], [-4, 1, -2, 3], [2, -1, 4, -3], [3, 4, -1, 2]]) == 288",
    "assert candidate(grid = [[1, 0, 1, 0], [0, 1, 0, 1], [1, 0, 1, 0], [0, 1, 0, 1]]) == 0",
    "assert candidate(grid = [[-2, -3, 0, -1], [-1, -2, -3, -4], [0, -1, -2, -3], [-3, -4, -5, -6]]) == 0",
    "assert candidate(grid = [[2, -1, 3, -4], [1, 0, 5, -1], [3, -2, 4, 1]]) == 30",
    "assert candidate(grid = [[1, 0, 1, 0, 1], [0, 1, 0, 1, 0], [1, 0, 1, 0, 1], [0, 1, 0, 1, 0], [1, 0, 1, 0, 1]]) == 0",
    "assert candidate(grid = [[4, -1, 2], [2, -3, 4], [-1, 2, -3]]) == 288",
    "assert candidate(grid = [[1, 2, 3], [-1, -2, -3], [1, 2, 3]]) == 36",
    "assert candidate(grid = [[-1, -2, -3], [-3, -4, -5], [-5, -6, -7]]) == -1",
    "assert candidate(grid = [[-1, 0, 1], [0, 1, 0], [1, 0, -1]]) == 0",
    "assert candidate(grid = [[-4, -3, -2], [-2, -1, 0], [3, -5, 6]]) == 360",
    "assert candidate(grid = [[-4, -4, -4, -4], [-4, -4, -4, -4], [-4, -4, -4, -4], [-4, -4, -4, -4]]) == -1",
    "assert candidate(grid = [[-2, 3, -1, 4], [-1, 2, -3, 5], [3, -4, 5, -6], [4, -5, 6, -7]]) == 10080",
    "assert candidate(grid = [[1, -1, 2, -4], [-2, 3, -1, 2], [4, -2, 3, -1], [-2, 1, -3, 4]]) == -1",
    "assert candidate(grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]) == 2016",
    "assert candidate(grid = [[2, -2, 3, 4, -1], [-1, 3, 2, 1, -2], [1, 2, -3, 2, -1], [3, 1, -2, -1, 2], [1, -2, 2, 1, -3]]) == 864",
    "assert candidate(grid = [[2, -3, 4, 5], [-1, 3, 2, -2], [2, -1, -2, -1], [1, 2, 3, -1]]) == 240",
    "assert candidate(grid = [[2, 3, 4], [1, 0, 1], [4, 3, 2], [3, 2, 1]]) == 48",
    "assert candidate(grid = [[-1, 3, -1, -4, 1], [-2, 1, 2, 3, -1], [3, -2, -1, 1, 2], [1, 2, -3, 4, -2]]) == 288",
    "assert candidate(grid = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6], [4, 5, 6, 7]]) == 5040",
    "assert candidate(grid = [[1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15]]) == 674358851",
    "assert candidate(grid = [[-1, 2, -1, 3], [1, -2, 1, -1], [2, 1, -1, -3], [1, -1, -2, 1]]) == 18",
    "assert candidate(grid = [[1, 2, 3, 4, 5], [5, 4, 3, 2, 1], [2, 3, 4, 5, 6], [6, 5, 4, 3, 2], [1, 2, 3, 4, 5]]) == 72000",
    "assert candidate(grid = [[0, -1, -2, -3], [-1, 0, -1, -2], [-2, -1, 0, -1], [-3, -2, -1, 0]]) == 0"
  ]
}